<!DOCTYPE HTML>
<html lang="en">
  <head>
		<meta charset="utf-8">
<title>HTML5 Canvas Programming: theLogBox.com</title>

<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Neuton:300,400italic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>

<link rel="stylesheet" type="text/css" href="/style.css" media="screen">


<meta name="google-site-verification" content="h3sz9mbRignTr-OFf8zOhJa_-2HaneH4frxtac50oFU" />

		<!-- Google webmaster and Analytics -->
   <meta name="google-site-verification" content="h3sz9mbRignTr-OFf8zOhJa_-2HaneH4frxtac50oFU" />
   <script type="text/javascript">

   var _gaq = _gaq || [];
   _gaq.push(['_setAccount', 'UA-30546856-1']);
   _gaq.push(['_setDomainName', '.thelogbox.com']);
   _gaq.push(['_trackPageview']);

   (function() {
       var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
       ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
       var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
   })();

   </script>
   <!-- end Google webmaster and analytics -->	
  </head>
  <body>
		  
    <div id="main" itemscope itemtype="http://schema.org/Article">

	  <header>
      
<div id='navleft'>
<a href='/'>{theLogBox}</a>
</div>

<div id='navright'>
  <a href=''>courses</a> &nbsp;&nbsp;
    <a href=''>blog</a> 
</div>
    </header>

	  <div id="articletitle" itemprop="headline">HTML5 Canvas Programming</div>  
    <div id='contentmeta'>
by: 
<a href="https://plus.google.com/107317535953221277825?rel=author">
  Ted Hagos
</a> on 

<span itemprop="dateCreated"> October 18, 2012 </span>
</div>  

	  <div itemprop="articleBody">
      <div id="update-history">
<h3>
Doc History
</h3>
<br> 18.Oct.2012 — created<br> 22.Oct.2012 — rewrite sections, added basic straight line and circular movements<br> 28.Oct.2012 — added some sections on acceleration. embedded live demo within tutorial<br>
</div>


<div id="minitoc">
<h3>
Contents
</h3>

<ol start="0" style="list-style-type: decimal">
<li>Prep</li>
<li>Basic plumbing
<ul>
<li>Drawing primitives</li>
<li>Timed animation</li>
</ul>
</li>
<li>Basic movements
<ul>
<li>Moving in a straight line</li>
<li>Moving in a uniform circular motion</li>
</ul>
</li>
<li>Acceleration
<ul>
<li>Accelerate, then stop</li>
</ul>
</li>
</ol>
</div>

<h1 id="prep">Prep</h1>
<p>
</p><ol style="list-style-type: decimal">
<li>HTML5 compliant browser. It is easy to find out, open whatever browser you are using and go http://html5test.com</li>
<li>Good programmer's editor</li>
<li>JQuery</li>
<li>CoffeeScript</li>
<li>Haml</li>
<li>Sass</li>
<li>Source control (git, mercurial, svn, cvs etc), whatever you are comfortable with</li>
</ol><p>Item numbers 3 until 8, you can live without (I suggest you don't though)</p>
<h2 id="prior-knowledge">Prior knowledge</h2>
<p>You need a (really) solid background on <strong>JavaScript</strong>, a passing knowledge of the lanaguage might tie you up for drawing some simplistic primitives and less complex animations (straight line movements with fewer than 10 objects), however, when the complications gets to a higher order (lots of objects flying around independently, oscillations, movements along curvatures etc), it means only one thing--time to get some more programming knowledge and experience. A really good book will help, a really good teacher/mentor/community support will be even better.</p>
<p>Programmers coming from other languages (such as Java, C++, Ruby, Python) who are quite adept with data structures and algorithms will feel right at home. HTML5 canvas programming requires programming experience because it is quite close to the metal. There are frameworks that may help doing some basic animations, but you do really need to understand the JavaScript language, be comfortable structuring data (in OO way would be very helpful) and you need to genuinely enjoy breaking down problems into component solutions. As mentioned before, it is close to the metal programming; canvas lets you manipulate individual pixels in a bounded region, after that, you are pretty much on your own.</p>
<h1 id="basic-plumbing">1. Basic plumbing</h1>
<p>A canvas HTMLElement needs to be defined in the page.</p>
<pre><code class="language-html"><span class="line-numbers">10</span><span class="doctype">&lt;!DOCTYPE html&gt;</span>
<span class="line-numbers">11</span><span class="tag">&lt;html&gt;</span>
<span class="line-numbers">12</span>  <span class="tag">&lt;head&gt;</span><span class="tag">&lt;/head&gt;</span>
<span class="line-numbers">13</span>  <span class="tag">&lt;style&gt;</span>#mycanvas {border:1px solid gray;}<span class="tag">&lt;/style&gt;</span>
<span class="line-numbers">14</span>  <span class="tag">&lt;title&gt;</span>"canvas programming"<span class="tag">&lt;/title&gt;</span>
<span class="line-numbers">15</span>  <span class="tag">&lt;script&gt;</span><span class="inline">src=<span class="string"><span class="delimiter">"</span><span class="content">canvas.js</span><span class="delimiter">"</span></span></span><span class="tag">&lt;/script&gt;</span>
<span class="line-numbers">16</span>  <span class="tag">&lt;body&gt;</span>
<span class="line-numbers">17</span>    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">'</span><span class="content">mycanvas</span><span class="delimiter">'</span></span><span class="tag">&gt;</span>width=500 height=300<span class="tag">&lt;/div&gt;</span>
<span class="line-numbers">18</span>  <span class="tag">&lt;/body&gt;</span>
<span class="line-numbers">19</span><span class="tag">&lt;/html&gt;</span></code></pre>
<p>

</p><pre><code class="language-javascript"><span class="line-numbers">10</span><span class="comment">// filename: canvas.js</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span>window.<span class="function">onload</span> = <span class="keyword">function</span>(){
<span class="line-numbers">13</span>    
<span class="line-numbers">14</span>    <span class="keyword">var</span> canv = document.getElementById(<span class="string"><span class="delimiter">"</span><span class="content">mycanvas</span><span class="delimiter">"</span></span>);
<span class="line-numbers">15</span>    <span class="keyword">var</span> context = canv.getContext(<span class="string"><span class="delimiter">"</span><span class="content">2d</span><span class="delimiter">"</span></span>);
<span class="line-numbers">16</span>    
<span class="line-numbers">17</span>}</code></pre>
<p>The HTMLElement canvas is not the programming platform, you need it simply to get the actual reference to the 2d platform. The <strong>mycanvas</strong> is just a DOM element, think of it as a viewport, you cannot paint 2d drawing primitives in that element. The <strong>context</strong> object is the 2d platform, use this to draw the drawing primitives.</p>
<h2 id="drawing-primitives-of-the-canvas">1.1 Drawing primitives of the Canvas</h2>
<p>
</p><pre><code class="language-javascript"><span class="line-numbers">10</span><span class="comment">// filename: canvas.js</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span>window.<span class="function">onload</span> = <span class="keyword">function</span>(){
<span class="line-numbers">13</span>
<span class="line-numbers">14</span>    <span class="keyword">var</span> canv = document.getElementById(<span class="string"><span class="delimiter">"</span><span class="content">mycanvas</span><span class="delimiter">"</span></span>);
<span class="line-numbers">15</span>    <span class="keyword">var</span> context = canv.getContext(<span class="string"><span class="delimiter">"</span><span class="content">2d</span><span class="delimiter">"</span></span>);
<span class="line-numbers">16</span>
<span class="line-numbers">17</span>    ctx.fillRect(<span class="integer">10</span>,<span class="integer">10</span>,<span class="integer">50</span>,<span class="integer">50</span>);
<span class="line-numbers">18</span>    ctx.strokeRect(<span class="integer">70</span>,<span class="integer">10</span>,<span class="integer">50</span>,<span class="integer">50</span>);
<span class="line-numbers">19</span>
<span class="line-numbers">20</span>    ctx.fillStyle = <span class="string"><span class="delimiter">"</span><span class="content">rgb(255,0,0)</span><span class="delimiter">"</span></span>;
<span class="line-numbers">21</span>    ctx.fillRect(<span class="integer">10</span>,<span class="integer">70</span>,<span class="integer">50</span>,<span class="integer">50</span>);
<span class="line-numbers">22</span>
<span class="line-numbers">23</span>    ctx.strokeStyle = <span class="string"><span class="delimiter">"</span><span class="content">#ababab</span><span class="delimiter">"</span></span>;
<span class="line-numbers">24</span>    ctx.strokeRect(<span class="integer">70</span>,<span class="integer">70</span>,<span class="integer">50</span>,<span class="integer">50</span>);
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>    <span class="comment">// DRAW LINES</span>
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>    <span class="comment">//The line is gray bec the curr strokeStyle</span>
<span class="line-numbers">29</span>    <span class="comment">//is #ababab</span>
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>    ctx.lineWidth = <span class="integer">1</span>;
<span class="line-numbers">32</span>    ctx.beginPath();
<span class="line-numbers">33</span>    ctx.moveTo(<span class="integer">130</span>, <span class="integer">130</span>);
<span class="line-numbers">34</span>    ctx.lineTo(<span class="integer">0</span>,<span class="integer">0</span>);
<span class="line-numbers">35</span>    ctx.closePath();
<span class="line-numbers">36</span>    ctx.stroke();
<span class="line-numbers">37</span>
<span class="line-numbers">38</span>    <span class="comment">// DRAW some text</span>
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    ctx.fillText(<span class="string"><span class="delimiter">"</span><span class="content">Hello</span><span class="delimiter">"</span></span>, <span class="integer">130</span>,<span class="integer">20</span>);
<span class="line-numbers">41</span>    ctx.font = <span class="string"><span class="delimiter">"</span><span class="content">40px serif</span><span class="delimiter">"</span></span>; <span class="comment">// you can add italics here, just like in css</span>
<span class="line-numbers">42</span>    ctx.fillText(<span class="string"><span class="delimiter">"</span><span class="content">Hello</span><span class="delimiter">"</span></span>, <span class="integer">130</span>,<span class="integer">60</span>);
<span class="line-numbers">43</span>    ctx.strokeText(<span class="string"><span class="delimiter">"</span><span class="content">Hello</span><span class="delimiter">"</span></span>, <span class="integer">130</span>,<span class="integer">100</span>);
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    <span class="comment">//DRAW CIRCLE</span>
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    ctx.fillStyle = <span class="string"><span class="delimiter">"</span><span class="content">green</span><span class="delimiter">"</span></span>;
<span class="line-numbers">48</span>    ctx.beginPath();
<span class="line-numbers">49</span>    ctx.arc(<span class="integer">60</span>,<span class="integer">180</span>,<span class="integer">50</span>,<span class="integer">0</span>,Math.PI * <span class="integer">2</span>, <span class="predefined-constant">false</span>);
<span class="line-numbers">50</span>    ctx.closePath();
<span class="line-numbers">51</span>    ctx.fill();
<span class="line-numbers">52</span>
<span class="line-numbers">53</span>    ctx.fillStyle = <span class="string"><span class="delimiter">"</span><span class="content">orange</span><span class="delimiter">"</span></span>;
<span class="line-numbers">54</span>    ctx.beginPath();
<span class="line-numbers">55</span>    ctx.arc(<span class="integer">60</span>,<span class="integer">280</span>,<span class="integer">50</span>,<span class="integer">0</span>,Math.PI, <span class="predefined-constant">false</span>);
<span class="line-numbers">56</span>    ctx.closePath();
<span class="line-numbers">57</span>    ctx.fill();
<span class="line-numbers">58</span>
<span class="line-numbers">59</span>}</code></pre>
<p>Lots of things you can do with the <strong>context (ctx)</strong> object, in fact, everything has to be drawn using the context object, you need to be very comfortable with it. The sample code above demonstrates some primitives of the context object (line, text and arc). There are more examples of Canvas basics at <a href="http://www.html5canvastutorials.com/tutorials/html5-canvas-tutorials-introduction/">HTML5 Canvas tutorials</a></p>
<h2 id="animation-using-a-timer">1.2 Animation using a timer</h2>
<p>Using barebones JavaScript should still be okay to use for the following examples, but there is no point delaying using the tools mentioned in <strong>Section 0</strong>, so we will use them.</p>
<h2 id="prep-steps">Prep Steps</h2>
<ol style="list-style-type: decimal">
<li>Download <a href="http://jquery.com/download/">jquery-1.8.x.js</a> and put it on same directory where the .coffee files and .haml files are</li>
<li>Get Haml (via rubygems), <strong>gem install haml</strong>
</li>
<li>Get coffeescript (via node package manager) <strong>npm -g install coffee-script</strong>
</li>
</ol><p>

</p><pre><code class="language-haml"><span class="line-numbers">10</span><span class="comment">/ filename: animate.haml</span>
<span class="line-numbers">11</span><span class="comment">/ compile: haml animate.haml animate.html</span>
<span class="line-numbers">12</span>
<span class="line-numbers">13</span><span class="comment">/ author: Ted Hagos</span>
<span class="line-numbers">14</span>
<span class="line-numbers">15</span><span class="doctype">!!!5</span>
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="tag">%html</span>
<span class="line-numbers">18</span>    <span class="tag">%head</span>
<span class="line-numbers">19</span>        <span class="tag">%title</span> Basic Time Animation
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">jquery-1.8.1.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">22</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt;  <span class="string"><span class="delimiter">"</span><span class="content">animate.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">23</span>
<span class="line-numbers">24</span>    <span class="tag">%body</span>
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>        <span class="tag">%canvas</span>{<span class="symbol">:id</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">mycanvas</span><span class="delimiter">"</span></span>, <span class="symbol">:width</span> =&gt; <span class="integer">500</span>, <span class="symbol">:height</span> =&gt; <span class="integer">300</span>}</code></pre>
<p>

</p><pre><code class="language-ruby"><span class="line-numbers">10</span><span class="comment">###</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span><span class="constant">BSD</span> <span class="constant">License</span>: <span class="constant">Copyright</span> (c) <span class="integer">2009</span>-<span class="integer">2012</span> <span class="constant">Ted</span> <span class="constant">Hagos</span>
<span class="line-numbers">13</span><span class="constant">All</span> rights reserved.
<span class="line-numbers">14</span>
<span class="line-numbers">15</span>License text: http<span class="symbol">:/</span>/thelogbox.com/source-docs/software-license.txt
<span class="line-numbers">16</span>    
<span class="line-numbers">17</span><span class="comment">###</span>
<span class="line-numbers">18</span>
<span class="line-numbers">19</span><span class="comment">###</span>
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>filename: animate.coffee
<span class="line-numbers">22</span>compile: coffee --compile animate.coffee 
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="constant">Desc</span>:
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>    <span class="constant">Basics</span> of a game loop
<span class="line-numbers">27</span>    <span class="integer">1</span>. Update positions of objects <span class="keyword">in</span> the canvas
<span class="line-numbers">28</span>    <span class="integer">2</span>. Clear the canvas
<span class="line-numbers">29</span>    <span class="integer">3</span>. Redraw eveything <span class="keyword">in</span> the canvas
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>    <span class="constant">This</span> one is pretty basic, it draws a square primitive
<span class="line-numbers">32</span>    everytime the canvas is redrawn. Experiment with the
<span class="line-numbers">33</span>    code by removing the hash sign (comment) before the
<span class="line-numbers">34</span>    line <span class="string"><span class="delimiter">"</span><span class="content">ctx.clearRect...</span><span class="delimiter">"</span></span> <span class="keyword">if</span> that line is commented out
<span class="line-numbers">35</span>    <span class="keyword">then</span> the screen will fill up with random sized squares
<span class="line-numbers">36</span>    overtime; <span class="keyword">if</span> the line is <span class="keyword">not</span> commented, a randomly sized
<span class="line-numbers">37</span>    square object will appear everytime the canvas is 
<span class="line-numbers">38</span>    redrawn
<span class="line-numbers">39</span>
<span class="line-numbers">40</span><span class="comment">###</span>
<span class="line-numbers">41</span>
<span class="line-numbers">42</span><span class="keyword">class</span> <span class="class">Paper</span>
<span class="line-numbers">43</span>
<span class="line-numbers">44</span>    c = <span class="integer">0</span>;
<span class="line-numbers">45</span>    ctx = <span class="integer">0</span>;
<span class="line-numbers">46</span>    counter = <span class="integer">0</span>;
<span class="line-numbers">47</span>
<span class="line-numbers">48</span>    constructor: (canvas,context) -&gt; 
<span class="line-numbers">49</span>        c = canvas
<span class="line-numbers">50</span>        ctx = context
<span class="line-numbers">51</span>        <span class="instance-variable">@draw</span>()
<span class="line-numbers">52</span>
<span class="line-numbers">53</span>    draw: =&gt;
<span class="line-numbers">54</span>        <span class="comment">#ctx.clearRect 0, 0, c.width, c.height</span>
<span class="line-numbers">55</span>        sq = <span class="constant">Square</span>.getSquare(c)
<span class="line-numbers">56</span>        ctx.strokeRect sq.x, sq.y, sq.width, sq.height
<span class="line-numbers">57</span>        setTimeout <span class="instance-variable">@draw</span>, <span class="integer">300</span>
<span class="line-numbers">58</span>
<span class="line-numbers">59</span>
<span class="line-numbers">60</span><span class="keyword">class</span> <span class="class">Square</span>
<span class="line-numbers">61</span>
<span class="line-numbers">62</span>    <span class="instance-variable">@getSquare</span>: (canvas) -&gt;
<span class="line-numbers">63</span>        x = <span class="constant">Math</span>.random() * canvas.width
<span class="line-numbers">64</span>        y = <span class="constant">Math</span>.random() * canvas.height
<span class="line-numbers">65</span>        width = <span class="constant">Math</span>.random() * <span class="integer">75</span>
<span class="line-numbers">66</span>        height = width
<span class="line-numbers">67</span>        {x, y, width, height}
<span class="line-numbers">68</span>
<span class="line-numbers">69</span><span class="error">$</span>(window).ready -&gt;
<span class="line-numbers">70</span>    canvas = <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#mycanvas</span><span class="delimiter">'</span></span>).get(<span class="integer">0</span>)
<span class="line-numbers">71</span>    context = canvas.getContext(<span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>)
<span class="line-numbers">72</span>
<span class="line-numbers">73</span>    paper = new Paper(canvas,context)</code></pre>
<p>

</p><h1 id="basic-movements">2. Basic movements</h1>
<h2 id="moving-in-a-straight-line">2.1 Moving in a straight line</h2>
<p>

</p><pre><code class="language-haml"><span class="line-numbers">10</span><span class="comment">/ filename: straight.haml</span>
<span class="line-numbers">11</span><span class="comment">/ compile: haml straight.haml straight.html</span>
<span class="line-numbers">12</span>
<span class="line-numbers">13</span><span class="comment">/ author: Ted Hagos</span>
<span class="line-numbers">14</span>
<span class="line-numbers">15</span><span class="doctype">!!!5</span>
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="tag">%html</span>
<span class="line-numbers">18</span>    <span class="tag">%head</span>
<span class="line-numbers">19</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">jquery-1.8.1.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">20</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">straight.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">21</span>
<span class="line-numbers">22</span>    <span class="tag">%body</span>
<span class="line-numbers">23</span>        <span class="tag">%canvas</span>{<span class="symbol">:id</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">mycanvas</span><span class="delimiter">"</span></span>, <span class="symbol">:width</span> =&gt; <span class="integer">500</span>, <span class="symbol">:height</span> =&gt; <span class="integer">300</span>, <span class="symbol">:style</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">border:1px solid gray</span><span class="delimiter">"</span></span>}</code></pre>
<p>
</p><pre><code class="language-ruby"><span class="line-numbers">10</span><span class="comment">###</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span><span class="constant">BSD</span> <span class="constant">License</span>: <span class="constant">Copyright</span> (c) <span class="integer">2009</span>-<span class="integer">2012</span> <span class="constant">Ted</span> <span class="constant">Hagos</span>
<span class="line-numbers">13</span><span class="constant">All</span> rights reserved.
<span class="line-numbers">14</span>
<span class="line-numbers">15</span>License text: http<span class="symbol">:/</span>/thelogbox.com/source-docs/software-license.txt
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="comment">###</span>
<span class="line-numbers">18</span>
<span class="line-numbers">19</span><span class="comment">####</span>
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>filename: straight.coffee
<span class="line-numbers">22</span>compile: coffee --compile straight.coffee
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="constant">Desc</span>: 
<span class="line-numbers">25</span>
<span class="line-numbers">26</span>    <span class="constant">Basic</span> horizontal movement of a context primitive. Each time the screen is
<span class="line-numbers">27</span>    redrawn (setTimeout <span class="instance-variable">@draw</span>, <span class="integer">30</span>), the y-coordinate of the box object is
<span class="line-numbers">28</span>    incremented
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    <span class="constant">This</span> code sample also demonstrates basic principle of collision detection,
<span class="line-numbers">31</span>    once the right edge of the box object (box.x + box.width) has touched the right
<span class="line-numbers">32</span>    edge of canvas ( &gt; c.width), we stop redrawing the canvas--sure the <span class="constant">JavaScript</span>
<span class="line-numbers">33</span>    timer goes chugging along still, you cannot stop it, but there is an branching
<span class="line-numbers">34</span>    of the logic inside the draw() function -- <span class="keyword">unless</span> stop_drawing is <span class="predefined-constant">true</span>, we 
<span class="line-numbers">35</span>    draw, <span class="keyword">if</span> stop_drawing is <span class="predefined-constant">true</span> already, we stop
<span class="line-numbers">36</span>
<span class="line-numbers">37</span><span class="comment">####</span>
<span class="line-numbers">38</span>
<span class="line-numbers">39</span>
<span class="line-numbers">40</span><span class="keyword">class</span> <span class="class">Stage</span>
<span class="line-numbers">41</span>
<span class="line-numbers">42</span>    c = ctx = box = null
<span class="line-numbers">43</span>    stop_drawing = <span class="predefined-constant">false</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>    constructor: (canvas, context) -&gt;
<span class="line-numbers">46</span>        c = canvas
<span class="line-numbers">47</span>        ctx = context
<span class="line-numbers">48</span>
<span class="line-numbers">49</span>        box = 
<span class="line-numbers">50</span>            x: <span class="integer">10</span>
<span class="line-numbers">51</span>            y: c.height <span class="regexp"><span class="delimiter">/</span><span class="content">2</span></span>
<span class="line-numbers">52</span><span class="regexp"><span class="content">            width: 40</span></span>
<span class="line-numbers">53</span><span class="regexp"><span class="content">            height: 40</span></span>
<span class="line-numbers">54</span><span class="regexp"><span class="content">            speed: 1</span></span>
<span class="line-numbers">55</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">56</span><span class="regexp"><span class="content">        @draw()</span></span>
<span class="line-numbers">57</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">58</span><span class="regexp"><span class="content">    draw: =&gt;</span></span>
<span class="line-numbers">59</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">60</span><span class="regexp"><span class="content">        unless stop_drawing</span></span>
<span class="line-numbers">61</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">62</span><span class="regexp"><span class="content">            ctx.clearRect 0, 0, c.width, c.height</span></span>
<span class="line-numbers">63</span><span class="regexp"><span class="content">            box.x += box.speed</span></span>
<span class="line-numbers">64</span><span class="regexp"><span class="content">            ctx.strokeRect box.x, box.y, box.width, box.height</span></span>
<span class="line-numbers">65</span><span class="regexp"><span class="content">            setTimeout @draw, 30</span></span>
<span class="line-numbers">66</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">67</span><span class="regexp"><span class="content">            if box.x + box.width is c.width then stop_drawing = true</span></span>
<span class="line-numbers">68</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">69</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">70</span><span class="regexp"><span class="content">$(window).ready -&gt;</span></span>
<span class="line-numbers">71</span><span class="regexp"><span class="content">    canvas = $('#mycanvas').get(0)</span></span>
<span class="line-numbers">72</span><span class="regexp"><span class="content">    context = canvas.getContext('2d')</span></span>
<span class="line-numbers">73</span><span class="regexp"><span class="content"></span></span>
<span class="line-numbers">74</span><span class="regexp"><span class="content">    stage = new Stage(canvas, context)</span></span></code></pre>
<p>

</p><h2 id="moving-in-a-uniform-circular-motion">2.2 Moving in a uniform circular motion</h2>
<p>There is no direct way to make a an object move along a circular path. The circular path has to be calculated, then set the <em>x,y</em> of the object to move along those coordinates</p>
<!--
<img src="/res/article-pix/notes-canvas/circlepath.png" width=500/>
-->
<iframe src="/source-docs/circlepath.html" width="100%" height="350px" frameborder="0">
</iframe>

<p>

</p><pre><code class="language-haml"><span class="line-numbers">10</span><span class="comment">/ filename: circlepath.haml</span>
<span class="line-numbers">11</span><span class="comment">/ compile: haml circlepath.haml circlepath.html</span>
<span class="line-numbers">12</span>
<span class="line-numbers">13</span><span class="comment">/ author: Ted Hagos</span>
<span class="line-numbers">14</span>
<span class="line-numbers">15</span><span class="doctype">!!!5</span>
<span class="line-numbers">16</span>
<span class="line-numbers">17</span><span class="tag">%html</span>
<span class="line-numbers">18</span>    <span class="tag">%head</span>
<span class="line-numbers">19</span>
<span class="line-numbers">20</span>    <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">jquery-1.8.1.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">21</span>    <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">circlepath.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">22</span>
<span class="line-numbers">23</span><span class="tag">%body</span>
<span class="line-numbers">24</span>    <span class="tag">%canvas</span>{<span class="symbol">:id</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">mycanvas</span><span class="delimiter">"</span></span>, <span class="symbol">:width</span> =&gt; <span class="integer">600</span>, <span class="symbol">:height</span> =&gt; <span class="integer">600</span>}
<span class="line-numbers">25</span>    <span class="constant">#watch</span></code></pre>
<p>

</p><pre><code class="language-ruby"><span class="line-numbers">10</span><span class="comment">###</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span><span class="constant">BSD</span> <span class="constant">License</span>: <span class="constant">Copyright</span> (c) <span class="integer">2009</span>-<span class="integer">2012</span> <span class="constant">Ted</span> <span class="constant">Hagos</span>
<span class="line-numbers">13</span><span class="constant">All</span> rights reserved.
<span class="line-numbers">14</span>
<span class="line-numbers">15</span>License text: http<span class="symbol">:/</span>/thelogbox.com/source-docs/software-license.txt
<span class="line-numbers">16</span>    
<span class="line-numbers">17</span><span class="comment">###</span>
<span class="line-numbers">18</span>
<span class="line-numbers">19</span><span class="comment">###</span>
<span class="line-numbers">20</span>
<span class="line-numbers">21</span>filename: circlepath.coffee
<span class="line-numbers">22</span>compile: coffee --compile circlepath.coffee
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="constant">Desc</span>:
<span class="line-numbers">25</span>    <span class="constant">Trace</span> the path of circle object (defined <span class="keyword">in</span> the constructor). That specific
<span class="line-numbers">26</span>    circle will <span class="keyword">not</span> be drawn, but instead its perimeter will be used as the 
<span class="line-numbers">27</span>    path as we draw (<span class="keyword">and</span> animate) a smaller circle (drawn using ctx.arc) 
<span class="line-numbers">28</span>    
<span class="line-numbers">29</span><span class="comment">###</span>
<span class="line-numbers">30</span>
<span class="line-numbers">31</span>
<span class="line-numbers">32</span><span class="keyword">class</span> <span class="class">Paper</span>
<span class="line-numbers">33</span>
<span class="line-numbers">34</span>    c = null
<span class="line-numbers">35</span>    ctx = null
<span class="line-numbers">36</span>
<span class="line-numbers">37</span>    ball = {}
<span class="line-numbers">38</span>    circle = {}
<span class="line-numbers">39</span>
<span class="line-numbers">40</span>    counter = <span class="integer">0</span>
<span class="line-numbers">41</span>
<span class="line-numbers">42</span>    constructor: (canvas, context) -&gt;
<span class="line-numbers">43</span>        c = canvas
<span class="line-numbers">44</span>        ctx = context
<span class="line-numbers">45</span>        <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#watch</span><span class="delimiter">'</span></span>).html <span class="string"><span class="delimiter">"</span><span class="content">On the CTOR</span><span class="delimiter">"</span></span>
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>        ball = 
<span class="line-numbers">48</span>            x:<span class="integer">0</span>
<span class="line-numbers">49</span>            y:<span class="integer">0</span>
<span class="line-numbers">50</span>            speed: <span class="float">0.1</span>
<span class="line-numbers">51</span>
<span class="line-numbers">52</span>        circle = 
<span class="line-numbers">53</span>            centerX: <span class="integer">250</span>
<span class="line-numbers">54</span>            centerY: <span class="integer">250</span>
<span class="line-numbers">55</span>            radius: <span class="integer">125</span>
<span class="line-numbers">56</span>            angle: <span class="integer">0</span>
<span class="line-numbers">57</span>
<span class="line-numbers">58</span>    draw: =&gt;
<span class="line-numbers">59</span>        
<span class="line-numbers">60</span>        counter += <span class="integer">1</span>
<span class="line-numbers">61</span>        
<span class="line-numbers">62</span>        ctx.clearRect <span class="integer">0</span>, <span class="integer">0</span>,  c.width, c.height
<span class="line-numbers">63</span>        ball.x = circle.centerX + <span class="constant">Math</span>.cos(circle.angle) * circle.radius
<span class="line-numbers">64</span>        ball.y = circle.centerY + <span class="constant">Math</span>.sin(circle.angle) * circle.radius
<span class="line-numbers">65</span>
<span class="line-numbers">66</span>        ctx.beginPath()
<span class="line-numbers">67</span>        ctx.arc ball.x, ball.y, <span class="integer">15</span>, <span class="integer">0</span>, <span class="constant">Math</span>.PI * <span class="integer">2</span>, <span class="predefined-constant">true</span>
<span class="line-numbers">68</span>        ctx.closePath()
<span class="line-numbers">69</span>        ctx.stroke()
<span class="line-numbers">70</span>
<span class="line-numbers">71</span>        circle.angle += ball.speed
<span class="line-numbers">72</span>        
<span class="line-numbers">73</span>        <span class="comment"># why is this not being called</span>
<span class="line-numbers">74</span>        
<span class="line-numbers">75</span>        <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#watch</span><span class="delimiter">'</span></span>).html <span class="string"><span class="delimiter">"</span><span class="content">Loop counter = </span><span class="inline"><span class="inline-delimiter">#{</span>counter<span class="inline-delimiter">}</span></span><span class="delimiter">"</span></span>
<span class="line-numbers">76</span>        setTimeout <span class="instance-variable">@draw</span>, <span class="integer">1000</span>
<span class="line-numbers">77</span>
<span class="line-numbers">78</span>
<span class="line-numbers">79</span><span class="error">$</span>(window).ready -&gt;
<span class="line-numbers">80</span>    canvas = <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#mycanvas</span><span class="delimiter">'</span></span>).get(<span class="integer">0</span>)
<span class="line-numbers">81</span>    context = canvas.getContext(<span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>)
<span class="line-numbers">82</span>
<span class="line-numbers">83</span>    paper = new Paper(canvas, context)
<span class="line-numbers">84</span>    paper.draw()</code></pre>
<p></p>

<h1 id="acceleration">3. Acceleration</h1>
<p>To immitate the motion of freely falling bodies, the downward movement along a straight line needs to incorporate acceleration. Our box need not only update its <em>y</em> position, it also needs to update its speed. Each time the canvas is redrawn, the speed increases <em>(box.speed += box.acceleration)</em></p>
<iframe src="/source-docs/acceleration.html" width="100%" height="550px" frameborder="0">
</iframe>

<pre><code class="language-haml"><span class="line-numbers">10</span><span class="comment">/ filename: acceleration.haml</span>
<span class="line-numbers">11</span><span class="comment">/ author: Ted Hagos</span>
<span class="line-numbers">12</span>
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="doctype">!!!5</span>
<span class="line-numbers">15</span>
<span class="line-numbers">16</span><span class="tag">%html</span>
<span class="line-numbers">17</span>    <span class="tag">%head</span>
<span class="line-numbers">18</span>        <span class="tag">%link</span>{<span class="symbol">:rel</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">stylesheet</span><span class="delimiter">"</span></span>, <span class="symbol">:href</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">stylesheet.css</span><span class="delimiter">"</span></span>}
<span class="line-numbers">19</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">http://code.jquery.com/jquery-1.8.2.min.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">20</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">jcanvas.min.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">21</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">acceleration.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">22</span>    <span class="tag">%body</span>
<span class="line-numbers">23</span>        <span class="tag">%canvas</span>{<span class="symbol">:id</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">mycanvas</span><span class="delimiter">'</span></span>, <span class="symbol">:width</span> =&gt; <span class="integer">500</span>, <span class="symbol">:height</span> =&gt; <span class="integer">500</span>, <span class="symbol">:style</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">border: 1px solid gray</span><span class="delimiter">"</span></span>}</code></pre>
<p></p>

<pre><code class="language-ruby"><span class="line-numbers">10</span><span class="comment">###</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span><span class="constant">BSD</span> <span class="constant">License</span>: <span class="constant">Copyright</span> (c) <span class="integer">2009</span>-<span class="integer">2012</span> <span class="constant">Ted</span> <span class="constant">Hagos</span>
<span class="line-numbers">13</span><span class="constant">All</span> rights reserved.
<span class="line-numbers">14</span>
<span class="line-numbers">15</span>License text: http<span class="symbol">:/</span>/thelogbox.com/source-docs/software-license.txt
<span class="line-numbers">16</span>    
<span class="line-numbers">17</span><span class="comment">###</span>
<span class="line-numbers">18</span>
<span class="line-numbers">19</span><span class="comment"># filename: accelerate.coffee</span>
<span class="line-numbers">20</span><span class="comment"># date: Sat Oct 27 15:33:22 PHT 2012 </span>
<span class="line-numbers">21</span>
<span class="line-numbers">22</span><span class="comment">###</span>
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="constant">To</span> accelerate, increase the speed of the box each time it is redrawn. 
<span class="line-numbers">25</span>
<span class="line-numbers">26</span><span class="comment">###</span>
<span class="line-numbers">27</span>
<span class="line-numbers">28</span>class <span class="constant">Stage</span> 
<span class="line-numbers">29</span>
<span class="line-numbers">30</span>    c = ctx = box = null
<span class="line-numbers">31</span>    stopAnimation = <span class="predefined-constant">false</span>
<span class="line-numbers">32</span>
<span class="line-numbers">33</span>    constructor: (canvas, context) -&gt;
<span class="line-numbers">34</span>        c = canvas
<span class="line-numbers">35</span>        ctx = context
<span class="line-numbers">36</span>
<span class="line-numbers">37</span>        box = 
<span class="line-numbers">38</span>            x: c.width/<span class="integer">2</span>
<span class="line-numbers">39</span>            y: <span class="integer">0</span>
<span class="line-numbers">40</span>            width: <span class="integer">10</span>
<span class="line-numbers">41</span>            height: <span class="integer">10</span>
<span class="line-numbers">42</span>            speed: <span class="integer">1</span> 
<span class="line-numbers">43</span>            acceleration: .<span class="error">98</span> 
<span class="line-numbers">44</span>
<span class="line-numbers">45</span>        <span class="instance-variable">@draw</span>()
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    draw: =&gt;
<span class="line-numbers">48</span>
<span class="line-numbers">49</span>        <span class="keyword">unless</span> box.y &gt; c.height
<span class="line-numbers">50</span>
<span class="line-numbers">51</span>            ctx.clearRect <span class="integer">0</span>,<span class="integer">0</span>, c.width, c.height
<span class="line-numbers">52</span>            box.y += box.speed
<span class="line-numbers">53</span>            box.speed += box.acceleration
<span class="line-numbers">54</span>
<span class="line-numbers">55</span>            ctx.strokeRect box.x, box.y, box.width, box.height
<span class="line-numbers">56</span>            setTimeout <span class="instance-variable">@draw</span>, <span class="integer">60</span>
<span class="line-numbers">57</span>
<span class="line-numbers">58</span>            <span class="keyword">if</span> box.y &gt; c.height
<span class="line-numbers">59</span>                box.speed = <span class="integer">1</span>
<span class="line-numbers">60</span>                box.y = <span class="integer">0</span>
<span class="line-numbers">61</span>                box.x = <span class="constant">Math</span>.random() * c.width
<span class="line-numbers">62</span>
<span class="line-numbers">63</span>
<span class="line-numbers">64</span><span class="error">$</span>(window).ready -&gt;
<span class="line-numbers">65</span>    canvas = <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#mycanvas</span><span class="delimiter">'</span></span>).get(<span class="integer">0</span>)
<span class="line-numbers">66</span>    context = canvas.getContext(<span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>)
<span class="line-numbers">67</span>
<span class="line-numbers">68</span>    stage = new Stage(canvas, context)</code></pre>
<h2 id="accelerate-then-stop">3.1 Accelerate, then stop</h2>
<p>Combination of techniques now. Make the box accelerate as it falls down, then detect if the bottom of the box <em>(box.y + box.height)</em> has already touched the canvas floor <em>(canvas.height)</em>. Make the box rest there.</p>
<p>Click <strong>fall</strong> button below to see the demo</p>
<iframe src="/source-docs/fall-stop.html" width="100%" height="550px" frameborder="0">
</iframe>

<pre><code class="language-haml"><span class="line-numbers">10</span><span class="comment">/ filename: fall-stop.haml</span>
<span class="line-numbers">11</span><span class="comment">/ author: Ted Hagos</span>
<span class="line-numbers">12</span>
<span class="line-numbers">13</span>
<span class="line-numbers">14</span><span class="doctype">!!!5</span>
<span class="line-numbers">15</span>
<span class="line-numbers">16</span><span class="tag">%html</span>
<span class="line-numbers">17</span>    <span class="tag">%head</span>
<span class="line-numbers">18</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">http://code.jquery.com/jquery-1.8.2.min.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">19</span>        <span class="tag">%script</span>{<span class="symbol">:src</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">fall-stop.js</span><span class="delimiter">"</span></span>}
<span class="line-numbers">20</span>    <span class="tag">%body</span>
<span class="line-numbers">21</span>        <span class="tag">%canvas</span>{<span class="symbol">:id</span> =&gt; <span class="string"><span class="delimiter">'</span><span class="content">mycanvas</span><span class="delimiter">'</span></span>, <span class="symbol">:width</span> =&gt; <span class="integer">500</span>, <span class="symbol">:height</span> =&gt; <span class="integer">500</span>, <span class="symbol">:style</span> =&gt; <span class="string"><span class="delimiter">"</span><span class="content">border: 1px solid gray</span><span class="delimiter">"</span></span>}</code></pre>
<p></p>

<pre><code class="language-ruby"><span class="line-numbers">10</span><span class="comment">###</span>
<span class="line-numbers">11</span>
<span class="line-numbers">12</span><span class="constant">BSD</span> <span class="constant">License</span>: <span class="constant">Copyright</span> (c) <span class="integer">2009</span>-<span class="integer">2012</span> <span class="constant">Ted</span> <span class="constant">Hagos</span>
<span class="line-numbers">13</span><span class="constant">All</span> rights reserved.
<span class="line-numbers">14</span>
<span class="line-numbers">15</span>License text: http<span class="symbol">:/</span>/thelogbox.com/source-docs/software-license.txt
<span class="line-numbers">16</span>    
<span class="line-numbers">17</span><span class="comment">###</span>
<span class="line-numbers">18</span>
<span class="line-numbers">19</span><span class="comment"># filename: fall-stop.coffee</span>
<span class="line-numbers">20</span><span class="comment"># date: Sat Oct 27 19:13:30 PHT 2012</span>
<span class="line-numbers">21</span>
<span class="line-numbers">22</span><span class="comment">###</span>
<span class="line-numbers">23</span>
<span class="line-numbers">24</span><span class="constant">Accelerate</span> downwards, apply collision detection <span class="keyword">when</span> the bottom of the
<span class="line-numbers">25</span>box hits the floor (height value of the canvas) to make the box rest on
<span class="line-numbers">26</span>the bottom
<span class="line-numbers">27</span>
<span class="line-numbers">28</span><span class="comment">###</span>
<span class="line-numbers">29</span>
<span class="line-numbers">30</span><span class="keyword">class</span> <span class="class">Box</span>
<span class="line-numbers">31</span>
<span class="line-numbers">32</span>    canvas = null
<span class="line-numbers">33</span>    box = null
<span class="line-numbers">34</span>
<span class="line-numbers">35</span>    constructor: (<span class="instance-variable">@canvas</span>) -&gt;
<span class="line-numbers">36</span>        
<span class="line-numbers">37</span>        <span class="instance-variable">@x</span> = <span class="constant">Math</span>.random() * canvas.width
<span class="line-numbers">38</span>        <span class="instance-variable">@y</span> = <span class="integer">0</span>
<span class="line-numbers">39</span>        <span class="instance-variable">@width</span> = <span class="integer">50</span>
<span class="line-numbers">40</span>        <span class="instance-variable">@height</span> = <span class="integer">50</span>
<span class="line-numbers">41</span>        <span class="instance-variable">@speed</span> = <span class="integer">1</span>
<span class="line-numbers">42</span>        <span class="instance-variable">@acceleration</span> = .<span class="error">98</span>
<span class="line-numbers">43</span>        <span class="instance-variable">@at_rest</span> = <span class="predefined-constant">false</span>
<span class="line-numbers">44</span>
<span class="line-numbers">45</span><span class="keyword">class</span> <span class="class">Stage</span> 
<span class="line-numbers">46</span>
<span class="line-numbers">47</span>    c = ctx = box = null
<span class="line-numbers">48</span>    stopAnimation = <span class="predefined-constant">false</span>
<span class="line-numbers">49</span>
<span class="line-numbers">50</span>    constructor: (canvas, context) -&gt;
<span class="line-numbers">51</span>        c = canvas
<span class="line-numbers">52</span>        ctx = context
<span class="line-numbers">53</span>        box = new Box(c)
<span class="line-numbers">54</span>
<span class="line-numbers">55</span>        <span class="instance-variable">@draw</span>()
<span class="line-numbers">56</span>
<span class="line-numbers">57</span>    draw: =&gt;
<span class="line-numbers">58</span>
<span class="line-numbers">59</span>        ctx.clearRect <span class="integer">0</span>, <span class="integer">0</span>, c.width, c.height
<span class="line-numbers">60</span>        
<span class="line-numbers">61</span>        <span class="comment"># to smooth out the collission</span>
<span class="line-numbers">62</span>        <span class="keyword">if</span> (box.y + box.height) &lt;= (c.height - box.height)
<span class="line-numbers">63</span>
<span class="line-numbers">64</span>            box.y += box.speed
<span class="line-numbers">65</span>            box.speed += box.acceleration
<span class="line-numbers">66</span>            ctx.strokeRect box.x, box.y, box.width, box.height
<span class="line-numbers">67</span>            foo = setTimeout <span class="instance-variable">@draw</span>, <span class="integer">60</span>
<span class="line-numbers">68</span>        <span class="keyword">else</span>
<span class="line-numbers">69</span>            ctx.strokeRect box.x, c.height - box.height, box.width, box.height
<span class="line-numbers">70</span>            <span class="comment">#clearTimeout foo</span>
<span class="line-numbers">71</span>        
<span class="line-numbers">72</span>        <span class="comment"># What happens to this box after it has fallen off the canvas? does it</span>
<span class="line-numbers">73</span>        <span class="comment"># still consume memory?</span>
<span class="line-numbers">74</span>
<span class="line-numbers">75</span>
<span class="line-numbers">76</span><span class="error">$</span>(window).ready -&gt;
<span class="line-numbers">77</span>    canvas = <span class="error">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">#mycanvas</span><span class="delimiter">'</span></span>).get(<span class="integer">0</span>)
<span class="line-numbers">78</span>    context = canvas.getContext(<span class="string"><span class="delimiter">'</span><span class="content">2d</span><span class="delimiter">'</span></span>)
<span class="line-numbers">79</span>    stage = new Stage(canvas, context)</code></pre>
<p></p>
	  </div>
		<p/>

    <A HREF="http://www.copyscape.com/plagiarism-check/" style="border:0"><IMG SRC="http://banners.copyscape.com/images/cs-wh-120x60.gif" ALT="Protected by Copyscape Web Plagiarism Check" TITLE="Protected by Copyscape Plagiarism Checker - Do not copy content from this page." WIDTH="120" HEIGHT="60" BORDER="0"></A>
    <!-- Start of StatCounter Code for Default Guide -->
	
  <script type="text/javascript">
  var sc_project=7827488; 
  var sc_invisible=1; 
  var sc_security="069357c9"; 
  </script>
  <script type="text/javascript"
      src="http://www.statcounter.com/counter/counter.js"></script>
  <noscript><div class="statcounter"><a title="customizable
      counter" href="http://statcounter.com/free-hit-counter/"
      target="_blank"><img class="statcounter"
      src="http://c.statcounter.com/7827488/0/069357c9/1/"
      alt="customizable counter"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
   
    <footer>
      &copy 2012-2013 theLogBox.com 

    </foter>

    </div>
  </body>

</html>
