<!DOCTYPE HTML>
<html>
  <head>
		<!--
<link href='http://fonts.googleapis.com/css?family=Neuton:300,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Tauri' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
-->

<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed/" />

<meta charset="utf-8">

<link href='http://fonts.googleapis.com/css?family=Rokkitt:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Titillium+Web:300' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Lekton' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>

<meta name="keywords" content="GEOLocation">
<meta name="author" content="Ted Hagos">
<meta name="description" content="Detailed steps on how to use the GPS and other Location API in Android. The article also has information on how to conver longitude and latitude to human readable addresses using GEO Coding" />
<title>Android , Location API | theLogBox </title>

<!-- 1. Moot style -->
<link rel="stylesheet" type="text/css" href="//cdn.moot.it/1/moot.css">
<!-- 2. jQuery library (v1.7+ required) -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<!-- 3. Moot application -->
<script src="//cdn.moot.it/1/moot.min.js"></script>
<!-- 4. Fine tuning -->
<!-- 4.1 Use a mobile optimized version of Moot: http://goo.gl/EOpFl -->
<meta name="viewport" content="width=device-width">
<!-- 4.2 Force latest IE rendering engine: http://goo.gl/tf4JH -->
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<style>

#sharebuttons { float: right; line-height: inherit; margin-right: 2em; padding-top: 5px; background: #F0F0F0;}

* {
  background: #fbfbfb;
}

p, li, .content-meta, body, p, br {
	font-family: 'Libre Baskerville','Helvetica','Tahoma';
	font-size: 16px;
	line-height: 1.7em;
  /* color: #414141; */
  color: #323232;
}

ol, ul { padding-left:20px; line-height:1.8em;}
li {margin-bottom: 10px;}

.tutorial-writeup {
  font-family:  'Titillium Web';
  text-align: left;
  width: 90%;
  font-size: 20px;
  margin: 0 auto;
  color: #555555;
  background: inherit;
  line-height: 1.5em;
  text-transform: uppercase;
}

.running-head {
  
  line-height:1.5em;
  font-size: 60px;
  text-align: center;
  color: #555555;
  position:relative;
  background: #F0F0F0;
}
.running-head a:link, .running-head a:visited {background: inherit;}

.vspacer {height:20px;}

#wrap {
	width:90%;
	margin: 0 auto;
	padding-top: 1em;
}

/* FOR THE article block */

.withtoc {
  float:left;
  width:72%;
}

.notoc {
  width:90%;
}

#articletitle {
	font-family: 'Rokkitt','Libre Baskerville', 'Helvetica', 'Arial', sans-serif;
	font-size: 42px;
	font-weight: normal;
  text-align: left;
  line-height: 1em;
  color: #0f0f0f;
  margin-top: 0px;
  padding-top: 0px;
}

.content-meta {
  font-family: 'Rokkitt';
	font-style: normal;
  margin-top: 5px;
	margin-bottom:20px;
  text-align: left;
}

.toc {
  text-align:left;
  width:24%;
  overflow: visible;
  padding-left: 15px;
  float: right;
}
.toc a:link, .toc a:visited {font-family: 'Titillium Web' , 'sans-serif';}
.toc li {color: #3a5d9f; list-style: none; line-height:1.6em; margin-bottom:6px;}
.toc ul {padding-left: 0;}

#blogtitle {margin-bottom:2em;}

#blogtitle a:link, #blogtitle a:visited {
	font-family: 'Tauri', 'helvetica', sans-serif;
	text-decoration: none;
  color: black;
}

#blogtitle a:hover {
	/* border-bottom: 1px solid #79a663;*/
  border-bottom: 1px solid #CACACA;
}

h1, h2, h3, h4, h5 {
	font-family: 'Libre Baskerville','Tauri', 'helvetica', sans-serif;
  letter-spacing: -1px;
	color: #0F0F0F;
  font-weight:normal;
}

h1 {font-size: 20px; letter-spacing: -1px;}
h2 {font-size: 18px; } 
h3 {font-size: 16px; }

#feature {
  min-height: 400px;
  padding-top:40px;
  padding-bottom:40px;
  border-bottom: 1px dashed #CACACA;
}

.feature-title {
  font-family: 'Rokkitt';
  font-size: 70px;
  color: #2F2F2F;
  text-align: center;
  padding-top:40px;
  padding-bottom:40px;
  line-height:1.3em;
  width: 80%;
  margin: 0 auto;  
}

.feature-article {
  font-family: 'Libre Baskerville','Helvetica','Tahoma';
  font-size: 17px;
  color: #555555;
  line-height: 1.5em; 
  width: 80%;
  margin: 0 auto; 
}

.feature-banner{
  /* color: #9a3c31; */
  color: #ADADAD;
  display:block;
  font-family:  'Titillium Web','Helvetica', 'Arial', 'Tahoma';
  font-size: 20px;
  /* background: #999999; 
  background: #800000; */
  background: #F0F0F0;
  padding-top: 3px;
  padding-bottom: 3px;
  text-align:center;
  line-height:1.5em;
}

#feature-button {
  text-align:center;
  margin: 20px;
}


#disqus_thread {
  clear: both;
  margin: 0 auto;
  margin-top: 50px;
}

body {
    
  font-family: 'Libre Baskerville','Arial';
    
  margin:0;
  padding:0;
  border:0;
  
}

article {
  padding-bottom: 20px;
}

#discussions {
  margin-top: 40px;
  margin-bottom: 40px;
  padding: 15px;
  border: 2px solid #DEDEDE;
}

footer {
  font-family: 'Titillium Web';
  color: #414141;
	font-style:normal;
  clear:both;
  padding-top: 15px;
  padding-bottom: 15px;
  line-height: 2em;
  text-align: center;
  background: #dedede;  
}

hr {
	border:0;
	color: #CACACA;
	background: #CACACA;
	height: 2px;
  margin-bottom:2em;
  margin-top:2em;
}

hr .section {
  background: #61781a;
  color: #61781a;
  border: 3px solid #DEDEDE;
}

strong {
  font-weight: normal;
  color: #000000;
}

code {
	font-family: 'Lekton';
}

pre {
	font-family: 'Lekton';
	font-size: 15px;
	padding: 1em;

  line-height: 1.3em;
  background: #FBFCF9; 
  /*
  border: 3px solid #F0F2E7;
  */
  border: 1px solid #DEDEDE;

	margin-bottom:2em;
  margin-top:2em;
  white-space: pre-wrap;
}

.codeblock {
  font-size: 16px;
  font-family: 'Lekton';
  color: #000000;
  padding:0px;
  margin: 0px;
  border: 0px;  
}

  pre.codeblock {
    padding: 1em;
    background: #e8ebef;
    color: #000000;
    line-height:130%;
}

#lst {
	font-family: 'Rokkitt';
  color: #000000;
	font-style:normal;
	font-size: 19px;
	margin-top:0px;
	padding-top:0px;
	padding-bottom:10px;
  text-align:center;
}

a:link, a:visited {color: #3a5d9f; text-decoration: none;}
a:hover {color: #3a5d9f;border-bottom: 1px solid #6083c5;}

.byline a:link, .byline a:visited {color: #cbcbcb;}
 .byline a:hover {border-bottom: 1px solid #DEDEDE;}

.byline { 
  font-family: 'Titillium Web'; font-size:12px;
  color: #cbcbcb;
  margin-bottom:0px;
  margin-top:0px;
  padding-top: 0px;
  padding-bottom: 0px;
}

footer a:link, footer a:visited {
  color: #000000; background: inherit;
  font-size: 18px;
  text-transform: uppercase;
}
 footer a:hover {border-bottom: 1px solid #000000;}

img {
  display:block;
  margin-left: auto;
  margin-right: auto;
  margin-top:2em;
  margin-bottom:2em;
  width: 100%;
}
  img.shadow {
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 85%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;

  } 
  img.small {
    width: 65%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;

  }
  img.default {
    width: inherit;
  }

aside {
  
  padding: 10px;
  border: 2px solid #CACACA;
  
}

/* Pygments stylesheets */

.hll { background-color: #ffffcc }
.c { color: #408080; font-style: italic } /* Comment */
.err { border: 1px solid #FF0000 } /* Error */
.k { color: #000000; font-weight: normal } /* Keyword */
.o { color: #666666 } /* Operator */
.cm { color: #408080; font-style: italic } /* Comment.Multiline */
.cp { color: #BC7A00 } /* Comment.Preproc */
.c1 { color: #408080; font-style: italic } /* Comment.Single */
.cs { color: #408080; font-style: italic } /* Comment.Special */
.gd { color: #A00000 } /* Generic.Deleted */
.ge { font-style: italic } /* Generic.Emph */
.gr { color: #FF0000 } /* Generic.Error */
.gh { color: #000080; font-weight: normal } /* Generic.Heading */
.gi { color: #00A000 } /* Generic.Inserted */
.go { color: #808080 } /* Generic.Output */
.gp { color: #000080; font-weight: normal } /* Generic.Prompt */
.gs { font-weight: normal } /* Generic.Strong */
.gu { color: #800080; font-weight: normal } /* Generic.Subheading */
.gt { color: #0040D0 } /* Generic.Traceback */
.kc { color: #e57300; font-weight: normal } /* Keyword.Constant */
.kd { color: #e57300; font-weight: normal } /* Keyword.Declaration */
.kn { color: #008000; font-weight: normal } /* Keyword.Namespace */
.kp { color: #008000 } /* Keyword.Pseudo */
.kr { color: #008000; font-weight: normal } /* Keyword.Reserved */
.kt { color: #B00040; } /* Keyword.Type */
.m { color: #666666; } /* Literal.Number */
.s { color: #0000e5; } /* Literal.String */
.na { color: #7D9029; } /* Name.Attribute */
.nb { color: #008000; } /* Name.Builtin */
.nc { color: #0000FF; font-weight: normal } /* Name.Class */
.no { color: #880000 } /* Name.Constant */
.nd { color: #AA22FF } /* Name.Decorator */
.ni { color: #999999; font-weight: normal } /* Name.Entity */
.ne { color: #D2413A; font-weight: normal } /* Name.Exception */
.nf { color: #0000FF } /* Name.Function */
.nl { color: #A0A000 } /* Name.Label */
.nn { color: #0000FF; font-weight: normal } /* Name.Namespace */
.nt { color: #008000; font-weight: normal } /* Name.Tag */
.nv { color: #19177C } /* Name.Variable */
.ow { color: #AA22FF; font-weight: normal } /* Operator.Word */
.w { color: #bbbbbb } /* Text.Whitespace */
.mf { color: #666666 } /* Literal.Number.Float */
.mh { color: #666666 } /* Literal.Number.Hex */
.mi { color: #666666 } /* Literal.Number.Integer */
.mo { color: #666666 } /* Literal.Number.Oct */
.sb { color: #0000e5 } /* Literal.String.Backtick */
.sc { color: #0000e5 } /* Literal.String.Char */
.sd { color: #0000e5; font-style: italic } /* Literal.String.Doc */
.s2 { color: #0000e5 } /* Literal.String.Double */
.se { color: #0000e5; font-weight: normal } /* Literal.String.Escape */
.sh { color: #0000e5 } /* Literal.String.Heredoc */
.si { color: #BB6688; font-weight: normal } /* Literal.String.Interpol */
.sx { color: #008000 } /* Literal.String.Other */
.sr { color: #BB6688 } /* Literal.String.Regex */
.s1 { color: #0000e5 } /* Literal.String.Single */
.ss { color: #19177C } /* Literal.String.Symbol */
.bp { color: #008000 } /* Name.Builtin.Pseudo */
.vc { color: #19177C } /* Name.Variable.Class */
.vg { color: #19177C } /* Name.Variable.Global */
.vi { color: #19177C } /* Name.Variable.Instance */
.il { color: #666666 } /* Literal.Number.Integer.Long */


.button {
  position: relative;
  display: inline-block;
  font-family:  'Titillium Web' ,Arial;
  font-size: 17px;
  display: inline;
/*  background: #800000; */
/*  background: #3a5d9f; */
  padding-top: 5px;
  padding-bottom:5px;
  padding-left:20px;
  padding-right:20px;
  text-align:center;
  border: 1px solid #CACACA;

  -moz-border-radius: 15px;
  -webkit-border-radius: 15px;
  
  text-transform:uppercase;
  text-decoration:none;
  color: #555555;
}

.button:link, .button:visited {color: #555555;}
.button:hover {background:#f1f1f1; border-bottom: 1px solid #CACACA; text-decoration: none;}

/* overrides extra padding on button elements 
   in Firefox */
.button::-moz-focus-inner {
  padding: 0;
  border: 0;
}



/*  GITHUB STYLE BUTTONS  FROM https://github.com/necolas/css3-github-buttons/blob/master/gh-buttons.css */

/* ------------------------------------------
 * CSS3 GITHUB BUTTONS (Nicolas Gallagher)
 * Licensed under Unlicense
 * http://github.com/necolas/css3-github-buttons
 * --------------------------------------- */

I HAVE DITCHED THE GITHUB BUTTONS IN FAVOR OF MY OWN CSS STYLED BUTTONS

/* =============================================================================
   Base Button
   ========================================================================== */


</style>  
  </head>
  <body>
    
    <div class="running-head">   
      <div class='tutorial-writeup'>        
      get updates for  <a href='http://eepurl.com/HcFof' target='_blank'> android programming tutorial </a>
      <!-- AddThis Button BEGIN -->
<div id="sharebuttons" class="addthis_toolbox addthis_default_style addthis_16x16_style">
<a class="addthis_button_google_plusone_share"></a>
<a class="addthis_button_facebook"></a>
<a class="addthis_button_twitter"></a>
<a class="addthis_button_email"></a>
</div>
<script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-527d287225536182"></script>
<!-- AddThis Button END --> 
      </div>
      
    </div>
    
    <div id="wrap">
        
     <article itemscope itemtype="http://schema.org/Article" class="withtoc">
     <header>          
      <div class='vspacer'></div>
      <div class='byline'>
  by: <a href='https://plus.google.com/+TedHagos' 'rel=author'>Ted Hagos</a>
</div>
      <div id="articletitle">Location API</div>
      <div class='vspacer'></div>
    </header>
    
		  <div id="post">
        <div itemprop='articleBody'>
		    <p>GEOLocation is a major fuctionality of a mobile device. There are plenty of practical uses for this nifty feature, apart from stamping where you were when you took that photo.</p>

<p>This feature makes it possible to know where you are during those situations when you are lost. A powerful enough app can tell you how far you are from an intended destination. These are just a few use cases for this feature. This is the reason why you need to know how to code with it.</p>

<h1>CURRENT LOCATION</h1>

<p>To get information on the current location, you need to do the following;</p>

<ol>
<li>Allow the use Location based service on the device. The user has to do this,  there is no way to enable the service programatically</li>
<li>Add permissions on the Manifest file</li>
<li>Use the LocationManager and other related classes on the android.location.* package</li>
</ol>


<hr />

<p>To allow the use of **Location Based Service on the device</p>

<ol>
<li>Go to settings</li>
<li>Go to Location and Security</li>
<li>Choose the appropriate settings (use wireless networks and/or use gps sattelites)</li>
</ol>


<p>Note that this needs to be performed by the user. This means you, as a developer, cannot stealthily perform these activities without the user permission. Your application needs to be explicit about this fact on the terms of service.</p>

<p>On the application side, you need to make some changes on *AndroidManifest.xml**. The changes you need to make are highlighted.</p>

<p><img src='../img/android-manifest-xml-gps-permission.png'/></p>

<h1>SAMPLE CODE</h1>

<div class="highlight"><pre><code class="java"><span class="cm">/*</span>

<span class="cm"> BSD License: Copyright (c) 2009-2012 Ted Hagos</span>
<span class="cm"> All rights reserved.</span>

<span class="cm"> License text: http://thelogbox.com/source-docs/software-license.txt</span>

<span class="cm">*/</span>

<span class="c1">// GPSView.java</span>

<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">thelogbox</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.LinearLayout</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View.OnClickListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.location.LocationManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.location.LocationListener</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.location.Location</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.location.Criteria</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.location.Geocoder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.location.Address</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.util.Log</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">GPSView</span> <span class="kd">extends</span> <span class="n">LinearLayout</span> <span class="kd">implements</span> <span class="n">OnClickListener</span><span class="o">,</span> <span class="n">LocationListener</span> <span class="o">{</span>

  <span class="n">Context</span> <span class="n">ctx</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">TextView</span> <span class="n">tv</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">String</span> <span class="n">TAG</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">LocationManager</span> <span class="n">locm</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">Location</span> <span class="n">loc</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">Geocoder</span> <span class="n">geo</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">List</span> <span class="n">address</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
  <span class="n">Address</span> <span class="n">addr</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">GPSView</span><span class="o">(</span><span class="n">Context</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">ctx</span><span class="o">);</span>
    <span class="n">tv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextView</span><span class="o">(</span><span class="n">ctx</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">ctx</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">;</span>
    <span class="n">TAG</span> <span class="o">=</span> <span class="n">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">();</span>

    <span class="n">setOnClickListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

    <span class="n">addView</span><span class="o">(</span><span class="n">tv</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClick</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>

    <span class="n">locm</span> <span class="o">=</span> <span class="o">(</span><span class="n">LocationManager</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getSystemService</span><span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">LOCATION_SERVICE</span><span class="o">);</span>
    <span class="n">loc</span> <span class="o">=</span> <span class="n">locm</span><span class="o">.</span><span class="na">getLastKnownLocation</span><span class="o">(</span><span class="n">locm</span><span class="o">.</span><span class="na">getBestProvider</span><span class="o">(</span><span class="k">new</span> <span class="n">Criteria</span><span class="o">(),</span><span class="kc">false</span><span class="o">));</span>
    <span class="n">geo</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Geocoder</span><span class="o">(</span><span class="n">ctx</span><span class="o">);</span>

    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;Got Location&quot;</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">tv</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">loc</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>

      <span class="kt">double</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="na">getLongitude</span><span class="o">();</span>
      <span class="kt">double</span> <span class="n">lat</span> <span class="o">=</span> <span class="n">loc</span><span class="o">.</span><span class="na">getLatitude</span><span class="o">();</span>
      <span class="k">try</span> <span class="o">{</span>
        <span class="n">address</span> <span class="o">=</span> <span class="n">geo</span><span class="o">.</span><span class="na">getFromLocation</span><span class="o">(</span><span class="n">lat</span><span class="o">,</span> <span class="n">lon</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">){</span>
        <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="n">addr</span> <span class="o">=</span> <span class="n">address</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>

      <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;got Lat and Lon and geocode&quot;</span><span class="o">);</span>

      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;LAT: &quot;</span><span class="o">;</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lat</span><span class="o">);</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot; | LON: &quot;</span><span class="o">;</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lon</span><span class="o">);</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot; | Country:  &quot;</span><span class="o">;</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="n">addr</span><span class="o">.</span><span class="na">getCountryName</span><span class="o">();</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span><span class="o">;</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="n">addr</span><span class="o">.</span><span class="na">getLocality</span><span class="o">();</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;, &quot;</span><span class="o">;</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="n">addr</span><span class="o">.</span><span class="na">getPostalCode</span><span class="o">();</span>
      <span class="n">msg</span> <span class="o">+=</span> <span class="s">&quot;| &quot;</span><span class="o">;</span>

      <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">addr</span><span class="o">.</span><span class="na">getMaxAddressLineIndex</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">msg</span> <span class="o">+=</span>  <span class="n">addr</span><span class="o">.</span><span class="na">getAddressLine</span><span class="o">(</span><span class="n">i</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; &quot;</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="n">tv</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">else</span> <span class="o">{</span>
      <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;No location&quot;</span><span class="o">);</span>
      <span class="n">tv</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;No Location&quot;</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onLocationChanged</span><span class="o">(</span><span class="n">Location</span> <span class="n">location</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;location changed&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStatusChanged</span><span class="o">(</span><span class="n">String</span> <span class="n">provider</span><span class="o">,</span> <span class="kt">int</span> <span class="n">status</span><span class="o">,</span> <span class="n">Bundle</span> <span class="n">bundle</span><span class="o">){</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="s">&quot;status changed&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onProviderEnabled</span><span class="o">(</span><span class="n">String</span> <span class="n">provider</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">provider</span> <span class="o">+</span> <span class="s">&quot; is enabled&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onProviderDisabled</span><span class="o">(</span><span class="n">String</span> <span class="n">provider</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Log</span><span class="o">.</span><span class="na">v</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">provider</span> <span class="o">+</span> <span class="s">&quot;is disabled&quot;</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleGPS</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
        <span class="n">setContentView</span><span class="o">(</span><span class="k">new</span> <span class="n">GPSView</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>


<h1>CODE WALK THROUGH</h1>

<ol>
<li><p>Get an instance of a LocationManager object, this can be done by calling the getSystemService() method of the Application Context</p></li>
<li><p>Call the getLastKnownLocation() method of the location manager object to get a Location object</p></li>
<li><p>From the location object, you can extract the longitude and latitude information, both these methods will return a double data type. At this point, you already have latitude and longitude info---you can stop here if that is all you need. If on the other hand, you need to get a human readable address, like Country, Locality etc. Use the Geocoder class and do a reverse geocoding---continue to <em>step 4</em></p></li>
<li><p>Create an instance of Geocoder</p></li>
<li><p>Call the getFromLocation(latitude, longitude, 1) of the geocoder object. The third parameter is the maximum number of results (addresses) that you wish to extract. In the example, we are only interested in 1 address, hence the third parameter is an an int value 1</p></li>
<li><p>getFromLocation() will return a java.util.List object, it will have only 1 element (because the third parameter that was passed instructed it to return only 1 value). Extract that element, it will be an android.location.Address object</p></li>
<li><p>Extract the members of the Address object to get the address lines, country name and locality. There are a lot more information on the address object, just look up the API if you need to extract more information</p></li>
</ol>


<p><strong>NOTE:</strong> The LocationListener interface is not necessary if you simply want to get the current GPS information on the device. You will need the the callbacks of the LocationListener if you want something to happen in response to the following;</p>

<ul>
<li>When the location has changed – onLocationChanged()</li>
<li>When there is change on status of the GPS provider – onStatusChanged()</li>
<li>When the GPS provider is disabled – onProviderDisabled()</li>
<li>When the GPS provider is enabled – onProviderEnabled()</li>
</ul>


        </div>
							
		  </div>
      
      <a class="moot"
        title=Location API
        href="https://moot.it/i/thelogbox/android:Location API">
        Comments 
      </a>  
      
		</article>
    
    <div class="toc">
      
      <ul>
      <li><a href="/android-programming-tutorial">Introduction</a></li>
      <li><a href="/android-how-much-java-do-you-need">How Much Java Do You Need</a></li>
      <li><a href="/android-background-information">Background Information</a></li>
      <li><a href="/android-install-sdk-windows">Dev Setup - Windows</a></li>
      <li><a href="/android-virtual-device">Virtual Device</a></li>
      <li><a href="/android-physical-device">Physical Device</a></li>      
      <li><a href="/android-getting-started">Getting Started</a></li>
      <li><a href="/android-activity">Activity and the UI</a></li>
      <li><a href="/android-linear-layout">Linear Layout</a></li>
      <li><a href="/android-layout-weights">Using Layout Weights</a></li>
      <li><a href="/android-scrolling-edittext-using-scrollview">Scrolling Text</a></li>
      <li><a href="/logcat">Debugging with LogCat</a></li>
      <li><a href="/android-logging-and-adb-logcat">LogCat and ADB</a></li>
      <li><a href="/android-event-handling-overview">Event Handling Overview</a></li>
      <li><a href="/android-event-handling-declarative">Declarative Event Handling</a></li>
      <li><a href="/android-event-handling-programmatic">Programmatic Event Handling</a></li>
      <li><a href="/android-event-handling-declarative">Declarative Event Handling</a></li>
      <li><a href="/android-database-programming-basics">Database Programming</a></li>
      <li><a href="/android-check-connectivity">Network Connectivity</a></li>
      <li><a href="/android-location-api">GEO Location</a></li>
      <li><a href="/simple-camera-code">Using the Camera</a></li>
      <li><a href="/android-java-recording-voice">Working with Audio</a></li>
      <li><a href="/signing-an-android-app">Signing your App</a></li>
  
      <li><a href="/blog-choosing-books-for-android">Bibliography</a></li>
      <li><a href="/blog-studying-and-practicing-android">Study Tips</a></li>
    </ul>
    
    <hr/>
    
    <ul>
      <li><a href="/developing-with-eclipse">Eclipse Development Environment</a></li>
      <li><a href="/android-create-project-eclipse">Creating a project in Eclipse</a></li>
      <li><a href="/developing-with-netbeans">Netbeans Development Environment</a></li>
      <li><a href="/android-studio">Android Studio</a></li>
      <li><a href="/android-project-workflow">Project Workflow</a></li>
    </ul>
    
    </div>    
    
    
    </div>  <!--  div wrap -->

		<footer>
<a href="/android-programming-tutorial">Android</a> &nbsp;
<a href="/java-introduction">Java</a> &nbsp;
<a href="/working-with-html5">HTML5</a> &nbsp;
<a href="/mobile-app-development-phonegap">PhoneGap</a> &nbsp;
<a href="/javascript-core-tutorial">JavaScript</a> &nbsp;


<br/>

Copyright&nbsp; &copy; 2004-2013 Ted Hagos

</footer>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38198657-1']);
  _gaq.push(['_setDomainName', 'thelogbox.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    <!-- Start of StatCounter Code for Default Guide -->
	
  <script type="text/javascript">
  var sc_project=7827488; 
  var sc_invisible=1; 
  var sc_security="069357c9"; 
  </script>
  <script type="text/javascript"
      src="http://www.statcounter.com/counter/counter.js"></script>
  <noscript><div class="statcounter"><a title="customizable
      counter" href="http://statcounter.com/free-hit-counter/"
      target="_blank"><img class="statcounter"
      src="http://c.statcounter.com/7827488/0/069357c9/1/"
      alt="customizable counter"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
  </body>
</html>
