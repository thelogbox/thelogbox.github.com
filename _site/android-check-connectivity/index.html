<!DOCTYPE HTML>
<html>
  <head>
		<!--
<link href='http://fonts.googleapis.com/css?family=Neuton:300,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Tauri' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>


<link href='http://fonts.googleapis.com/css?family=Rokkitt:400,700' rel='stylesheet' type='text/css'>
-->

<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed/" />

<meta charset="utf-8">

<link 
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<meta name="keywords" content="Connectivity ,Network">
<meta name="author" content="Ted Hagos">
<meta name="description" content="Detailed steps on how to check what kind of network connectivity an android device has. This code is useful to execute before you push out a significant amount of data using the network." />

<meta name="google-site-verification" content="Dg--5pO3MqOZk7aJ4jMia-MpnfcGdJaGIkYBJIDSkWU" />

<title>
  
    Check for Network Connectivity | theLogBox
  
</title>


		<style>

@import
url(http://fonts.googleapis.com/css?family=Roboto:300,400,500|Anonymous+Pro:400,700);

#sharebuttons { float: right; line-height: inherit; margin-right: 5em; padding-top: 5px;}

em {
  font-family: Georgia, Palatino;
}

body {
  font-size:16px;   
  font-family: 'Roboto','Lato';
  font-weight: 300;
  margin:0;
  padding:0;
  border:0;
  background: #fbfbfb;
  line-height: 1.4em;
}

#wrap, .toc, .promo, .feature-banner-text {
  width: 90%;
  margin-left: auto;
  margin-right: auto;
}

.feature-banner-text {
  /*color: #2c2c2c;*/
  color:#222;
  font-size:65px;
  font-weight:300;
  line-height:135%;
}

.toc, .promo {
  margin:0;padding:0;border:0;
}

.tutorial-writeup {
  text-align: left;
  width: 90%;
  font-size: 18px;
  margin: 0 auto;
  color: #555555;
  background: inherit;
  text-transform: uppercase;
}

.vspacer {height:20px;}

#wrap {
	margin: 0 auto;
}

#leanpubbook {
/*  background: #f5d2a4; */
  padding: 20px; 
  text-align:center;
/*  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  */
  border-top: 1px solid #2d2d2d;
  
}

/*
#leanpubbook, #leanpubbook.a:link, #leanpubbook.a:visited {
  font-family: 'Rokkitt';
  font-size:21px;
}
*/

/* FOR THE article block */

#articletitle {
	font-size: 28px;
	font-weight: bold;
  text-align: left;
  line-height: 1.4em;
  /*color: #292929; */
  margin-top: 0;
  padding-top: 0;
  text-rendering: optimizeLegibility;
}

.content-meta {
	font-style: normal;
  margin-top: 5px;
	margin-bottom:20px;
  text-align: left;
}

article, #archives {
  /*
  padding-left:5%;
  padding-right: 5%;
  padding-top: 50px;
  padding-bottom: 50px;
  
  column-count:2;
  -moz-column-count:2;
  -webkit-column-count:2 
  */
}

.toc {
  text-align:left;  
  margin-top: 30px;
  padding: 20px;
  column-count:3;
  -moz-column-count:3; /* Firefox */
  -webkit-column-count:3; /* Safari and Chrome */
  
  /*
  -webkit-border-radius: 10px;
  -moz-border-radius:10px;                                                    border-radius: 10; */
/*  background: #dcdcff; */
  border-top: 1px solid #2d2d2d;
}

/*

ol, ul {padding-left:20px;}
ol {counter-reset: mycounter; margin-left:0; padding-left:0; list-style-type:none;}
ol > li {position: relative; padding: 4px 2px;margin:0 0 1px 2em;}
ol > li:before {
  position: absolute;
  content: counter(mycounter, decimal-leading-zero) ".";
  counter-increment: mycounter;
  font-style: normal;
  left: -2em;
}

*/

/* .toc a:link, .toc a:visited {color: blue;}
.toc li {color: #3a5d9f; list-style: none; line-height:1.3em; margin-bottom:6px;}
.toc ul {padding-left: 0;} */


h1, h2, h3 {
  margin-left: 0px;
  padding-left: 0px;
  padding-top: 20px;
  text-rendering: optimizeLegibility;
  font-weight: 400;
}

strong {font-weight:500;}

h1 {font-size: 25px;}
h2 {font-size: 22px; } /* h2.section {padding-bottom:0px; border-bottom: 1px solid #CACACA;} */
h3 {font-size: 18px; }
h4 {margin-bottom: 0px; padding-bottom: 0px;}

#feature {
  min-height: 400px;
  padding-top:40px;
  padding-bottom:40px;
  border-bottom: 1px dashed #CACACA;
}

.feature-title {
  font-weight: bold;
  font-size: 1em;
  color: #2F2F2F;
  text-align: center;
  padding-top:40px;
  padding-bottom:40px;
  line-height:1.3em;
  width: 80%;
  margin: 0 auto;  
}

.feature-article {
  font-size: 17px;
  color: #555555;
  line-height: 1.5em; 
  width: 80%;
  margin: 0 auto; 
}

.feature-banner{
  /* color: #adadad; */
  display:block;
  font-size: 20px;
/*  background: #F0F0F0; */
  padding-top: 3px;
  padding-bottom: 3px;
  line-height:1.5em;
  margin-bottom:40px;
  margin-top:40px;
  text-align: left;
}

#feature-button {
  text-align:center;
  margin: 20px;
}


#disqus_thread {
  clear: both;
  margin: 0 auto;
  margin-top: 50px;
}

#discussions {
  margin-top: 40px;
  margin-bottom: 40px;
  padding: 15px;
  border: 2px solid #DEDEDE;
}

hr {
  border:0;
  color: #DEDEDE;
  background: #DEDEDE;
  height: 1px;
  margin-bottom:2em;
  margin-top:2em;
}

hr .section {
  background: #61781a;
  color: #61781a;
  border: 1px solid #DEDEDE;
}

strong {
  font-weight: 700;
  color: #222;
}

pre {
  font-size: 11px;
  padding: 10px;
  font-weight: normal;
  /*
  border-bottom: 2px solid #F0F2E7;
  border-top: 2px solid #F0F2E7;
  */
  
  margin-bottom:2em;
  margin-top:2em;
  white-space: pre-wrap;
  
/*  background: #dcdcff; */
/*  
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  border: 2px solid #2d2d2d;
*/
  
  border: 1px solid #ccc;
  box-shadow: 2px 2px 2px #eee; 
  margin 1.2em;
  white-space:pre-wrap;
  overflow:auto;
}


code {font-size: 1.2em; font-family: 'Anonymous Pro';}
pre.code {
  font-weight:400;
  overflow: visible;
  padding-top: 1.2em;
}


.codeblock, p.code {
  font-weight:700;
  font-size: .9em;
  font-family: 'Anonymous Pro';
  color: #000000;
  padding:0px;
  margin: 0px;
  border: 0px;  
}

  pre.codeblock {
    padding: 1.1em;
    font-weight:700;
    /*background: #e8ebef;*/
    /*background: #dcdcFF; */ 
    color: #000000;
    /*line-height:120%; */
}

#lst {
  color: #B30000;
	font-style:normal;
	font-size: 15px;
	margin-top:0px;
  margin-bottom: 15px;
	padding-top:0px;
	padding-bottom:10px;
  text-align:center;
}

/* color of a:link previously #3a5d9f */

a:link, a:visited {/*color: #1d1de2;*/ color:royalblue; text-decoration: none; font-weight:300;}
a:hover {color: blue; text-decoration:underline;}

#postmeta {
  padding-top:0;
  padding-bottom:0; 
  font-weight:normal; 
  font-size: 14px;
  line-height:100%;
  margin-left: 10px;
}
#postmeta a:link, #postmeta a:visited {color: #000;}

footer {
  color: #414141;
	font-style:normal;
  clear:both;
  padding-top: 15px;
  padding-bottom: 15px;
  line-height: 2em;
  text-align: center;
  /*border-top: 1px solid #dedede;*/
}

img {
  display:block;
  margin-left: auto;
  margin-right: auto;
  margin-top:2em;
  margin-bottom:2em;
  width: 75%;
}
  img.shadow {
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 85%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;

  } 
  img.small {
    width: 65%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;

  }
  img.default {
    width: inherit;
    margin: 8px auto;
  }
  img.thumbnail {
    float:left;
    width: 20%; 
    margin-top: 10px;
    margin-right: 15px;
    margin-bottom: 10px;
    margin-left: 0px;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;
  }

aside {
  padding: 10px;
  margin-bottom: 15px;
  margin-top: 15px;
  border: 2px solid #CACACA;
}

.button {
  position: relative;
  display: inline-block;
  display: inline;
/*  background: #800000; */
/*  background: #3a5d9f; */
  padding-top: 5px;
  padding-bottom:5px;
  padding-left:20px;
  padding-right:20px;
  text-align:center;
  border: 1px solid #CACACA;

  -moz-border-radius: 15px;
  -webkit-border-radius: 15px;
  
  text-transform:uppercase;
  text-decoration:none;
  color: #555555;
}

.button:link, .button:visited {color: #555555;}
.button:hover {background:#f1f1f1; border-bottom: 1px solid #CACACA; text-decoration: none;}

/* overrides extra padding on button elements 
   in Firefox */
.button::-moz-focus-inner {
  padding: 0;
  border: 0;
}

#training-sidebar {
  float:right;
  margin-right: 30px;
  padding: 20px;
  border: 1px solid #CACACA;
  width: 30%;
  margin-left: 20px;
}

#training-sidebar h4 {
  color: #CC0000;
  font-size: 16px;
  font-weight: bold;
  margin-top: 5px;
  margin-bottom: 5px;
  padding-bottom: 5px;
  text-rendering: optimizeLegibility;
}

iframe {display:block;}


@media (min-width: 768px) {
  .feature-banner-text {font-size: 2.3em;}
}

@media (min-width: 960px) {
  body {
    font-size: .9em;
  }
  article, #archives { 
    column-count:2;
    -moz-column-count:2;
    -webkit-column-count:2 
  }

  code {font-size: 1.3em;}
  .feature-banner-text {font-size: 3em;}
  
  h1 {font-size: 2em;}
  h2 {font-size: 1.7em; }
  h3 {font-size: 1.2em; }
  h4 {margin-bottom: 0px; padding-bottom: 0px; font-weight:normal;}
    
}

</style>
  
  </head>
  <body>

    <div class='feature-banner'>
      <div class='feature-banner-text'>
        Check for Network Connectivity
        <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

<div id="postmeta">
  <!--
  <div style="text-decoration: overline; color: inherited">
  file: #Connectivity  #Network
  </div> 
  last updated:  <br/>
  -->

  By <a href='https://plus.google.com/+TedHagos?rel=author'>Ted Hagos</a> <br/>
<!--  December 16, 2012 <p/> -->
    
<!--
  <div class="g-follow" data-annotation="none" data-height="20" data-href="//plus.google.com/107317535953221277825" data-rel="author"></div>
  -->
</div>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

      </div>
    </div>

    <div id="wrap">
        
     <article itemscope itemtype="http://schema.org/Article" >
     <header>          
      <!--<div id="articletitle">Check for Network Connectivity</div> -->
    </header>
    
		  <div id="post">
        <div itemprop='articleBody'>
		    <p>Finding out the state of connectivity of an Android device is a fundamental technique. You need to know which type of connectivity the device has before you perform any activity that requires data transfer. You may encounter situations where you want to send data e.g. picture files,  maps or any other sizeable data through the wire, only when WIFI connectivity is up.</p>

<p>There are two classes in android.net package that can be used to determine connectivity; The ConnectivityManager and NetworkInfo</p>

<ol>
  <li>Use a ConnectivityManager object, get the System Service information — getSystemService(Context.CONNECTIVITY_SERVICE)</li>
  <li>Get the network information from the ConnectivityManager object, the getActiveNetworkInfo() returns an android.net.NetworkInfo object, this contains some detailed information about connectivity</li>
  <li>Call the getType() method against the NetworkInfo object, it will return an int value, check it against the CONSTANTS defined in the ConnectivityManager class</li>
</ol>

<p>Before you compile and install on the device, you need to set additional permissions on the Manifest file</p>

<h3 id="the-manifest-file">The Manifest file</h3>

<p><img src="../img/android-manifest-conntest.png" /></p>

<h3 id="code">Code</h3>

<div>
  <pre><code class="java">/*

BSD License: Copyright (c) 2009-2012 Ted Hagos
All rights reserved.

License text: http://thelogbox.com/source-docs/software-license.txt

filename: ConnTest.java

*/

package com.thelogbox;

import android.app.Activity;
import android.os.Bundle;
import android.content.Context;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.view.View;
import android.view.View.OnClickListener;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;

class ViewConnnTest extends LinearLayout implements OnClickListener {

  Context context = null;
  TextView tv = null;
  ConnectivityManager connman = null;
  NetworkInfo netinfo = null;

  public ViewConnnTest(Context context) {

    super(context);
    this.context = context;
    tv = new TextView(context);
    addView(tv);
    setOnClickListener(this);

  }

  public void onClick(View v){

    StringBuilder sb = new StringBuilder();
    connman = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
    netinfo = connman.getActiveNetworkInfo(); 

    switch(netinfo.getType()) {
      case ConnectivityManager.TYPE_MOBILE:
        sb.append(&quot;\nMobile data OK.&quot;);
        break;
      case ConnectivityManager.TYPE_WIFI:
        sb.append(&quot;\nWIFI OK.&quot;);
        break;
      case ConnectivityManager.TYPE_WIMAX:
        sb.append(&quot;\nWIMAX OK.&quot;);
        break;
      case ConnectivityManager.TYPE_ETHERNET:
        sb.append(&quot;\nOn Ethernet.&quot;);
        break;
      case ConnectivityManager.TYPE_BLUETOOTH:
        sb.append(&quot;\nBluetooth OK.&quot;);
        break;
      default:
        sb.append(&quot;\nNot connected. Not OK.&quot;);
    }
    sb.append(&quot;\nState= &quot;); 
    sb.append(netinfo.getState().toString());

    tv.setText(sb.toString());
  }
}

public class ConnTest extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new ViewConnnTest(this));
    }
}</code></pre>
</div>

        </div>					
		  </div>
      
      <div id="leanpubbook">        
                
        <img src="http://titlepages.leanpub.com/minimumandroidprogramming/small" class="thumbnail"/> 
      
        <div class="vspacer"></div>
        Ted is writing an android book for beginners. It's a work in progress.
        <a href="https://leanpub.com/minimumandroidprogramming/read" target="_blank">You  
        can read it (free) online</a> over at LeanPub.
        
      </div>
		</article>
    
    
    <div class="toc">
      <!--
      
      <iframe width="150" height="300"src="https://leanpub.com/minimumandroidprogramming/embed" frameborder="0" allowtransparency="true" align="right" marginheight="15"></iframe>  
      -->
      
      <ul>
      <li><a href="/android-programming-tutorial">Introduction</a></li>
      <li><a href="/android-how-much-java-do-you-need">Theoretical Minimum</a></li>
      <li><a href="/android-install-sdk-windows">Dev Setup - Windows</a></li>
      <li><a href="/android-virtual-device">Virtual Device</a></li>
      <li><a href="/android-physical-device">Physical Device</a></li>      
      <li><a href="/android-getting-started">Getting Started</a></li>
      <li><a href="/android-activity">Activity and the UI</a></li>
      <li><a href="/android-linear-layout">Linear Layout</a></li>
      <li><a href="/android-layout-weights">Layout Weights</a></li>
      <li><a href="/android-scrolling-edittext-using-scrollview">Scrolling Text</a></li>
      <li><a href="/logcat">Debugging with LogCat</a></li>
      <li><a href="/android-logging-and-adb-logcat">LogCat and ADB</a></li>
      <li><a href="/android-event-handling-overview">Event Handling Overview</a></li>
      <li><a href="/android-event-handling-declarative">Declarative Event Handling</a></li>
      <li><a href="/android-event-handling-programmatic">Programmatic Event Handling</a></li>
      <li><a href="/android-event-handling-declarative">Declarative Event Handling</a></li>
      <li><a href="/android-database-programming-basics">Database Programming</a></li>
      <li><a href="/android-check-connectivity">Network Connectivity</a></li>
      <li><a href="/android-location-api">GEO Location</a></li>
      <li><a href="/simple-camera-code">Camera</a></li>
      <li><a href="/android-java-recording-voice">Audio</a></li>
      <li><a href="/signing-an-android-app">Signing your App</a></li>
  
      <li><a href="/blog-choosing-books-for-android">Bibliography</a></li>
      <li><a href="/blog-studying-and-practicing-android">Study Tips</a></li>
    </ul>
      
    <ul>
      <li><a href="/developing-with-eclipse">Eclipse Development Environment</a></li>
      <li><a href="/android-create-project-eclipse">Creating a project in Eclipse</a></li>
      <li><a href="/developing-with-netbeans">Netbeans Development Environment</a></li>
      <li><a href="/android-studio">Android Studio</a></li>
      <li><a href="/android-project-workflow">Project Workflow</a></li>
      <li><a href="/cannot-find-buildxml">Cannot find build.xml</a></li>
    </ul>
    
    </div>    
    
    </div>  <!--  div wrap -->
    <footer>
<!--
<a href="/android-programming-tutorial">Android</a> &nbsp;
<a href="/java-introduction">Java</a> &nbsp;
<a href="/working-with-html5">HTML5</a> &nbsp;
<a href="/mobile-app-development-phonegap">PhoneGap</a> &nbsp;
<a href="/javascript-core-tutorial">JavaScript</a> &nbsp;
-->

<div style="text-align:center;">
  <a href="/index.html">Copyright&nbsp; &copy; 2004-2013 Ted Hagos</a>
</div>
</footer>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38198657-1']);
  _gaq.push(['_setDomainName', 'thelogbox.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    <!-- Start of StatCounter Code for Default Guide -->
	
  <script type="text/javascript">
  var sc_project=7827488; 
  var sc_invisible=1; 
  var sc_security="069357c9"; 
  </script>
  <script type="text/javascript"
      src="http://www.statcounter.com/counter/counter.js"></script>
  <noscript><div class="statcounter"><a title="customizable
      counter" href="http://statcounter.com/free-hit-counter/"
      target="_blank"><img class="statcounter"
      src="http://c.statcounter.com/7827488/0/069357c9/1/"
      alt="customizable counter"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
  </body>
</html>
