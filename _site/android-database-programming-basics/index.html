<!DOCTYPE HTML>
<html>
  <head>
		<!--
<link href='http://fonts.googleapis.com/css?family=Neuton:300,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Serif:400,400italic' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Tauri' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Libre+Baskerville:400,700,400italic' rel='stylesheet' type='text/css'>


<link href='http://fonts.googleapis.com/css?family=Rokkitt:400,700' rel='stylesheet' type='text/css'>


<script src="//use.typekit.net/mvn1usv.js"></script>
<script>try{Typekit.load();}catch(e){}</script>

-->

<script src="//use.typekit.net/mvn1usv.js"></script>
<script>try{Typekit.load();}catch(e){}</script>



<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed/" />

<meta charset="utf-8">

<link 
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
<meta name="keywords" content="Database ,Introduction">
<meta name="author" content="Ted Hagos">
<meta name="description" content="Understand the basics of how to use SQLite in your mobile apps" />

<meta name="google-site-verification" content="Dg--5pO3MqOZk7aJ4jMia-MpnfcGdJaGIkYBJIDSkWU" />

<title>
  
    Database Programming | theLogBox
  
</title>


		<style>


@import url(http://fonts.googleapis.com/css?family=PT+Sans:700|Open+Sans+Condensed:300,700);

#sharebuttons { float: right; line-height: inherit; margin-right: 5em; padding-top: 5px;}

em {
  font-style:normal;
  font-weight: 400;
  color: brown;
}

body {
  font-size:17px;   
  font-family: 'nimbus-sans','Lato';
  font-weight: 300;
  margin:0;
  padding:0;
  border:0;
  color: #535353;
  /*color: #2d2d2d;*/
  background: #f6f6f6;
  line-height: 1.4em;
}

#wrap, .toc, .promo {
  width: 90%;
  margin-left: auto;
  margin-right: auto;
}

.feature-banner-text {
  color:#222;
  font-family: 'PT Sans';
  font-size:50px;
  font-weight:700;
  line-height:135%;
  letter-spacing: -1.3px;
}

.toc, .promo {
  margin:0;padding:0;border:0;
}

.tutorial-writeup {
  text-align: left;
  width: 90%;
  font-size: 18px;
  margin: 0 auto;
  color: #555555;
  background: inherit;
  text-transform: uppercase;
}

.vspacer {height:20px;}

#wrap {
	margin: 0 auto;
}

/*
#leanpubbook {
  background: #d6d6d6;
  padding: 20px;
/ text-align:center;
  margin-top: 20px;
  position: relative; 
  height: 200px; 
}
*/

/*
#leanpubbook, #leanpubbook.a:link, #leanpubbook.a:visited {
  font-family: 'Rokkitt';
  font-size:21px;
}
*/

/* FOR THE article block */

#articletitle {
	font-size: 28px;
	font-weight: 400;
  text-align: left;
  line-height: 1.4em;
  /*color: #292929; */
  margin-top: 0;
  padding-top: 0;
  text-rendering: optimizeLegibility;
}

.content-meta {
	font-style: normal;
  margin-top: 5px;
	margin-bottom:20px;
  text-align: left;
}

article, #archives {
  /*
  padding-left:5%;
  padding-right: 5%;
  padding-top: 50px;
  padding-bottom: 50px;
  
  column-count:2;
  -moz-column-count:2;
  -webkit-column-count:2 
  */
}

.toc {
  text-align:left;  
  margin-top: 30px;
  padding: 20px;
  column-count:3;
  -moz-column-count:3; /* Firefox */
  -webkit-column-count:3; /* Safari and Chrome */
  /*background:#e9e9e9;*/
}

.toc, .toc a:link {
  font-family: 'Open Sans Condensed';
}

.toc b, .toc strong {font-weight: 700;}

/*

ol, ul {padding-left:20px;}
ol {counter-reset: mycounter; margin-left:0; padding-left:0; list-style-type:none;}
ol > li {position: relative; padding: 4px 2px;margin:0 0 1px 2em;}
ol > li:before {
  position: absolute;
  content: counter(mycounter, decimal-leading-zero) ".";
  counter-increment: mycounter;
  font-style: normal;
  left: -2em;
}

*/

/* .toc a:link, .toc a:visited {color: blue;}
.toc li {color: #3a5d9f; list-style: none; line-height:1.3em; margin-bottom:6px;}
.toc ul {padding-left: 0;} */


h1, h2, h3 {
  font-family: 'PT Sans';
  font-weight: 700;
  color: #6d6d6d;
  margin-left: 0px;
  padding-left: 0px;
  padding-top: 20px;
  text-rendering: optimizeLegibility;
}

strong, b {font-weight:400;}

h1 {font-size: 25px;}
h2 {font-size: 22px; } /* h2.section {padding-bottom:0px; border-bottom: 1px solid #CACACA;} */
h3 {font-size: 18px; }
h4 {margin-bottom: 0px; padding-bottom: 0px;}



#feature {
  min-height: 400px;
  padding-top:40px;
  padding-bottom:40px;
  border-bottom: 1px dashed #CACACA;
}

.feature-title {
  font-weight: 400;
  font-size: 1em;
  color: #2F2F2F;
  text-align: center;
  padding-top:40px;
  padding-bottom:40px;
  line-height:1.3em;
  width: 80%;
  margin: 0 auto;  
}

.feature-article {
  font-size: 17px;
  color: #555555;
  line-height: 1.5em; 
  width: 80%;
  margin: 0 auto; 
}

.feature-banner{
  display:block;
  font-size: 20px;
  padding-top: 3px;
  padding-bottom: 3px;
  line-height:1.5em;
  margin-bottom:40px;
  margin-top:40px;
  text-align: left;
}

#feature-button {
  text-align:center;
  margin: 20px;
}


#disqus_thread {
  clear: both;
  margin: 0 auto;
  margin-top: 50px;
}

#discussions {
  margin-top: 40px;
  margin-bottom: 40px;
  padding: 15px;
  border: 2px solid #DEDEDE;
}

hr {
  border:0;
  color: #DEDEDE;
  background: #DEDEDE;
  height: 1px;
  margin-bottom:2em;
  margin-top:2em;
}

hr .section {
  background: #61781a;
  color: #61781a;
  border: 1px solid #DEDEDE;
}

pre {
  font-size: 11px;
  padding: 10px;
  font-weight: normal;
  /*
  border-bottom: 2px solid #F0F2E7;
  border-top: 2px solid #F0F2E7;
  */
  
  margin-bottom:2em;
  margin-top:2em;
  white-space: pre-wrap;
  
/*  background: #dcdcff; */
/*  
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
  border: 2px solid #2d2d2d;
*/
  
  border: 1px solid #ccc;
  box-shadow: 2px 2px 2px #eee; 
  margin 1.2em;
  white-space:pre-wrap;
  overflow:auto;
}


code {font-size: 1.2em; font-family: 'anonymous-pro'; color: #191919;}
pre.code {
  font-weight:400;
  overflow: visible;
  padding-top: 1.2em;
}


.codeblock, p.code {
  font-weight:700;
  font-size: .9em;
  font-family: 'Anonymous Pro';
  color: #000000;
  padding:0px;
  margin: 0px;
  border: 0px;  
}

  pre.codeblock {
    padding: 1.1em;
    font-weight:700;
    /*background: #e8ebef;*/
    /*background: #dcdcFF; */ 
    color: #000000;
    /*line-height:120%; */
}

#lst {
  color: #B30000;
	font-style:normal;
	font-size: 15px;
	margin-top:0px;
  margin-bottom: 15px;
	padding-top:0px;
	padding-bottom:10px;
  text-align:center;
}

/* color of a:link previously #3a5d9f */

a:link, a:visited {/*color: #1d1de2;*/ color:royalblue; text-decoration: none; font-weight:300;}
a:hover {color: blue; text-decoration:underline;}

#postmeta {
  padding-top:0;
  padding-bottom:0; 
  font-weight:normal; 
  font-size: 14px;
  line-height:100%;
  margin-left: 10px;
  letter-spacing: normal;
  display: none;
}
#postmeta a:link, #postmeta a:visited {color: #000;}

footer {
  color: #414141;
	font-style:normal;
  clear:both;
  padding-top: 15px;
  padding-bottom: 15px;
  line-height: 2em;
  text-align: center;
  /*border-top: 1px solid #dedede;*/
}

img {
  display:block;
  margin-left: auto;
  margin-right: auto;
  margin-top:2em;
  margin-bottom:2em;
  width: 75%;
}
  img.shadow {
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 85%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;

  } 
  img.small {
    width: 65%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;

  }
  img.default {
    width: inherit;
    margin: 8px auto;
  }
  img.thumbnail {
    float:left;
    width: 20%; 
    margin-top: 10px;
    margin-right: 15px;
    margin-bottom: 10px;
    margin-left: 0px;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;
  }

aside {
  padding: 10px;
  margin-bottom: 15px;
  margin-top: 15px;
  border: 1px solid #CACACA;
}

.button {
  position: relative;
  display: inline-block;
  display: inline;
/*  background: #800000; */
/*  background: #3a5d9f; */
  padding-top: 5px;
  padding-bottom:5px;
  padding-left:20px;
  padding-right:20px;
  text-align:center;
  border: 1px solid #CACACA;

  -moz-border-radius: 15px;
  -webkit-border-radius: 15px;
  
  text-transform:uppercase;
  text-decoration:none;
  color: #555555;
}

.button:link, .button:visited {color: #555555;}
.button:hover {background:#f1f1f1; border-bottom: 1px solid #CACACA; text-decoration: none;}

/* overrides extra padding on button elements 
   in Firefox */
.button::-moz-focus-inner {
  padding: 0;
  border: 0;
}

#training-sidebar {
  float:right;
  margin-right: 30px;
  padding: 20px;
  border: 1px solid #CACACA;
  width: 30%;
  margin-left: 20px;
}

#training-sidebar h4 {
  color: #CC0000;
  font-size: 16px;
  font-weight: bold;
  margin-top: 5px;
  margin-bottom: 5px;
  padding-bottom: 5px;
  text-rendering: optimizeLegibility;
}

/*
iframe {display:block;}
*/

.video-container {
	position: relative;
	padding-bottom: 56.25%;
	padding-top: 30px;
	height: 0;
	overflow: hidden;
  margin-top: 15px;
  margin-bottom: 15px;
}
.video-container iframe,  
.video-container object,  
.video-container embed {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

.toc ul { color: royalblue;}



@media (min-width: 650px) {
  
  #wrap, .toc, .promo {
    width: 99%;
    margin-left: auto;
    margin-right: auto;
  }
}

@media (min-width: 750px) {
  
  #wrap, .toc, .promo {
    width: 97%;
    margin-left: auto;
    margin-right: auto;
  }
}

@media (min-width: 850px) {

  body {
    font-size: 1em;
  }
  
  #wrap, .toc, .promo {
    width: 95%;
    margin-left: auto;
    margin-right: auto;
  }
}

@media (min-width: 860px) {

  body {
    font-size: 1em;
  }
  
  code {font-size: 1.3em;}
  .feature-banner-text {font-size: 2em;}
  
  h1 {font-size: 1.7em;}
  h2 {font-size: 1.5em; }
  h3 {font-size: 1.3em; }
  h4 {margin-bottom: 0px; padding-bottom: 0px; font-weight:300;}

  .toc {
    width: 24%;
    float:right;
    column-count:1;
    -moz-column-count:1; /* Firefox */
    -webkit-column-count:1; /* Safari and Chrome */
    padding: 10px;
    border: 0;
    margin-left: 3%;
  }
  article {
    float:left;
    width: 70%;
  }  
  #wrap {
    width:96%;
  }

  .toc ul {
    list-style-type: none;
    padding-left: 0;
    margin:0;
    line-height: 1.5em;
  }
}

@media (min-width: 1020px) {

  body {
    font-size: 1em;
  }
  /*
  article, #archives { 
    column-count:2;
    -moz-column-count:2;
    -webkit-column-count:2 
  }
 */
  code {font-size: 1.3em;}
  .feature-banner-text {font-size: 2em;}
  
  h1 {font-size: 1.8em;}
  h2 {font-size: 1.6em; }
  h3 {font-size: 1.4em; }
  h4 {margin-bottom: 0px; padding-bottom: 0px; font-weight:300; font-size: .9em;}

  .toc {
    width: 24%;
    float:right;
    column-count:1;
    -moz-column-count:1; /* Firefox */
    -webkit-column-count:1; /* Safari and Chrome */
    padding: 10px;
    border: 0;
    margin-left:3%;
  }
  article {
    float:left;
    width: 70%;
  }  
  #wrap {
    width:950px;
  }
  
  .toc ul {
    list-style-type: none;
    margin:0;
    padding:0;
  }
}

</style>
  
  </head>
  <body>



    <div id="wrap">
     <article itemscope itemtype="http://schema.org/Article" >
     <header>
    <div class='feature-banner'>
      <div class='feature-banner-text'>
        Database Programming
        <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

<div id="postmeta">
  <!--
  <div style="text-decoration: overline; color: inherited">
  file: #Database  #Introduction
  </div> 
  last updated:  <br/>
  -->

  By <a href='https://plus.google.com/+TedHagos?rel=author'>Ted Hagos</a> <br/>
<!--  June 22, 2012 <p/> -->
    
<!--
  <div class="g-follow" data-annotation="none" data-height="20" data-href="//plus.google.com/107317535953221277825" data-rel="author"></div>
  -->
</div>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>

      </div>
    </div>             
    </header>
    
		  <div id="post">
        <div itemprop='articleBody'>
		    <p>While there exist a class of applications that do not use databases, they are few. It’s almost an automatic expectation that a programmer knows how to deal with databases. </p>

<p>We will use the built-in database of Android, <strong>SQLite</strong>. To use this database, we simply need to declare it in our <em>import</em> statements. This db is baked right into Android. There are no third party installs necessary.</p>

<p>If your background in Java database programming is JDBC or Hibernate or something else, there is a slight adjustment you need to make. You won’t be able to use JDBC in Android. There is no JDBC in here. Don’t worry too much. The SQLite API is not terribly difficult. It won’t take you an afternoon to learn the basics.</p>

<h1 id="our-goals">OUR GOALS</h1>

<p>To Display a simple form to the user. Let him type anything he wants on a free-form editable UI widget <em>(an EditText)</em>.  </p>

<p>To Get the runtime value of the <em>EditText</em> and insert it as a record in the database. Afterwhich, read the whole table and display the contents in scrollable, non-editable widget <em>(TextView)</em></p>

<h1 id="concepts">CONCEPTS</h1>

<p>The class <em>SQLiteOpenHelper</em> is the middle-man that stands between your application logic and the database. You will use this to <em>create and upgrade a database</em>. You will also use it to get a handle on a readable database and writable database — think of it as a replacement of the Connection object in JDBC.  </p>

<p>Another class used in this example is the <em>SQLiteDatabase</em>. Think of it as the equivalent of the Statement object in JDBC. When you need to perform raw SQL statements, this is the class to use. </p>

<p>Once we have created the database using <em>SQLiteOpenHelper</em> and captured some info from the UI, we need to deal with data retrieval. We need to find a way to get a handle on a readable database, pass a query to it, get the result of the query and save it somewhere else. The <em>Cursor</em> object is what we will use to store the results of the query. In JDBC you might remember this as the <em>ResultSet</em> object.  </p>

<p>Once we have a <em>Cursor</em>, we can simply iterate through it to process the contents of the database. </p>

<h1 id="how-to-do-it">HOW TO DO IT</h1>

<p>Create a new android project for this exercise. Add the appropriate View elements like TextView, EditText and Button.</p>

<p><code class="codeblock">$ android create project --target 15 --activity DbSample --path dbsample  --package com.thelogbox</code></p>

<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&quot;http://schemas.android.com/apk/res/android&quot;</span>
    <span class="na">android:orientation=</span><span class="s">&quot;vertical&quot;</span>
    <span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
    <span class="na">android:layout_height=</span><span class="s">&quot;fill_parent&quot;</span>
    <span class="nt">&gt;</span>

	<span class="nt">&lt;EditText</span>
		<span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
		<span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
		<span class="na">android:id=</span><span class="s">&quot;@+id/todoedit&quot;</span>
		<span class="na">android:layout_weight=</span><span class="s">&quot;0&quot;</span>
	<span class="nt">/&gt;</span>

	<span class="nt">&lt;ScrollView</span>
		<span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
		<span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
		<span class="na">android:layout_weight=</span><span class="s">&quot;10&quot;</span>
	<span class="nt">&gt;</span>

		<span class="nt">&lt;TextView</span>  
    		<span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span> 
    		<span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span> 
    		<span class="na">android:text=</span><span class="s">&quot;I have nothing&quot;</span>
			<span class="na">android:id=</span><span class="s">&quot;@+id/tododisplay&quot;</span>
    	<span class="nt">/&gt;</span>
	<span class="nt">&lt;/ScrollView&gt;</span>
	<span class="nt">&lt;Button</span>
		<span class="na">android:layout_width=</span><span class="s">&quot;fill_parent&quot;</span>
		<span class="na">android:layout_height=</span><span class="s">&quot;wrap_content&quot;</span>
		<span class="na">android:text=</span><span class="s">&quot;Add item&quot;</span>
		<span class="na">android:id=</span><span class="s">&quot;@+id/btnadd&quot;</span>
		<span class="na">android:onClick=</span><span class="s">&quot;recAdd&quot;</span>
		<span class="na">android:layout_weight=</span><span class="s">&quot;0&quot;</span>
<span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span></code></pre></div>

<div id="lst">main.xml generated by the project</div>

<p>The <em>TextView</em> component is embedded in a <em>ScrollView</em> component so we can scroll through the contents of the TextView. The ScrollView acts like a viewport. We also used the <em>weight</em> property of the layout so our viewport is given the biggest portion of the screen. See the note on <a href="/android-layout-weights">how to use weights to maximize screen space</a></p>

<p>The <em>Button’s</em> onClick property is a method called <code class="codeblock">recAdd</code> which we need to implement inside on the Activity class. </p>

<h2 id="sqliteopenhelper-class">SQLiteOpenHelper class</h2>

<p>Create a class that extends the <code class="codeblock">SQLiteOpenHelper</code></p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// SQLiteOpenHelper .java</span>

<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">thelogbox</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">android</span><span class="o">.</span><span class="na">provider</span><span class="o">.</span><span class="na">BaseColumns</span><span class="o">.</span><span class="na">_ID</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.database.sqlite.SQLiteDatabase</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.database.sqlite.SQLiteOpenHelper</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DbHelper</span> <span class="kd">extends</span> <span class="n">SQLiteOpenHelper</span> <span class="o">{</span>

	<span class="n">String</span> <span class="n">sqlcreate</span> <span class="o">=</span> <span class="s">&quot;CREATE TABLE todo( &quot;</span> <span class="o">+</span> <span class="n">_ID</span>  <span class="o">+</span> <span class="s">&quot; INTEGER PRIMARY KEY AUTOINCREMENT, item TEXT);&quot;</span><span class="o">;</span>


	<span class="kd">public</span> <span class="nf">DbHelper</span><span class="o">(</span><span class="n">Context</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
		<span class="kd">super</span><span class="o">(</span><span class="n">ctx</span><span class="o">,</span><span class="s">&quot;tododb.db&quot;</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span> <span class="mi">1</span><span class="o">);</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">SQLiteDatabase</span> <span class="n">db</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">db</span><span class="o">.</span><span class="na">execSQL</span><span class="o">(</span><span class="n">sqlcreate</span><span class="o">);</span>
	<span class="o">}</span>
	
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onUpgrade</span><span class="o">(</span><span class="n">SQLiteDatabase</span> <span class="n">db</span><span class="o">,</span> <span class="kt">int</span> <span class="n">oldversion</span><span class="o">,</span> <span class="kt">int</span> <span class="n">newversion</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">db</span><span class="o">.</span><span class="na">execSQL</span><span class="o">(</span><span class="s">&quot;DROP TABLE IF EXISTS tododb.db&quot;</span><span class="o">);</span>
		<span class="n">onCreate</span><span class="o">(</span><span class="n">db</span><span class="o">);</span>
	<span class="o">}</span>
	
<span class="o">}</span></code></pre></div>

<p>You need to do <strong>3 things</strong> at a minimum when defining a SQLiteOpenHelper.</p>

<p><strong>First</strong>. Define a public constructor that accepts a Context object.  This context is the context of the <em>Activity</em> class where you will instantiate the Helper class. Call the super constructor so that you don’t break the chain. The first parameter to super constructor is the <em>context object</em> — you know this already, next parameter is the name of database you want to create; third parameter is a cursor factory, you can ignore this for now, that is why I passed <em>null</em> to it. </p>

<p>The last parameter is an integer value which stands for the database version. I placed one (1) because it is my first version of this database. When you revise the schema of the database, increase this value by one so that the <em>onUpgrade()</em> method kicks in—it will perform some sort of an ALTER database command in your behalf.</p>

<p><strong>Second</strong>, override the onCreate() method. This is where you can execute DDL (SQL Data Definition) commands against the database. </p>

<p><strong>Third</strong>, Override the onUpgrade() method, even if you won’t need it yet. You won’t be able to compile unless you override this method</p>

<h2 id="the-activity-class">THE ACTIVITY CLASS</h2>

<p>We will use an instance of  <code class="codeblock">SQLiteOpenHelper</code> for reading and writing to the database</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="c1">// Activity .java}</span>

<span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">thelogbox</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.app.Activity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.Context</span><span class="o">;</span> 
<span class="kn">import</span> <span class="nn">com.thelogbox.DbHelper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.ContentValues</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.database.sqlite.SQLiteDatabase</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.database.Cursor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.TextView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.EditText</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DbSample</span> <span class="kd">extends</span> <span class="n">Activity</span> <span class="o">{</span>


	<span class="n">DbHelper</span> <span class="n">dh</span><span class="o">;</span>
	<span class="n">SQLiteDatabase</span> <span class="n">dbwrite</span><span class="o">;</span>
	<span class="n">SQLiteDatabase</span> <span class="n">dbread</span><span class="o">;</span>
	
	<span class="n">EditText</span> <span class="n">input</span><span class="o">;</span>
	<span class="n">TextView</span> <span class="n">output</span><span class="o">;</span>
	

   <span class="cm">/** Called when the activity is first created. */</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    		
    	<span class="n">dh</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">DbHelper</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">());</span>
    	<span class="n">dbwrite</span> <span class="o">=</span> <span class="n">dh</span><span class="o">.</span><span class="na">getWritableDatabase</span><span class="o">();</span>
    	<span class="n">dbread</span> <span class="o">=</span> <span class="n">dh</span><span class="o">.</span><span class="na">getReadableDatabase</span><span class="o">();</span>
    	
		<span class="c1">// you cannot put the findViewById here, it causes errors</span>
    	
		<span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
      <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">main</span><span class="o">);</span>
    <span class="o">}</span>
    
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">recAdd</span><span class="o">(</span><span class="n">View</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>

    	<span class="n">input</span> <span class="o">=</span> <span class="o">(</span><span class="n">EditText</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">todoedit</span><span class="o">);</span>
    	<span class="n">output</span> <span class="o">=</span> <span class="o">(</span><span class="n">TextView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tododisplay</span><span class="o">);</span>
		
		<span class="n">String</span> <span class="n">itemtoadd</span> <span class="o">=</span> <span class="n">input</span><span class="o">.</span><span class="na">getText</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>		
		
		<span class="n">ContentValues</span> <span class="n">cv</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">ContentValues</span><span class="o">();</span>
		<span class="n">cv</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;item&quot;</span><span class="o">,</span> <span class="n">itemtoadd</span><span class="o">);</span>
		<span class="n">dbwrite</span><span class="o">.</span><span class="na">insertOrThrow</span><span class="o">(</span><span class="s">&quot;todo&quot;</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="n">cv</span><span class="o">);</span>
		
		<span class="n">String</span> <span class="n">temptext</span> <span class="o">=</span> <span class="o">(</span><span class="n">String</span><span class="o">)</span> <span class="n">output</span><span class="o">.</span><span class="na">getText</span><span class="o">();</span>
		
		<span class="c1">//Write the dbExtraction routine here</span>
		
		<span class="c1">//temptext = temptext + &quot;\n&quot;;</span>
		<span class="n">output</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">getTodos</span><span class="o">());</span>
		
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="n">String</span> <span class="nf">getTodos</span><span class="o">()</span> <span class="o">{</span>
    	
    	<span class="n">String</span> <span class="n">cols</span><span class="o">[]</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;item&quot;</span><span class="o">};</span>
    	<span class="n">StringBuilder</span> <span class="n">sb</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
    	<span class="n">Cursor</span> <span class="n">cursor</span> <span class="o">=</span> <span class="n">dbread</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="s">&quot;todo&quot;</span><span class="o">,</span><span class="n">cols</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="kc">null</span><span class="o">,</span><span class="s">&quot;item&quot;</span><span class="o">);</span>
    	<span class="n">startManagingCursor</span><span class="o">(</span><span class="n">cursor</span><span class="o">);</span>
    	
    	<span class="k">while</span><span class="o">(</span><span class="n">cursor</span><span class="o">.</span><span class="na">moveToNext</span><span class="o">())</span> <span class="o">{</span>
    		<span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">cursor</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">0</span><span class="o">));</span>
    		<span class="n">sb</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;\n&quot;</span><span class="o">);</span>
    	<span class="o">}</span>
    	<span class="k">return</span> <span class="n">sb</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span></code></pre></div>

<p><em>DBSample</em> is a regular <em>Activity</em> class. It’s bad coding practice to embed the database logic in the UI, but were just starting out to learn about databases in Android, we will let it pass for now. If we partition this app properly and use the nice design patterns, we will have more code to deal with (and to understand).</p>

<p>We instantiated the DbHelper class so that we can create the database during our first run of this app. We also used the DbHelper to create 2 SQLiteDatabase objects, one for reading (dbread) and another for writing (dbwrite). </p>

<p>The <code class="codeblock">recAdd</code> method starts out by getting the object references to the EditText and TextView components, todoedit and tododisplay respectively. </p>

<p>Once we extracted whatever the user typed inside the EditText via <code class="codeblock">getText()</code> method, we stored it inside <em>itemtoadd</em> String variable. </p>

<p>The <code class="codeblock">ContentValues</code> object is some sort of a Dictionary data structure (key value pair), this data structure is required by the <em>insert</em> method of the SQLiteDatabase object, that is why we used it to wrap the string data we got from the EditText. You don’t have to use the <code class="codeblock">insertOrThrow</code> method if you don’t want to, you can insert a record to the database using raw SQL. If you pass an <em>INSERT INTO todo …</em> inside an <code class="codeblock">execSQL</code> method, that will do the job just as well.  </p>

<p>Compile and Test the project — <code class="codeblock">ant debug install</code>. The <em>codeonCreate()</em> method of DbHelper should kick in the first time your app issues a db related command. </p>

        </div>					
		  </div>
      
      
      
      
     <!-- 
      <div id="leanpubbook">        
        
                
        <img src="http://titlepages.leanpub.com/minimumandroidprogramming/small" class="thumbnail" /> 
      
        <div style="top:50%; float:right; text-align:center;">
        Ted is writing an android book for beginners. It's a work in progress.
        <a href="https://leanpub.com/minimumandroidprogramming/read" target="_blank">You  
        can read it (free) online</a> over at LeanPub.
      </div>
      </div>
    -->
      <table bgcolor="#d6d6d6" cellpadding="10">
        <tr>
          <td width="25%">
            <img src="http://titlepages.leanpub.com/minimumandroidprogramming/small" width="100%"/> 
          </td>
          <td width="75%">
            Ted is writing an android book for beginners. It's a work in progress.
            <a href="https://leanpub.com/minimumandroidprogramming/read" target="_blank">You  
            can read it (free) online</a> over at LeanPub.
          </td>
        </tr>
      </table>
      
      
		</article>
    
    
    <div class="toc">
      <!--
      
      <iframe width="150" height="300"src="https://leanpub.com/minimumandroidprogramming/embed" frameborder="0" allowtransparency="true" align="right" marginheight="15"></iframe>  
      -->
      
      <ul>
        
      <li><a href="/android/android-key-concepts"><b>Key Concepts</b></a></li>
      <li><a href="/android/android-what-you-need-to-know-before">What you need to know</a></li>
      <li><a href="/android-install-sdk-windows">Dev Setup - Windows</a></li>
      <li><a href="/android-virtual-device">Virtual Device</a></li>
      <li><a href="/android-physical-device">Physical Device</a></li>
      <li>
      <li><a href="/android/android-project-structure"><b>Project Creation</b></a></li>
        <ul style="margin-left:5px; padding-left:5px">
          <li><a href="/android/android-create-project-cli">Command Line using the SDK</a></li>
          <li><a href="#">Using Android Studio</a></li>
        </ul>
      </li>
      <li><a href="/android-activity">Activity and the UI</a></li>
      <li><a href="/android-linear-layout">Linear Layout</a></li>
      <li><a href="/android/layout-weights">Layout Weights</a></li>
      <li><a href="/android-scrolling-edittext-using-scrollview">Scrolling Text</a></li>
      <li><a href="/logcat">Debugging with LogCat</a></li>
      <li><a href="/android-logging-and-adb-logcat">LogCat and ADB</a></li>
      <li><a href="/android-event-handling-overview">Event Handling Overview</a></li>
      <li><a href="/android-event-handling-declarative">Declarative Event Handling</a></li>
      <li><a href="/android-event-handling-programmatic">Programmatic Event Handling</a></li>
      <li><a href="/android-event-handling-declarative">Declarative Event Handling</a></li>
      <li><a href="/android-database-programming-basics">Database Programming</a></li>
      <li><a href="/android-check-connectivity">Network Connectivity</a></li>
      <li><a href="/android-location-api">GEO Location</a></li>
      <li><a href="/simple-camera-code">Camera</a></li>
      <li><a href="/android-java-recording-voice">Audio</a></li>
      <li><a href="/signing-an-android-app">Signing your App</a></li>
  
      <li><a href="/blog-choosing-books-for-android">Bibliography</a></li>
      <li><a href="/blog-studying-and-practicing-android">Study Tips</a></li>
    </ul>
      
    <ul>
      <li><a href="/developing-with-eclipse">Eclipse Development Environment</a></li>
      <li><a href="/android-create-project-eclipse">Creating a project in Eclipse</a></li>
      <li><a href="/developing-with-netbeans">Netbeans Development Environment</a></li>
      <li><a href="/android-studio">Android Studio</a></li>
      <li><a href="/android-project-workflow">Project Workflow</a></li>
      <li><a href="/cannot-find-buildxml">Cannot find build.xml</a></li>
    </ul>
    
    </div>    
    
    </div>  <!--  div wrap -->
    <footer>
<!--
<a href="/android-programming-tutorial">Android</a> &nbsp;
<a href="/java-introduction">Java</a> &nbsp;
<a href="/working-with-html5">HTML5</a> &nbsp;
<a href="/mobile-app-development-phonegap">PhoneGap</a> &nbsp;
<a href="/javascript-core-tutorial">JavaScript</a> &nbsp;
-->

<div style="text-align:center;">
  <a href="/index.html">Copyright&nbsp; &copy; 2004-2013 Ted Hagos</a>
</div>
</footer>
    <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38198657-1']);
  _gaq.push(['_setDomainName', 'thelogbox.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    <!-- Start of StatCounter Code for Default Guide -->
	
  <script type="text/javascript">
  var sc_project=7827488; 
  var sc_invisible=1; 
  var sc_security="069357c9"; 
  </script>
  <script type="text/javascript"
      src="http://www.statcounter.com/counter/counter.js"></script>
  <noscript><div class="statcounter"><a title="customizable
      counter" href="http://statcounter.com/free-hit-counter/"
      target="_blank"><img class="statcounter"
      src="http://c.statcounter.com/7827488/0/069357c9/1/"
      alt="customizable counter"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
  </body>
</html>
