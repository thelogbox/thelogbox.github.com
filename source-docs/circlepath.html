<!DOCTYPE html>
<html>
  <head></head>
  <script src='http://code.jquery.com/jquery-1.8.2.min.js'></script>
  <script>
	
	// Generated by CoffeeScript 1.3.3

	/*

	filename: circlepath.coffee
	compile: coffee --compile circlepath.coffee

	author: Ted Hagos

	Desc:
		Trace the path of circle object (defined in the constructor). That specific
		circle will not be drawn, but instead its perimeter will be used as the 
		path as we draw (and animate) a smaller circle (drawn using ctx.arc)
	*/

	(function() {
	  var Paper,
	    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

	  Paper = (function() {
	    var ball, c, circle, counter, ctx;

	    c = null;

	    ctx = null;

	    ball = {};

	    circle = {};

	    counter = 0;

	    function Paper(canvas, context) {
	      this.drawCircularPath = __bind(this.drawCircularPath, this);

	      this.draw = __bind(this.draw, this);
	      c = canvas;
	      ctx = context;
	      $('#watch').html("On the CTOR");
	      ball = {
	        x: 0,
	        y: 0,
	        speed: 0.1
	      };
	      circle = {
	        centerX: 150,
	        centerY: 150,
	        radius: 55,
	        angle: 0
	      };
	    }

	    Paper.prototype.draw = function() {
	      counter += 1;
	      ctx.clearRect(0, 0, c.width, c.height);
	      this.drawCircularPath();
	      ball.x = circle.centerX + Math.cos(circle.angle) * circle.radius;
	      ball.y = circle.centerY + Math.sin(circle.angle) * circle.radius;
	      ctx.beginPath();
	      ctx.arc(ball.x, ball.y, 15, 0, Math.PI * 2, true);
	      ctx.closePath();
	      ctx.stroke();
	      circle.angle += ball.speed;
	      $('#watch').html("Loop counter = " + counter);
	      return setTimeout(this.draw, 1000);
	    };

	    Paper.prototype.drawCircularPath = function() {
	      ctx.beginPath();
	      ctx.arc(circle.centerX, circle.centerY, circle.radius, 0, Math.PI * 2, true);
	      ctx.closePath();
	      return ctx.stroke();
	    };

	    return Paper;

	  })();

	  $(window).ready(function() {
	    var canvas, context, paper;
	    canvas = $('#mycanvas').get(0);
	    context = canvas.getContext('2d');
	    paper = new Paper(canvas, context);
	    return paper.draw();
	  });

	}).call(this);
	
	
	</script>
</html>
<body>
  <canvas height='300' id='mycanvas' width='300'></canvas>
  <div id='watch'></div>
</body>
