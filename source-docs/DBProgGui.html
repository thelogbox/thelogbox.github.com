<!DOCTYPE html>  <html> <head>   <title>DBProgGui.java</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               DBProgGui.java             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="kn">import</span> <span class="nn">javax.swing.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.*</span><span class="o">;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The face of the app. It needs 3 panels with different layout managers.
The NORTH panel has a GridLayout so you can do the matrix type layout of
JLabels and JTextFields. 
The CENTER panel holds the Button, just use a FlowLayout for that. Finally,
the SOUTH panel holds the JTextArea (within the JScrollPane), I used a BorderLayout
for the SOUTH panel because I would like the JTextArea to hog all the available space
in the SOUTH section</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">class</span> <span class="nc">DBGui</span> <span class="kd">extends</span> <span class="n">JFrame</span> <span class="kd">implements</span> <span class="n">ActionListener</span> <span class="o">{</span>

	<span class="n">JTextField</span> <span class="n">tfname</span><span class="o">;</span>
	<span class="n">JTextField</span> <span class="n">tfemail</span><span class="o">;</span>
	<span class="n">JPasswordField</span> <span class="n">tfpassword</span><span class="o">;</span>
	<span class="n">JTextArea</span> <span class="n">taresult</span><span class="o">;</span>
	<span class="n">JScrollPane</span> <span class="n">jp</span><span class="o">;</span>
	
	<span class="n">TestDB</span> <span class="n">tdb</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TestDB</span><span class="o">();</span>
	
	<span class="n">JButton</span> <span class="n">btnadd</span><span class="o">;</span>

	<span class="n">DBGui</span><span class="o">()</span> <span class="o">{</span>
		
		<span class="n">JPanel</span> <span class="n">pnorth</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPanel</span><span class="o">();</span>
		<span class="n">JPanel</span> <span class="n">psouth</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPanel</span><span class="o">();</span>
		<span class="n">JPanel</span> <span class="n">pcenter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPanel</span><span class="o">();</span>
		
		<span class="n">tfname</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JTextField</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span>
		<span class="n">tfemail</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JTextField</span><span class="o">(</span><span class="mi">50</span><span class="o">);</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>The JPasswordField is just like the JTextField, but it has a 
built-in masking capability</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="n">tfpassword</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JPasswordField</span><span class="o">(</span><span class="mi">20</span><span class="o">);</span>
		<span class="n">taresult</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JTextArea</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="mi">10</span><span class="o">);</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>The JScrollPane allows for the scrolling of the
multiline JTextArea</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="n">jp</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JScrollPane</span><span class="o">(</span><span class="n">taresult</span><span class="o">);</span>
				
		<span class="n">btnadd</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JButton</span><span class="o">(</span><span class="s">&quot;Add&quot;</span><span class="o">);</span>
		
		<span class="n">pnorth</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">GridLayout</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">2</span><span class="o">));</span>
		<span class="n">psouth</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">FlowLayout</span><span class="o">());</span>
		<span class="n">pcenter</span><span class="o">.</span><span class="na">setLayout</span><span class="o">(</span><span class="k">new</span> <span class="n">BorderLayout</span><span class="o">());</span>
		
		<span class="n">pnorth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">JLabel</span><span class="o">(</span><span class="s">&quot;Name : &quot;</span><span class="o">));</span>
		<span class="n">pnorth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tfname</span><span class="o">);</span>
		<span class="n">pnorth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">JLabel</span><span class="o">(</span><span class="s">&quot;Email :&quot;</span><span class="o">));</span>
		<span class="n">pnorth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tfemail</span><span class="o">);</span>
		<span class="n">pnorth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">JLabel</span><span class="o">(</span><span class="s">&quot;Password :&quot;</span><span class="o">));</span>
		<span class="n">pnorth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">tfpassword</span><span class="o">);</span>
		
		<span class="n">psouth</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">btnadd</span><span class="o">);</span>
		
		<span class="n">pcenter</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">jp</span><span class="o">);</span>
		
		<span class="n">btnadd</span><span class="o">.</span><span class="na">addActionListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
		
		<span class="n">add</span><span class="o">(</span><span class="n">pnorth</span><span class="o">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="na">NORTH</span><span class="o">);</span>
		<span class="n">add</span><span class="o">(</span><span class="n">pcenter</span><span class="o">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="na">CENTER</span><span class="o">);</span>
		<span class="n">add</span><span class="o">(</span><span class="n">psouth</span><span class="o">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="na">SOUTH</span><span class="o">);</span>
		
		
		<span class="n">setDefaultCloseOperation</span><span class="o">(</span><span class="n">JFrame</span><span class="o">.</span><span class="na">EXIT_ON_CLOSE</span><span class="o">);</span>
		<span class="n">pack</span><span class="o">();</span>
		<span class="n">setVisible</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
		
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">actionPerformed</span><span class="o">(</span><span class="n">ActionEvent</span> <span class="n">ae</span><span class="o">)</span> <span class="o">{</span>
						</pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>The getText() method of JTextField and JPasswordField
returns the runtime value of these components as a String</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="n">tfname</span><span class="o">.</span><span class="na">getText</span><span class="o">();</span>
		<span class="n">String</span> <span class="n">email</span> <span class="o">=</span> <span class="n">tfemail</span><span class="o">.</span><span class="na">getText</span><span class="o">();</span>
		<span class="n">String</span> <span class="n">password</span> <span class="o">=</span> <span class="n">tfpassword</span><span class="o">.</span><span class="na">getText</span><span class="o">();</span>
		
		</pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>We will do the try catch here (instead of throws clause)
because this is already the UI level, any error encountered
will be seen by the user. It is best if app abonormalities
are handled deliberately instead of leaving it up to Java</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">try</span> <span class="o">{</span>
			<span class="n">tdb</span><span class="o">.</span><span class="na">insertRecord</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="n">email</span><span class="o">,</span> <span class="n">password</span><span class="o">);</span>
			<span class="n">taresult</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">tdb</span><span class="o">.</span><span class="na">seeAllRecords</span><span class="o">());</span>
		<span class="o">}</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>The insertRecord() call declares to throw SQLException, that is why
we are catching it here</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">catch</span><span class="o">(</span><span class="n">java</span><span class="o">.</span><span class="na">sql</span><span class="o">.</span><span class="na">SQLException</span> <span class="n">sqle</span><span class="o">){</span>
			<span class="n">taresult</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">sqle</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
		<span class="o">}</span>
		<span class="n">resetForm</span><span class="o">();</span>
	<span class="o">}</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Just a simple housekeepin, when the user is done keying in a new entry
we will simply clear out the form</p>             </td>             <td class="code">               <div class="highlight"><pre>	<span class="kt">void</span> <span class="nf">resetForm</span><span class="o">(){</span>
		<span class="n">tfname</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
		<span class="n">tfemail</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
		<span class="n">tfpassword</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="k">new</span> <span class="nf">DBGui</span><span class="o">();</span>
	<span class="o">}</span>
<span class="o">}</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>The TestDB class encapsulates the two things we would like to do with our database
(1) to insert a new record (insertRecord()) and (2) to fetch all records (seeAllRecords())</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="kd">class</span> <span class="nc">TestDB</span> <span class="o">{</span>

	<span class="n">Connection</span> <span class="n">cn</span><span class="o">;</span>
	<span class="n">Statement</span> <span class="n">sinsertrec</span><span class="o">;</span>
	<span class="n">Statement</span> <span class="n">sgetallrec</span><span class="o">;</span>
	<span class="n">ResultSet</span> <span class="n">rs</span><span class="o">;</span>


	<span class="n">TestDB</span><span class="o">()</span> <span class="o">{</span>
	
		<span class="k">try</span><span class="o">{</span>
			<span class="k">new</span> <span class="n">org</span><span class="o">.</span><span class="na">sqlite</span><span class="o">.</span><span class="na">JDBC</span><span class="o">();</span>
			<span class="n">cn</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="s">&quot;jdbc:sqlite:test.db&quot;</span><span class="o">);</span>
		<span class="o">}</span>
		<span class="k">catch</span><span class="o">(</span><span class="n">SQLException</span> <span class="n">sqle</span><span class="o">){</span>
			<span class="n">sqle</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>

	<span class="o">}</span>

	<span class="kt">void</span> <span class="nf">insertRecord</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">email</span><span class="o">,</span> <span class="n">String</span> <span class="n">password</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>
		<span class="n">String</span> <span class="n">sqlinsert</span> <span class="o">=</span> <span class="s">&quot;INSERT INTO user values(&#39;&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s">&quot;&#39;,&#39;&quot;</span> <span class="o">+</span> <span class="n">email</span> <span class="o">+</span> <span class="s">&quot;&#39;,&#39;&quot;</span> <span class="o">+</span> <span class="n">password</span> <span class="o">+</span> <span class="s">&quot;&#39;);&quot;</span><span class="o">;</span>
		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">sqlinsert</span><span class="o">);</span>
		<span class="n">sinsertrec</span> <span class="o">=</span> <span class="n">cn</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
		<span class="n">sinsertrec</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">sqlinsert</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="n">String</span> <span class="nf">seeAllRecords</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>
		
		<span class="n">String</span> <span class="n">retval</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
		<span class="n">String</span> <span class="n">temp</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
		
		<span class="n">sgetallrec</span> <span class="o">=</span> <span class="n">cn</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span>
		<span class="n">rs</span> <span class="o">=</span> <span class="n">sgetallrec</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="s">&quot;SELECT * FROM user;&quot;</span><span class="o">);</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>ResultSet's next() method does two things. First, it advances the position of the record pointer
by one record, and second, it returns false if we are on the last record.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">while</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">()){</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>ResultSet's getString() method takes an integer argument--the column number in the table.
ResultSets are 1-based, unlike arrays which are zero-based. So you start your column with
number 1; not 0.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="n">temp</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; , &quot;</span> <span class="o">+</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot; , &quot;</span> <span class="o">+</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
			<span class="n">retval</span> <span class="o">=</span> <span class="n">retval</span> <span class="o">+</span> <span class="n">temp</span> <span class="o">+</span> <span class="s">&quot;\n&quot;</span><span class="o">;</span>
		<span class="o">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>The concatenated result of the whole table. Remember what I told about using Strings when
using them in concatenation solutions like this---they are a poor choice, use StringBuilder intead.
Strings are immutable so they create a mess when inside a loop like this.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="n">retval</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 