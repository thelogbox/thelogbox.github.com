<!-- filename: offset.haml -->
<!-- author: Ted Hagos -->
<!DOCTYPE html>
<html>
  <head>
    <link href='stylesheet.css' rel='stylesheet' />
    <script src='http://code.jquery.com/jquery-1.8.2.min.js'></script>
    <script>
		// Generated by CoffeeScript 1.4.0


		(function() {
		  var Stage,
		    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

		  Stage = (function() {
		    var box, c, ctx, stopAnimation;

		    c = ctx = box = null;

		    stopAnimation = false;

		    function Stage(canvas, context) {
		      this.draw = __bind(this.draw, this);
		      c = canvas;
		      ctx = context;
		      box = {
		        x: c.width / 2,
		        y: 0,
		        width: 10,
		        height: 10,
		        speed: 1,
		        acceleration: .98
		      };
		      this.draw();
		    }

		    Stage.prototype.draw = function() {
		      if (!(box.y > c.height)) {
		        ctx.clearRect(0, 0, c.width, c.height);
		        box.y += box.speed;
		        box.speed += box.acceleration;
		        ctx.strokeRect(box.x, box.y, box.width, box.height);
		        setTimeout(this.draw, 60);
		        if (box.y > c.height) {
		          box.speed = 1;
		          box.y = 0;
		          return box.x = Math.random() * c.width;
		        }
		      }
		    };

		    return Stage;

		  })();

		  $(window).ready(function() {
		    var canvas, context, stage;
		    canvas = $('#mycanvas').get(0);
		    context = canvas.getContext('2d');
		    return stage = new Stage(canvas, context);
		  });

		}).call(this);


		</script>
  </head>
  <body>
    <canvas height='500' id='mycanvas' style="border-bottom:2px dotted gray" width='500'></canvas>
  </body>
</html>
