<!DOCTYPE HTML>
<html lang="en">
  <head>
		<style>

* {
  font-size: 16px;
  background: #FFFFFF;
  color: #545454;
}

ul, ol, li, p {
  font-family: Arial ;
  line-height: 160%;
}

em {
  font-family: Georgia;
  color: #41505d;
}

strong {
  color: #000000;
}

img {
  display:block;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}
  img.shadow {
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 85%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;
    margin-top: 40px;
    margin-bottom: 40px;
  } 
  img.small {
    width: 40%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;
    margin-top: 40px;
    margin-bottom: 40px;
  }
  img.default {
    width: inherit;
  }
  

#shock-left {
  font-family: 'Rokkitt';
  font-weight:normal;
  letter-spacing: -1.5px;
  color: #61768a;
  text-align: center;
  width: 100%;
  float:left;
  height: 5em;
  padding-top:10px;
  margin-top:50px;
}

  #shock-left a:link, #shock-left a:visited {
    font-size: 45px;
    /*color: #61768a;*/
    color: #292929;
    border-bottom: 2px dotted #000000;
  }
  #shock-left a:hover {
    color: #61768a;
    border-bottom: 2px solid #61768a;;
  }

  #shock-right {
    padding-top:70px;
    font-size: 75px;
    font-weight: bold;
    font-family: 'Rokkitt';
    letter-spacing: -1.5px;
    line-height: -.7em;
    /*color: #61768a;*/
    color: #292929;
    text-align:center;
  }

/*
#shock-right {
  font-size: 350%;
  font-weight:bold;
  letter-spacing: -1.5px;
  color: #004646;
  float: right;
  height: 250px;
  width:40%;
  padding-top:30px;
  text-align: right;
  margin-right:50px;
}
*/
  
body {
  font-family: Arial;
  width: 85%;
  margin-left: auto;
  margin-right: auto;
}

header {
  height:4.5em;
  margin-top:10px;
  border-bottom:0px dotted #009494;
}

#navleft, #navright {font-family: 'Rokkitt';}
#navleft a:link, #navleft a:visited {
  font-size: 22px;
  color: #CACACA;
  float:left;
  font-weight:normal;
  margin-left:0px;
}
  #navleft a:hover {
    color: #61768a;
    border-bottom: 0px solid #61768a;
  }

#navright a:link, #navright a:visited {
  font-size: 22px;
  padding-left:5px;
  padding-right:5px;
  float:right;
  color: #CACACA;
  text-decoration:none;
}

  #navright a:hover {
    color: #61768a;
    border-bottom:0px solid #DEDEDE;
  }

  .currentdir {
    font-family: 'Rokkitt';
    font-size: 22px;
    color: #000000;
    padding: 3px;
  }  

#spacer {clear:both;margin-bottom:50px;}

#inner {

}
footer {
  font-size: 120%;
  text-align: center;
  clear:both;
  display:block;
  font-size: 90%;
  margin-top: 100px;
  margin-bottom: 30px;
}

/* Headings and Titles */

#trainingtitle {
  font-family: 'Rokkitt';
  color: #61768a;
  font-size: 350%;
  font-weight: normal;
  text-align: left;
  padding-top: 20px;
}

#articletitle {
  font-family: 'Tauri';
  font-size:60px; 
  font-weight: normal;
  color: #292929;
  margin-top:0px;
  margin-bottom: 40px;
  text-align: center;
  letter-spacing: -1px;
}

h2, h3, h4, h5 {
  font-family: Arial;
  /*color: #61768a;*/
  color: #373737; 
  font-weight:normal;
}
h1 {
  font-family:'Tauri'; 
  font-size: 200%;
  letter-spacing: -1px;
}
h2 {font-size: 140%;}
  h2.section { border-bottom: 1px solid #CACACA;}
h3 {font-size: 120%;}
h4 {font-size: 110%;}

/* LINKS */

a:link, a:visited {
  /*color: #004a94;
  color: #0778e4;*/
  color: #b30000;
  text-decoration: none;
}

a:hover {
  color: #0072e3;
  border-bottom: 1px solid #0072e3;
}

hr {
  background: #61781a;
  color: #61781a;
  border: 3px solid #DEDEDE;
}

/* OTHER BLOCKS */

#minitoc {

  color: #4E4E4E;
  width: 35%;
  float: right;
  margin-left:30px;
  
  margin-bottom:30px;
  padding-top: 10px;
  padding-bottom:20px;
  border: 3px solid #E8E8E8;  
  padding-left:10px;
  padding-right:20px;
    
  line-height:20px;   
}

#contentmeta {
  font-family: 'Rokkitt';
  font-style: normal;
  color: gray;
  text-align: left;
  text-align: center;
  margin-bottom: 20px;
}

#sidebarright {
  float: right;
  width:300px;
  /* background: #FFFFC8; */
  border: 1px solid #FFA500;
  padding: 20px;
  margin-left: 20px;
}

/* MAIL CHIMP CSS*/

#mce-EMAIL {
  font-size: 20px;
  letter-spacing: -1px;
  color: #000000;
  width: 60%;
  background: #FFFFF6;
  border:3px solid #000000;
  margin-bottom: 10px;
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 20px;
  height: 15px;
  text-align:center;
}

#mc-embedded-subscribe {
  font-family: Arial;
  background: #000000;
  color: #FFFFFF;
  padding: 10px 15px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  cursor: pointer;
  text-align: center;
  width: 200px;
  border: 0px;
  font-size: 25px;
}

#mc-embedded-subscribe:hover {
  background: #0072e3;
}  

#mc_embed_signup {
  border: 0px solid #618a8a ;
  margin-top: 50px;
  padding-top: 0px;
  padding-bottom: 20px;
  padding-left: 0px;
  text-align: center;
}

/* MAIL CHIMP CSS*/

/* PRE AND CODE AREA */

#lst {  
  font-family: Georgia;
  font-size: 16px;
  text-align: center;
  margin: 15px;
  color: #000000;
}

pre {

  margin-top: 15px;
  margin-bottom:0px;

  padding: 10px 5px 10px 15px;
  
  /*font-size: .87em;*/
  font-size: 14px;
  font-family: 'Muli';
  background: #e8ebef;
  line-height: 130%;
  white-space: pre-wrap;
  
  /*
  border: 1px solid #DEDEDE;
  background: #FBFCF9; 
  */
  /*
  border: 1px solid #DEDEDE;
  background: #F5F5F5;
  color: #000;

  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;  
  border-radius: 10px;
  */

}

pre.codeblock, .codeblock {
  
  font-family: 'Muli';
  font-size: 15px;
  color: #0000b3;
  background: #FFFFFF;
  padding:0px;
  margin: 0px;
}


pre code, .keyword, .directive, .type, 
          .string, .function, .class, 
          .reserved, .content, .comment, 
          .predefined-type, .preprocessor, .tag,
          .attribute-name, .include, .predefined-constant, 
          .local-variable, .key, .class, .instance-variable,
          .symbol, .constant, .inline, .line-numbers,
          .integer, .char, .float, .annotation, .namespace, 
          .content, .delimiter, .st, .sourceCode, .exception,
          .class-variable, .doctype{

      font-family: 'Muli';
      /*font-size: 1em;*/
      font-size: 14px;
      background: #e8ebef; 
      color: #000000;
      line-height: 130%;

}

/* definition of styles for code highlighting */

/*
.keyword, .key, .directive, .type, .reserved, .predefined-type, .tag, .class {
  color: #6e6eFF;
}

.predefined-constant {
  color: gray;
}

.line-numbers {

  font-size: 70%;
  padding-right: 10px;
  color: #8E8E8E;
  font-family: 'Source Code Pro', Courier, "Courier New", monospace;
}

.include, .preprocessor, .attribute-name {
  color: #CD7300;
}

.string {
  color: #6C0000;
}

.comment {
  color: : gray;
}

.function, .class  {
  color: #2828A8;
}

.local-variable {
  color: blue;
}

*/
</style>
		<!--

<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>

-->

<meta charset="utf-8">
<title>Android Programming Tutorial &mdash; theLogBox.com</title>

<link href='http://fonts.googleapis.com/css?family=Rokkitt:400,700' rel='stylesheet' type='text/css'>

<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Tauri' rel='stylesheet' type='text/css'>

<!--
<link rel="stylesheet" type="text/css" href="/style.css" media="screen">
-->



		<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38198657-1']);
  _gaq.push(['_setDomainName', 'thelogbox.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>	
  </head>
  <body>

    <div id="main" itemscope itemtype="http://schema.org/Article">

	  <header>
      
<div id='navleft'>
<a href='/'><span class="currentdir">theLogBox</a>
</div>

<div id='navright'>
  <a href='/courses/'>courses</a> &nbsp;&nbsp;
  <a href='/blog/'>blog</a> &nbsp;&nbsp;
  <a href='/tutorials/'>tutorials</a>
</div>
    </header>

    <div id='contentmeta'>
by: 

<a href="https://plus.google.com/u/0/100317694679641558339?rel=author">
  Ted Hagos
</a> on 

<span itemprop="dateCreated"> August 9, 2012 </span>
</div>  
	  <div id="articletitle" itemprop="headline">Android Programming Tutorial</div>  
   

	  <div itemprop="articleBody">
      <img class="shadow" src="/res/article-pix/notes-android/android-sample-code.png"><p>A short Android history</p>
<ul>
<li>2003 - <em>Android Inc., was founded by Andy Rubin</em>
</li>
<li>2005 - <em>Android Inc was Acquired by Google</em>
</li>
<li>2008 - <em>version 1.0</em>
</li>
<li>2009 - <em>version 1.1</em>
</li>
<li>2009 - <em>v1.5 (CupCake), v1.6 (Donut)</em>
</li>
<li>2009 - <em>v2.0/2.1 (Eclair)</em>
</li>
<li>2010 - <em>v2.2 (Froyo), v2.3 (GingerBread)</em>
</li>
<li>2011 - <em>v3.0 (HoneyComb)</em>
</li>
<li>2011 - <em>v4.0 (Ice Cream Sandwich)</em>
</li>
<li>2012 - <em>v4.1 (Jelly Bean)</em>
</li>
</ul><p>An article about Andy Rubin and Android, titled <a href="http://www.thedailybeast.com/newsweek/2010/10/03/how-android-is-transforming-mobile-computing.html">Android Invasion</a> appeared on a NewsWeek article sometime in 2010.</p>
<hr><h1 id="technology-stack">TECHNOLOGY STACK</h1>
<p>The Android is made up of a slew of tech but the most visible ones are <em>Linux</em> and <em>Java</em>. It is a complete operating system and it provides a container that can support rich applications.</p>
<img class="shadow" src="/res/article-pix/notes-android/android-architecture.png" style="border: 1px solid gray"><div id="lst">
Fig 1: Android Architecture
</div>

<p>Under the hood of Android is Linux. It was chosen for many reasons, but primarily because of it's stability. Out of the box, Android comes with a couple of useful libraries like <em>SQLite</em> for database programming, <em>OpenGL</em> for graphics, <em>Webkit</em> (the browser engine that power Safari and Chrome) and <em>SSL</em> for security.</p>
<p>The Android runtime consists of (some) core Java libraries and the Dalvik VM. The runtime is not the same JRE/JDK that you have on your desktop. This runtime has a subset of Apache Harmony which is an open source, free Java implementation from the Apache Software Foundation. The politics of why Android did not use the Oracle reference implementation of the JDK will not be part of this tutorial, I am sure you can find that information somewhere else.</p>
<p>Android also comes packaged with Application Frameworks. This is the part of the Android that you will see frequently. As a developer you will spend a great deal of time reading, studying, implementing and using these frameworks.</p>
<hr><h1 id="what-you-need-for-development">WHAT YOU NEED FOR DEVELOPMENT</h1>
<ol style="list-style-type: decimal">
<li>A development machine with lots of horsepower and lots of RAM. As much as you can afford. Ignore the minimum requirement, splurge on the machine. It doesn't matter what you choose, OSX, Linux or Windows. Android will work on all of them</li>
<li>A good internet connection (the SDK download is bit hefty)</li>
<li>A programmer's editor — vi, emacs, TextMate, Sublime2 etc. You can use an IDE if you like, there are plenty to choose from — NetBeans, Eclipse or Android Studio</li>
<li>A Java development environment (either JDK 1.5 or 1.6)</li>
<li>Apache Ant</li>
<li>Lastly, a Java Programming background. Some people tried to learn Java and Android at the same time. While that is possible, I would not recommend that route. Get comfortable in Java first before trying out Android, unless you don't mind the headaches.</li>
</ol><hr><h1 id="setup">SETUP</h1>
<p>Setup your JDK and Apache ANT before setting up the Android SDK. Once Java and Apache ANT are out of the way, the process simply involves downloading, installing and configuring the SDK. The configuration is where it sometimes gets messy and confusing especially for beginners. The expectation however, is that you already are a Java programmer and that these things are old hats to you.</p>
<p>I used to keep a detailed and step-by-step (even pictorial) instructions of the setup routine in these pages, but they proved to be difficult to maintain and gets outdated quite quickly. Hence, I took them out and replaced them with links to resources that have better chances of being updated.</p>
<p>First thing to look at is the official site of Android. They keep setup information <a href="http://developer.android.com/sdk/index.html">here</a> and <a href="http://developer.android.com/sdk/index.html">here</a>. If that is still not clear enough, you can look at the <a href="https://docs.google.com/document/d/1AS8OoJJnRIIyEvi8lG6I8iF0PEt1-UolvQGtVevrJg4/edit?usp=sharing">setup instructions I wrote for my students here</a></p>
<hr><h1 id="things-you-can-do-with-android">THINGS YOU CAN DO WITH ANDROID</h1>
<p>A lot of things. As mentioned before, Android is an operating system. It is also has a top-notch and proven development kit (plus libraries). If you add the very large number of developers in the Java Community who are tirelessly working to produce the <em>next best dev framework/library</em> to this equation, then it's a whole new ball game. That means (almost) everything we did on Desktop we can also on the mobile — plus more. I said almost because the mobile platform will play catch up with the desktop platform in terms of processing horse power — but that is just a matter of time.</p>
<p>The Android development platform has some basic building blocks e.g. <em>Activities</em> for user interfaces, <em>Content Providers</em> for data sources, <em>Intents</em> for event handling — it actually is more than just for event handling and activating windows/apps, but for the purpose of this document, we will settle for that.</p>
<p>You can create applications that has timers, can multiprocess, can handle media (audio and video) and are <em>network-aware</em>. These are just a few of the things you can do with the Android Development platform.</p>
<hr><h1 id="getting-started">GETTING STARTED</h1>
<p>One of the best ways to learn something is to actually do it. In Android programming, that means getting your feet wet very early. Don't worry that you don't understand all of it (yet), that will come eventually. It's very important to get started early and gain a bit of coding confidence on the platform.</p>
<p>We will start with a very simple applicationn. The Hello World application is probably the most beaten down piece of sample code. Some developers look down on it because it is (already) downright nauseating. This poor example though, still has merits. It is the tiniest step one can take towards programming in unfamiliar territory and as such, the simplest.</p>
<p>The Hello World of JSE (Java Standard Edition) is markedly different on the Android platform. It is not a simple case of sending a bunch of characters to the stdout (STDIO's standard out). Android is a platform for rich user interfaces.</p>
<p>The Hello World in Android is way more involved than simply creating a simple class, defining <em>static main()</em> and invoking the out.println(). You will need to create an <em>Activity</em> object, override its <em>onCreate()</em> method, invoke the <em>ant</em> build tool, define an AVD (Android Virtual Device) and install the <em>.apk</em> (Android Package) either into the AVD or a physical Android Device — now, I hope you have a new found respect for the Hello World application.</p>
<h2 class="section">
CREATING A PROJECT
</h2>

<p>An android project is not just a simple java source file. It is made up of configuration files, source files, string resources, properties file etc. It is a non-trivial task to manage them manually that is why the <em>Android SDK</em> includes tools for creating, building, debugging and packaging android projects.</p>
<p>Use the <em>android create project</em> command to create our first project. Choose your working directory and then execute this command on the terminal.</p>
<p><code class="codeblock">$ android create project --target 8 path first --activity First --package com.thelogbox </code></p>
<p>The <code class="codeblock">android create project</code> command is available if you have properly setup your PATH variables. If you get an error such as <em>Bad command or filename</em> or <em>command not found</em> or something to that effect, that is your just OS telling you that the <code class="codeblock">android</code> executable is not properly setup. Check your installation and configuration. See if the <em>android tools</em> and <em>android platform tools</em> are in your <em>SYSTEM PATH</em>.</p>
<div style="padding: 15px; border:3px solid #FFAE5C;">

<p>There's quite a bit going on in the <em>create project</em> command, so let's slow down and take look what those flags mean.</p>
<p><em>--target</em> expects an integer value. This value stands for a unique API level for a specific android version. In our example above, <em>level 8</em> was specified because I intend to target android 2.2 (Froyo). Gingerbread will have a different value, Honeycomb will have a different one as well. If you want to see all the possible targets, you can type <em>android list targets</em></p>
<p><em>--path</em> specifies the name of top level folder for your project. Think of it as a project folder. It will be the root directory of your project</p>
<p><em>--activity</em> will cause our project to create a class that extends from the the Activity class. An Activity is commonly used if we need a user-facing class. Think of it as UI 2 mechanism in android. In our example, <em>--activity First</em> means that our project will have class named First and is a child class of the base class Activity</p>
<p><em>--package</em> an android project will be comprised of various XML files, resource files and Java source files. The Java source files will be stored using the package directive that we specify in the option. The package directive will only affect the location of Java source files, it will not affect the location and storage of the other android resources (i.e. XML files)</p>
</div>

<p>If the command completed successfully, you are supposed to have a directory similar to this one</p>
<img class="default" src="/res/article-pix/notes-android/android-project-structure.png"><div id="lst">
Fig 2: Folder Structure of an Android project
</div>


<p>It's quite a mouthful and probably enough to stop a beginning programmer to his tracks and pack up, but don't do that. We will explore each and everyone of those files and folders. You can safely ignore them for now. We are just trying to get a feel of how to create a project. For now, just play around the project. Open the generated files. Don't worry, they are all text files — see what they look like. They might fly over your head at this point, that's okay.</p>
<p>The <em>android create project</em> script actually generated a Java class source file for us, the <em>Hello.java</em>. This is an Activity class, for now just think of an Activity as some sort of window — it is more than that actually, but for now just think of it like a window so we don't have to deal with the complications. You would normally use an Activity class if you want the user to do something. In this case, we want him to see a simple <em>"Hello World"</em> message.</p>
<p>You don't have to change the codes at this point. The "Hello World" is actually written for you when we created the project. If you are curious, the Hello message is inside the <em>main.xml</em> file. We will get to examine that in a little while.</p>
<p>There are quite a few files generated by the <em>create project</em> script because Android apps needs quite a bit of infrastructure code, unlike simple JSE (Java Standard Edition) programs. This is one reason why the <em>create script</em> includes a build file, the <em>build.xml</em>, so that we don't have muck around whipping up our own compilation scripts.</p>
<p>The <em>build.xml</em> contains instructions on how to compile and deploy your app source code into a working <em>.apk.</em></p>
<h2 class="section">
BUILDING A PROJECT
</h2>

<p>After editing your source files in the project, you will need to build it. By that I meant <em>compiling</em> all the project resources and deploying it either in an emulator or a physical device. This is where the Apache ANT tool comes in handy. On your terminal, type the following</p>
<p><code class="codeblock">$ ant debug install</code></p>
<p>We used the <em>debug target</em> so that we can side step Android's requirement to setup security keys and signing our applications with that key. Let's deal with the application signing later on when we get to deploying and releasing our mobile app in the wild.</p>
<p>The <em>debug target</em> of ANT generated a debug key that served as the security key for our app. This is good enough for now because we are just trying to get our feet wet. If you release your real app, you should generate real security keys and signature.</p>
<p>You should see a bunch of scrolling echo messages in the terminal. Look for a message (right towards the end) that says something like <em>BUILD SUCCESSFUL</em>. It should be successful for now because we haven't messed around with it yet. There is no reason at this point for the build to fail.</p>
<p>Right after the compilation process, there are lots of changes within our project directory. Quite noticeably, there are now lots of files inside the <strong>bin</strong> and <strong>gen</strong> folders. Somewhere in these jungle lies the executables that we can actually deploy to a real device — but save that for later. Right now, the goal is to just be comfortable with the compilation process.</p>
<p>In case you encounter a <em>Cannot find build.xml</em> error, take a look at your SDK setup. This is usually a config error on the <em>local.properties</em> file. <a href="/cannot-find-buildxml/">Look here for details of the error</a></p>
<h2 class="section">
TEST THE APP
</h2>

<p>At this point, what we have done is simply compile an .apk, we haven't deployed it yet, either to a physical device or to an AVD. To see and appreciate your app in action, you need to deploy it either to an AVD (Android Virtual Device) or a physical device.</p>
<p>The AVD is an emulator. You need to create and configure an AVD using the android SDK manager;</p>
<ol style="list-style-type: decimal">
<li>On a command line terminal, type android</li>
<li>Wait for the SDK manager window to appear, then go <em>Tools</em> then <em>AVD</em>
</li>
<li>Click <em>New</em> to create an AVD.The next screen will ask you a bunch of questions on the technical details of the AVD that want to create. Fill it up with what is applicable to you (screen resolutions, amount of RAM to dedicate etc)</li>
<li>Launch the AVD when you are done</li>
</ol><p>The AVD is terribly slow. If you are serious about developing android apps, I urge you to invest (even) on a cheap physical android device because the wait time on deployment using an AVD is counter productive and a gross misuse of developer (your) time.</p>
<p>If you will use a physical device for testing, you need to do a few things. Before you connect the device via a USB, check for some settings on the device.</p>
<p>On your device, go to <em>Settings</em> → <em>Applications</em> → <em>Development</em>. You need to <em>enable USB debugging</em></p>
<img class="small" src="/res/article-pix/notes-android/usb-debugging.png"><div id="lst">
Fig 3: Enable USB Debugging in your Phone
</div>

<p>Now you can connect the device to the development machine. The screenshot above was done on a Samsung Galaxy Tab, your device may vary.</p>
<p>The <em>ant debug install</em> command you issued earlier actually is the command to both build and deploy your app to a device — whether that be the AVD or an actual device. At this point, you should be able to find your test app on your phone</p>
<img class="small" src="/res/article-pix/notes-android/hello-deployed.png"><div id="lst">
Fig 4: Deployed app on the phone
</div> 

<hr><h1 id="add-elements-to-the-ui">ADD ELEMENTS TO THE UI</h1>
<p>Now that you've drawn your first blood in Android programming, you should feel more confident in progressing now. We didn't do much programming in the first exercise. All we did was create a project, compiled it and then tested it. We didn't mess with the source file. Now we will.</p>
<p>Create a new project. Use the <em>create project</em> command that you learned earlier. This time, name the project folder and the activity <em>Hello</em>.</p>
<p><code class="codeblock">$ android create project --target 8 path hello --activity Hello --package com.thelogbox </code></p>
<p>This will still be an <em>Activity</em> based project. We use the <em>Activity</em> class because it is the simplest way to create user interfaces. Think of Activity classes like they are <em>Windows</em> or <em>Frames</em> in javax.swing.</p>
<p>After you have created the project, go to your project folder, go to the <em>src</em> directory and drill down to the java source file, you will see the default source code that the Android <em>create project</em> command generated.</p>
<pre><code class="language-java"><span class="comment">// source file: src/com/thelogbox/HelloWorld.java</span>

<span class="keyword">package</span> <span class="namespace">com.thelogbox</span>;

<span class="keyword">import</span> <span class="include">android.app.Activity</span>;
<span class="keyword">import</span> <span class="include">android.os.Bundle</span>;
<span class="keyword">import</span> <span class="include">android.widget.Toast</span>;
<span class="keyword">import</span> <span class="include">android.content.Context</span>;
<span class="keyword">import</span> <span class="include">android.view.View</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloWorld</span> <span class="directive">extends</span> Activity {
    <span class="comment">/** Called when the activity is first created. */</span>

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onCreate(Bundle savedInstanceState) {
        <span class="local-variable">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
}</code></pre>
<div id="lst">
Fig 5: HelloWorld.java
</div>

<p>It is a basic Java class that extended the <em>android.app.Activity</em> class. Take a look at the last statement inside the <code class="codeblock">onCreate()</code> method. That last statement is a directive on where and how to the get the instructions for building the user interface.</p>
<p>The <code class="codeblock">setContentView()</code> is an overloaded method of Activity, it can take various parameter(s) and type. In our example, what was passed as parameter was <em>R.layout.main</em> — it is an integer constant. but don't worry about that now, that is not yet relevant. What is relevant is that the <em>R class</em> was auto-generated by Android — specifically, it was generated by the <code class="codeblock">appt</code>, short for <em>android asset packaging tool</em>.</p>
<p><em>R.layout.main</em> maps to main.xml which can be found on the folder <em>res/layout/main.xml</em>.</p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>
<span class="tag">&lt;TextView</span>  
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Hello World</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>    
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 6: main.xml
</div>


<p>The main node of this XMl file is <em>LinearLayout</em>, this is not always the case, there are a couple of layouts to choose from in Android. We will circle back to this later, but for now, let's use the LinearLayout.</p>
<p>Think of the LinearLayout as the equivalent of <em>java.awt.FlowLayout</em> in JSE. It organizes the widgets by stacking them together linearly, from left to right, then top to bottom.</p>
<p>Inside the main LinearLayout node is the <em>TextView</em> tag. This is the equivalent of <em>java.awt.Label</em> or <em>javax.swing.JLabel</em>. It is a static text widget. You won't be able to edit them, they are simple labels.</p>
<p>The order of how the views are defined in the XML affects the order of how the views are displayed. This is the simplest layout, that is why I chose this as a starting point.</p>
<p>We will add another <em>View component</em> to our screen, an Editable Text. Go back to the editor and insert another view inside the LinearLayout main node.</p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>
    <span class="tag">&lt;TextView</span>  
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Hello World</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>
    <span class="tag">&lt;EditText</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 7: main.xml
</div>

<p><em>EditText</em> is an editable text component that is very similar to javax.swing.JTextField. The android platform knows how to handle the EditText. Once this view has focus, the on-screen keyboard will pop so that the user can begin input. You do not need to handle the popping of the keyboard, it will be done for you automatically.</p>
<p>Once you are done with edits, compile and test the project — <code class="codeblock">$ ant debug install</code></p>
<img class="small" src="/res/article-pix/notes-android/lin-sample-1.png" width="300"><div id="lst">
Fig 8: Your second app
</div>


<h2 class="section">
VERTICAL VS HORIZONTAL LAYOUT
</h2>

<p>The layout seems okay but a little weird. The abels are usually laid out to the left of a text field and not on top. This is happening because the LinearLayout's orientation is <strong>vertical</strong>. That caused the components to flow from top to bottom.</p>
<p>We can change the current behavior so that components inside the layout will flow from left to right. Change the orientation of the layout to <strong>horizontal</strong></p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">horizontal</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>
    <span class="tag">&lt;TextView</span>  
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Hello World</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>
    <span class="tag">&lt;EditText</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 9: A horizontal layout
</div>

<p>Save the project, compile, then run. Notice any difference?</p>
<img class="small" src="/res/article-pix/notes-android/lin-sample-2.png" width="300"><div id="lst">
Fig 10: Second app, modified
</div>

<p>The <em>Name</em> TextView is now immediately to the left of the EditText, as compared to our first version of our layout where the <em>Name</em> TextView was on top of the editable text.</p>
<p>There were two changes that made the second layout possible.</p>
<ol style="list-style-type: decimal">
<li>Change the <em>android:orientation</em> of LinearLayout from "vertical" to "horizontal", this caused TextView and the EditableText views to flow from left to right, rather than top to bottom</li>
<li>Change <em>android:layout_width</em> of the TextView from "fill_parent" to "wrap_content". Had we not made that change, the EditableText view would not have been visible. "Fill_parent" causes the view to occupy whatever space is remaining to right of the component. "Wrap_content" on the other hand, simply uses whatever space the component needs to display itself and allows the next component to occupy the next slot.</li>
</ol><h2 class="section">
HOW TO ADD BUTTONS
</h2>

<p>Button widgets are very common to GUI applications. They allow users to convey action. Let's learn how to add a button to our app.</p>
<p>You will do this by editing <em>main.xml</em> again.</p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="tag">&gt;</span>
    <span class="tag">&lt;TextView</span>  
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Hello World</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>
    <span class="tag">&lt;EditText</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>
    <span class="tag">&lt;Button</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
        <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Click me </span><span class="delimiter">"</span></span>            
    <span class="tag">/&gt;</span>
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 11: main.xml, add a button
</div>


<p>As usual, compile and run. You will do the <em>edit-compile-run</em> routine lots of times, you need to get used to it. Everytime you make a change on your code or any of the assets of the android project, you need to compile and run.</p>
<img class="small" src="/res/article-pix/notes-android/lin-sample-3.png" width="300"><div id="lst">
Fig 12: The second app with a button
</div>

<p>It's not pretty. The app looks this way because the <em>Button, TextView and EditText views</em> are inside a single Layout container, which will arrange each view to flow from left to right. On top of that, the EditText's <em>layout_width</em> is set to <em>wrap_content</em>. That means in case there is a component right after EditText, it will generously give the space to the next view</p>
<p>To fix this, we need to place the <em>Button</em> in it's own container. It cannot share the container with EditText and Textview. After that, the <em>EditText</em> will be the last component defined in the inner <em>LinearLayout</em>. We must change its <em>layout_width</em> to <em>fill_parent</em>, so it can occupy whatever space will be left to its right</p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>

    <span class="tag">&lt;LinearLayout</span>
        <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">horizontal</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>
        <span class="tag">&lt;TextView</span>  
            <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
            <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
            <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Name </span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>

        <span class="tag">&lt;EditText</span>
            <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
            <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
            <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/name</span><span class="delimiter">"</span></span>
        <span class="tag">/&gt;</span>

    <span class="tag">&lt;/LinearLayout&gt;</span>

    <span class="tag">&lt;Button</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
        <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Click me </span><span class="delimiter">"</span></span>            
    <span class="tag">/&gt;</span>

    <span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 13: main.xml
</div>

<img class="small" src="/res/article-pix/notes-android/lin-sample-4.png" width="50%"><div id="lst">
Fig 14: Second app, adjusted layout
</div>


<hr><h1 id="basic-event-handling">BASIC EVENT HANDLING</h1>
<p>Now that you know how add <em>Buttons</em> to Activities, learn how to make something happen when the button is clicked.</p>
<p>There are two ways to handle events in Android programming. You can use the <em>main.xml</em> file to attach the events to a widget, such as a button, or you can programmatically define your Views and programmatically attach events to them — like how did in Core Java Swing Programming.</p>
<p>You may continue to use either one of the first two projects we have created earlier. I will suggest however that you create a new project for this exercise.</p>
<p><code class="codeblock"> $ android create project --path hellotoast --package com.thelogbox --activity TestToast --target 8 </code></p>
<p>Add a <em>Button</em> view to the <em>main.xml</em></p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>
<span class="tag">&lt;TextView</span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
    <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Hello World, TestToast</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>

<span class="tag">&lt;Button</span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Click me okay</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:onClick</span>=<span class="string"><span class="delimiter">"</span><span class="content">showMe</span><span class="delimiter">"</span></span>
<span class="tag">/&gt;</span>

<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 15: main.xml with event declaration
</div>

<p>When the <em>main.xml</em> is expanded by <em>aapt</em>, it will create the necessary java codes for the proper handling of the <em>showMe</em> event which we just declared.</p>
<p><em>showMe</em> is a programmer defined identifier, you can choose whatever name you want in here. On the other hand, <code class="codeblock">android:onClick</code> is not programmer defined, this is a standard attribute of an Android View class (Button is a subclass of View)</p>
<p>We need to define a method called <em>showMe()</em> inside the <em>TestToast</em> activity of the project. The <em>TestToast</em> activity references the <em>.main.xml</em> as the <em>View</em>.</p>
<pre><code class="language-java"><span class="keyword">package</span> <span class="namespace">com.thelogbox</span>;

<span class="keyword">import</span> <span class="include">android.app.Activity</span>;
<span class="keyword">import</span> <span class="include">android.os.Bundle</span>;
<span class="keyword">import</span> <span class="include">android.widget.Toast</span>;
<span class="keyword">import</span> <span class="include">android.content.Context</span>;
<span class="keyword">import</span> <span class="include">android.view.View</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TestToast</span> <span class="directive">extends</span> Activity {

<span class="comment">/** Called when the activity is first created. */</span>

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onCreate(Bundle savedInstanceState) {
        <span class="local-variable">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    <span class="directive">public</span> <span class="type">void</span> showMe(<span class="predefined-type">View</span> v) {
        <span class="predefined-type">Context</span> ctx = getApplicationContext();
        <span class="predefined-type">String</span> msg = <span class="string"><span class="delimiter">"</span><span class="content">Hello World</span><span class="delimiter">"</span></span>;
        <span class="type">int</span> duration = Toast.LENGTH_SHORT;
        Toast notification = Toast.makeText(ctx,msg,duration);
        notification.show();
    }

}</code></pre>
<div id="lst">
Fig 16: TestToast.java
</div>

<p>Compile and run — <code class="codeblock">$ ant debug install</code></p>
<h2 class="section">
REMEMBER
</h2>

<p><em>showMe() method</em> is programmer defined, it could be any other name, as long as it is a valid Java identifier and a valid method.</p>
<p>When you declare an event inside the <em>res/xml</em> file, make sure that a method with the same signature is found on the class that references the xml file as its ContentView — in this case, <em>TestToast</em> references main.xml as its content view. This is why the <em>showMe()</em> method is defined inside the TestToast class.</p>
<h2 class="section">
TOAST NOTIFICATION
</h2> 

<p><em>Toast</em> is a low hanging fruit for simple notifications. It is a built-in view that allows you display simple notifications to the user. These are the pop-up notifications you see on your android device. These notifications simply pops-up then disappears.</p>
<hr><h1 id="database-programming">DATABASE PROGRAMMING</h1>
<p>You know how to create an <em>Activity</em>, how to add UI Views to Activities and how to handle events. Next stop is <em>database programming</em>.</p>
<p>While there exist a class of applications that do not use databases, they are few. It's almost an automatic expectation that a programmer knows how to deal with databases.</p>
<p>We will use the built-in database of Android, <strong>SQLite</strong>. To use this database, we simply need to declare it in our <em>import</em> statements. This db is baked right into Android. There are no third party installs necessary.</p>
<p>If your background in Java database programming is JDBC or Hibernate or something else, there is a slight adjustment you need to make. You won't be able to use JDBC in Android. There is no JDBC in here. Don't worry too much. The SQLite API is not terribly difficult. It won't take you an afternoon to learn the basics.</p>
<h2 class="section">
GOAL OF THE EXERCISE
</h2>

<p>Display a simple form to the user. Let him type anything he wants on a free-form editable UI widget <em>(an EditText)</em>.</p>
<p>Get the runtime value of the <em>EditText</em> and insert it as a record in the database. Afterwhich, read the whole table and display the contents in scrollable, non-editable widget <em>(TextView)</em></p>
<h2 class="section">
CONCEPTS
</h2>

<p>The class <em>SQLiteOpenHelper</em> is the middle-man that stands between your application logic and the database. You will use this to <em>create and upgrade a database</em>. You will also use it to get a handle on a readable database and writable database — think of it as a replacement of the Connection object in JDBC.</p>
<p>Another class used in this example is the <em>SQLiteDatabase</em>. Think of it as the equivalent of the Statement object in JDBC. When you need to perform raw SQL statements, this is the class to use.</p>
<p>Once we have created the database using <em>SQLiteOpenHelper</em> and captured some info from the UI, we need to deal with data retrieval. We need to find a way to get a handle on a readable database, pass a query to it, get the result of the query and save it somewhere else. The <em>Cursor</em> object is what we will use to store the results of the query. In JDBC you might remember this as the <em>ResultSet</em> object.</p>
<p>Once we have a <em>Cursor</em>, we can simply iterate through it to process the contents of the database.</p>
<h2 class="section">
HOW TO DO IT
</h2>

<p>Create a new android project for the purpose of this exerise. Add the appropriate View elements like TextView, EditText and Button.</p>
<p><code class="codeblock">$ android create project --target 15 --activity DbSample --path dbsample --package com.thelogbox</code></p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>

    <span class="tag">&lt;EditText</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/todoedit</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_weight</span>=<span class="string"><span class="delimiter">"</span><span class="content">0</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>

    <span class="tag">&lt;ScrollView</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_weight</span>=<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>

        <span class="tag">&lt;TextView</span>  
            <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
            <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
            <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">I have nothing</span><span class="delimiter">"</span></span>
            <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/tododisplay</span><span class="delimiter">"</span></span>
        <span class="tag">/&gt;</span>
    <span class="tag">&lt;/ScrollView&gt;</span>
    <span class="tag">&lt;Button</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Add item</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/btnadd</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:onClick</span>=<span class="string"><span class="delimiter">"</span><span class="content">recAdd</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_weight</span>=<span class="string"><span class="delimiter">"</span><span class="content">0</span><span class="delimiter">"</span></span>
<span class="tag">/&gt;</span>
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 17: main.xml generated by the project
</div>

<p>The <em>TextView</em> component is embedded in a <em>ScrollView</em> component so that we can scroll through the contents of the TextView. The ScrollView acts like a viewport. We also used <em>weight</em> property of the layout so that our viewport is given the most screen real-estate. See the note on <a href="/android-layout-weights">how to use weights to maximize screen space</a></p>
<p>The <em>Button's</em> onClick property is a method called <code class="codeblock">recAdd</code> which we need to define inside the Activity class.</p>
<h2 class="section">
THE SQLiteOpenHelper CLASS
</h2>

<p>Create a class that extends the <code class="codeblock">SQLiteOpenHelper</code></p>
<pre><code class="language-java"><span class="comment">// SQLiteOpenHelper .java</span>

<span class="keyword">package</span> <span class="namespace">com.thelogbox</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">android.provider.BaseColumns._ID</span>;
<span class="keyword">import</span> <span class="include">android.content.Context</span>;
<span class="keyword">import</span> <span class="include">android.database.sqlite.SQLiteDatabase</span>;
<span class="keyword">import</span> <span class="include">android.database.sqlite.SQLiteOpenHelper</span>;


<span class="directive">public</span> <span class="type">class</span> <span class="class">DbHelper</span> <span class="directive">extends</span> SQLiteOpenHelper {

    <span class="predefined-type">String</span> sqlcreate = <span class="string"><span class="delimiter">"</span><span class="content">CREATE TABLE todo( </span><span class="delimiter">"</span></span> + _ID  + <span class="string"><span class="delimiter">"</span><span class="content"> INTEGER PRIMARY KEY AUTOINCREMENT, item TEXT);</span><span class="delimiter">"</span></span>;


    <span class="directive">public</span> DbHelper(<span class="predefined-type">Context</span> ctx) {
        <span class="local-variable">super</span>(ctx,<span class="string"><span class="delimiter">"</span><span class="content">tododb.db</span><span class="delimiter">"</span></span>,<span class="predefined-constant">null</span>, <span class="integer">1</span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onCreate(SQLiteDatabase db) {
        db.execSQL(sqlcreate);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onUpgrade(SQLiteDatabase db, <span class="type">int</span> oldversion, <span class="type">int</span> newversion) {
        db.execSQL(<span class="string"><span class="delimiter">"</span><span class="content">DROP TABLE IF EXISTS tododb.db</span><span class="delimiter">"</span></span>);
        onCreate(db);
    }

}</code></pre>
<div id="lst">
Fig 18: SQLiteOpenHelper source
</div>

<p>You need to do <strong>3 things</strong> at a minimum when defining a SQLiteOpenHelper.</p>
<p><em>First. Define a public constructor that accepts a Context object.</em> This context is the context of the <em>Activity</em> class where you will instantiate the Helper class. Call the super constructor so that you don't break the chain. The first parameter to super constructor is the <em>context object</em> — you know this already, next parameter is the name of database you want to create; third parameter is a cursor factory, you can ignore this for now, that is why I passed <em>null</em> to it.</p>
<p>The last parameter is an integer value which stands for the database version. I placed one (1) because it is my first version of this database. When you revise the schema of the database, increase this value by one so that the <em>onUpgrade()</em> method kicks in---it will perform some sort of an ALTER database command in your behalf.</p>
<p><em>Second, override the onCreate() method</em>. This is where you can execute DDL (SQL Data Definition) commands against the database.</p>
<p><em>Third, Override the onUpgrade() method,</em> even if you won't need it yet. You won't be able to compile unless you override this method</p>
<h2 class="section">
HOW TO USE SQLiteOpenHelper
</h2>


<p>We will use an instance of the <code class="codeblock">SQLiteOpenHelper</code> for reading and writing to the database</p>
<pre><code class="language-java"><span class="comment">// Activity .java}</span>

<span class="keyword">package</span> <span class="namespace">com.thelogbox</span>;

<span class="keyword">import</span> <span class="include">android.app.Activity</span>;
<span class="keyword">import</span> <span class="include">android.os.Bundle</span>;
<span class="keyword">import</span> <span class="include">android.view.View</span>;
<span class="keyword">import</span> <span class="include">android.content.Context</span>; 
<span class="keyword">import</span> <span class="include">com.thelogbox.DbHelper</span>;
<span class="keyword">import</span> <span class="include">android.content.ContentValues</span>;
<span class="keyword">import</span> <span class="include">android.database.sqlite.SQLiteDatabase</span>;
<span class="keyword">import</span> <span class="include">android.database.Cursor</span>;
<span class="keyword">import</span> <span class="include">android.widget.TextView</span>;
<span class="keyword">import</span> <span class="include">android.widget.EditText</span>;


<span class="directive">public</span> <span class="type">class</span> <span class="class">DbSample</span> <span class="directive">extends</span> Activity {


    DbHelper dh;
    SQLiteDatabase dbwrite;
    SQLiteDatabase dbread;

    EditText input;
    TextView output;


   <span class="comment">/** Called when the activity is first created. */</span>
   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> onCreate(Bundle savedInstanceState) {

        dh = <span class="keyword">new</span> DbHelper(getApplicationContext());
        dbwrite = dh.getWritableDatabase();
        dbread = dh.getReadableDatabase();

        <span class="comment">// you cannot put the findViewById here, it causes errors</span>

        <span class="local-variable">super</span>.onCreate(savedInstanceState);
      setContentView(R.layout.main);
    }


    <span class="directive">public</span> <span class="type">void</span> recAdd(<span class="predefined-type">View</span> v) {

        input = (EditText) findViewById(R.id.todoedit);
        output = (TextView) findViewById(R.id.tododisplay);

        <span class="predefined-type">String</span> itemtoadd = input.getText().toString();      

        ContentValues cv = <span class="keyword">new</span> ContentValues();
        cv.put(<span class="string"><span class="delimiter">"</span><span class="content">item</span><span class="delimiter">"</span></span>, itemtoadd);
        dbwrite.insertOrThrow(<span class="string"><span class="delimiter">"</span><span class="content">todo</span><span class="delimiter">"</span></span>,<span class="predefined-constant">null</span>,cv);

        <span class="predefined-type">String</span> temptext = (<span class="predefined-type">String</span>) output.getText();

        <span class="comment">//Write the dbExtraction routine here</span>

        <span class="comment">//temptext = temptext + "\n";</span>
        output.setText(getTodos());

    }

    <span class="directive">private</span> <span class="predefined-type">String</span> getTodos() {

        <span class="predefined-type">String</span> cols<span class="type">[]</span> = {<span class="string"><span class="delimiter">"</span><span class="content">item</span><span class="delimiter">"</span></span>};
        <span class="predefined-type">StringBuilder</span> sb = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>(<span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span>);
        <span class="predefined-type">Cursor</span> cursor = dbread.query(<span class="string"><span class="delimiter">"</span><span class="content">todo</span><span class="delimiter">"</span></span>,cols,<span class="predefined-constant">null</span>,<span class="predefined-constant">null</span>,<span class="predefined-constant">null</span>,<span class="predefined-constant">null</span>,<span class="string"><span class="delimiter">"</span><span class="content">item</span><span class="delimiter">"</span></span>);
        startManagingCursor(cursor);

        <span class="keyword">while</span>(cursor.moveToNext()) {
            sb.append(cursor.getString(<span class="integer">0</span>));
            sb.append(<span class="string"><span class="delimiter">"</span><span class="char">\n</span><span class="delimiter">"</span></span>);
        }
        <span class="keyword">return</span> sb.toString();
    }
}</code></pre>
<div id="lst">
Fig 19: main Activity class
</div> 

<p>The <em>DBSample</em> class is a regular <em>Activity</em> class. It's bad coding practice to embed the database logic in the UI, but were just starting out to learn about database programming in Android, we will let it pass for now. If we partition this app properly and use the nice design patterns, we will have more code to deal with (and to understand).</p>
<p>We instantiated the DbHelper class so that we can create the database during our first run of this app. We also used the DbHelper to create 2 SQLiteDatabase objects, one for reading (dbread) and another for writing (dbwrite).</p>
<p>The <code class="codeblock">recAdd</code> method starts out by getting the object references to the EditText and TextView components, todoedit and tododisplay respectively.</p>
<p>Once we extracted whatever the user typed inside the EditText via <code class="codeblock">getText()</code> method, we stored it inside <em>itemtoadd</em> String variable.</p>
<p>The <code class="codeblock">ContentValues</code> object is some sort of a Dictionary data structure (key value pair), this data structure is required by the <em>insert</em> method of the SQLiteDatabase object, that is why we used it to wrap the string data we got from the EditText. You don't have to use the <code class="codeblock">insertOrThrow</code> method if you don't want to, you can insert a record to the database using raw SQL. If you pass an <em>INSERT INTO todo …</em> inside an <code class="codeblock">execSQL</code> method, that will do the job just as well.</p>
<p>Compile and Test the project — <code class="codeblock">ant debug install</code>. The <em>codeonCreate()</em> method of DbHelper should kick in the first time your app issues a db related command.</p>
<hr><h1 id="layout-weights">LAYOUT WEIGHTS</h1>
<p>Learning to layout vertically and horizontally are basic skills in UI programming. They are effective and good enough, but that's just the thing, they are just good enough. If you want to show a bit of finesse, you need to do something beyond the basics.</p>
<p>Linear layouts will do exactly what the name implies. It will layout the Views linearly. What it will not do is resize the Views to take advantage of free space. If you do not manage free space in your layout, the design will not appear tight, and a bit, well, amateurish.</p>
<p>There is one easy thing that if you do, will add a bit of finesse to the UI design. That one thing is to add <em>layout weights</em> to the Views.</p>
<h2 class="section">
START WITH A BASIC UI WITHOUT LAYOUT
</h2>

<p>Create an <em>Activity based</em> project for this example. Use the default vertical linear layout and add an <em>EditText, TextView and Button</em> components</p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>

    <span class="tag">&lt;EditText</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/todoedit</span><span class="delimiter">"</span></span>

    <span class="tag">/&gt;</span>

    <span class="tag">&lt;TextView</span>  
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
        <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">I have nothing</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/tododisplay</span><span class="delimiter">"</span></span>

    <span class="tag">/&gt;</span>

    <span class="tag">&lt;Button</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Add item</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/btnadd</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:onClick</span>=<span class="string"><span class="delimiter">"</span><span class="content">recAdd</span><span class="delimiter">"</span></span>

<span class="tag">/&gt;</span>
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 20: Default Linear Layout
</div>

<img class="small" src="/res/article-pix/notes-android/layout-no-weight.png" width="50%"><div id="lst">
Fig 21: What Fig 20 looks like in screen
</div>

<p>This design suffers from a couple of problems. The vertical space for the <em>TextView</em> is lacking. If the application intends to display multiple lines on the <em>TextView</em> to let users type up inputs and append the results to TextView, then the TextView should have more vertical space than either the <em>Button</em> or the <em>EditText</em>.</p>
<p>We can increase the space occupied by the <em>TextView</em> by increasing the number of lines it will occupy. It can be done by adding a statement like <em>android:lines="10"</em> or any number of lines to the TextView declaration. That approach however, have some setbacks, it might work for a 5" screen device but you might need to tweak the number of lines if the app is deployed on another device with a different screen size. Specifying absolute values is a dangerous thing to do in UI design. You just don't know the form factor of the device where you will app will run.</p>
<h2 class="section">
HOW TO USE LAYOUT WEIGHTS
</h2>

<p>Each <em>View</em> component can be assigned a <em>weight property</em>. You can specify the amount of remaining space that the component can occupy relative to the amount of space that the other components are occupying.</p>
<p>Think of the weight approach as pie chart. If there 3 components in the UI, I can try to allocate percentages to each component. The percentages represents the amount of screen real-estate to be allocated.</p>
<pre><code>#xml
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    &gt;

    &lt;EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@+id/todoedit"
        android:layout_weight="0"
    /&gt;

    &lt;TextView  
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="I have nothing"
        android:id="@+id/tododisplay"
        android:layout_weight="10"
    /&gt;

    &lt;Button
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Add item"
        android:id="@+id/btnadd"
        android:onClick="recAdd"
        android:layout_weight="0"
/&gt;
&lt;/LinearLayout&gt;</code></pre>
<div id="lst">
Fig 22: LinearLayout with weights
</div>

<img class="small" src="/res/article-pix/notes-android/layout-weight.png" width="50%"><div id="lst">
Fig 23: How it looks with layout weights
</div>

<h2 class="section">
REMEMBER
</h2>

<p>Use the weight property of the view to allocate the amount of screen real estate for it.</p>
<p>The weight of all the views will be summed up. If you have 3 views and you gave them all equal weights of 10, it is as good as assigning them equal weights of 1 or 0. The integer value does not matter, it is the proportion of each view relative to its sibling views.</p>
<p>You can only use the <em>weight property</em> on a <strong>LinearLayout</strong>. The other layouts will have their own acrobatics to position views in relation to its sibling views and the frame</p>
<hr><h1 id="scrolling-multiline-text">SCROLLING MULTILINE TEXT</h1>
<p>Some of the times, you will need to display multiple lines of text that will exceed the height of visible display. You will need to scroll.</p>
<p>For example, if you read something from a datasource, a file or a database and display its contents, chances are the number of lines of the datasource will be greater than the height of View component.</p>
<p>To deal with this challenge, you can wrap an <em>EditText</em> inside a <em>ScrollView</em> component. The ScrollView will act as a viewport to textual content of the EditText.</p>
<pre class="sourceCode java" id="xml"><code class="sourceCode java">&lt;?xml version=<span class="st">"1.0"</span> encoding=<span class="st">"utf-8"</span>?&gt;
&lt;LinearLayout xmlns:android=<span class="st">"http://schemas.android.com/apk/res/android"</span>
    android:orientation=<span class="st">"vertical"</span>
    android:layout_width=<span class="st">"fill_parent"</span>
    android:layout_height=<span class="st">"fill_parent"</span>
    &gt;

    &lt;EditText
        android:layout_width=<span class="st">"fill_parent"</span>
        android:layout_height=<span class="st">"wrap_content"</span>
        android:id=<span class="st">"@+id/todoedit"</span>
        android:layout_weight=<span class="st">"0"</span>
    /&gt;

    &lt;ScrollView
        android:layout_width=<span class="st">"fill_parent"</span>
        android:layout_height=<span class="st">"wrap_content"</span>
        android:layout_weight=<span class="st">"10"</span>
    &gt;

        &lt;TextView  
            android:layout_width=<span class="st">"fill_parent"</span> 
            android:layout_height=<span class="st">"wrap_content"</span> 
            android:text=<span class="st">"I have nothing"</span>
            android:id=<span class="st">"@+id/tododisplay"</span>
        /&gt;
    &lt;/ScrollView&gt;
    &lt;Button
        android:layout_width=<span class="st">"fill_parent"</span>
        android:layout_height=<span class="st">"wrap_content"</span>
        android:text=<span class="st">"Add item"</span>
        android:id=<span class="st">"@+id/btnadd"</span>
        android:onClick=<span class="st">"recAdd"</span>
        android:layout_weight=<span class="st">"0"</span>
/&gt;
&lt;/LinearLayout&gt;</code></pre>
<div id="lst">
Fig 25: How to use a ScrollView
</div>


<hr><h1 id="advanced-event-handling">ADVANCED EVENT HANDLING</h1>
<p>You already know how handle events declaratively. You use the XML to declare the handler for a <em>View</em>, e.g. a Button. This works well and is quite friendly for beginning Android programmers but they have some setbacks. There are other events like long-clicks, context-menus, touch and others that really needs to be handled programmatically. That is why we need to learn the other way of handling events.</p>
<p>We will do event handling without the XML. All the event handling codes will be in the Java source file. We need to know how to work with <em>Listeners</em></p>
<h2 class="section">
INPUT EVENTS OF ANDROID
</h2>

<p>Input events from the user are almost always triggered when the user touches widgets, like Buttons, TextViews etc. These widgets extends the <em>android.view.View</em> class, either directly or indirectly. This is why it is helpful to be aware of the <em>View</em> class's built-in <em>Listeners</em>.</p>
<p>A <em>Listener</em> is a special object designated by Android. It contains callback methods which the Android runtime invokes when a specific event happens. If you want to intercept the <em>click</em> event for example, you need to create a <em>Listener</em> object that was specifically designed to listen for click events — that would be <em>android.view.View.OnClickListener</em>.</p>
<p>The <em>OnClickListener</em> is implemented as a nested class inside android.view.View. There are many Listener interfaces that nested inside the View class, you can refer to the <a href="http://developer.android.com/reference/android/view/package-summary.html">android.developer/documentation</a> for the details.</p>
<p>User input like a long-click, should be handled using the <strong>android.view.View.OnLongClickListener</strong>, if the user pops up the keyboard and you want to intercept the keystrokes -- you use the <em>OnKeyListener</em>; you get the idea by now. Go through the official documentation that was pointed earlier if you need to go through deeper details of the API.</p>
<h2 class="section">
PROGRAMMATIC EVENT HANDLING
</h2>

<p>To handle a click event, you need to create a listener object, it will be a subclass of <em>View.OnClickListener</em> then register the widget of interest (a Button probably) to the listener. This is how the Android runtime will know that when a click happens to the Button, the runtime needs to invoke (to callback) the <em>public void onClick()</em> method.</p>
<p>I suggest that you crate an <em>Activity</em> based project to do this example.</p>
<pre id="java"><code>import android.view.View.OnClickListener;

class MyActivity extends Activity {

  // other setup codes here 

  @Override
  public void onCreate(Bundle sinstance) {

    super.onCreate(sinstance);
    button = new Button(getApplicationContext()); 

    OnClickListener listener = new OnClickListener(){

      public void(View view) {

        // your code for click here

      }
    } 
    button.setOnClickListener(listener);
  }
}</code></pre>
<div id="lst">
Fig 26: How to setup Listeners
</div>

<p>The example code on <em>Fig 26</em> is not the only way to create listener. You can implement the <em>Listener</em> on the <em>Activity class</em> as well, it may be more efficient that way because you can avoid the performance hit of the extra class loading which was caused by the inner class implementation.</p>
<p>The samples above should get you started on event programming, but let's take on another sample, this time, the long-click event.</p>
<pre id="java"><code>import android.view.View.OnLongClickListener;

class MyActivity extends Activity implements OnLongClickListener {
  public void onCreate(Bundle b) {
    super.onCreate(b);
    button = new Button(getApplicationContext());
    button.setOnLongClickListener(this);
  }

  public boolean onLongClick(View v) {
    // your code when user long clicks
    return true;
  }
}</code></pre>
<div id="lst">
Fig 27: How to handle the Long Click
</div>

<p>The long click <em>Listener's</em> method is not identical to the void signature of the <em>click</em> event. It requires that you return a boolean value so Android runtime knows if the long click has already been handled (consumed) or not. Read and study the definitions of the events on the API documentation carefully.</p>
<hr><h1 id="basic-debugging">BASIC DEBUGGING</h1>
<p>This section is not about some spiffy tool that lets put breakpoints in your IDE or something that allows you to step through your code line-by-line. Nothing like that. This is about how to use a crude and old technique of debugging. Outputting something into your screen at specific points in the code.</p>
<p>In Core Java, you can simply use the <code class="codeblock">println()</code> method of <em>System.out</em>. — well, that works a little differently in Android.</p>
<p>You can still write <code class="codeblock">System.out.println</code> in your code but it won't show up on the Android screen. The target of <em>println</em> is the stdout, hence it will show up on your <em>android debugger session (adb)</em> and not the Android device or emulator. Also, instead of using <em>println</em>, use the <strong>Log</strong> class instead if you need to insert some debugging info on your app.</p>
<pre id="java"><code>import android.util.Log;

public class MyAndroidApp extends Activity {

  private final String TAG = getClass().getName();

    ....

    public void someCallBack() {
      Log.v(TAG, "string to log");
    }

    public void someMethod() {
      Log.v(TAG, "string to log");
    }
}</code></pre>
<div id="lst">
Fig 28: How to use the Log class
</div>

<p>On a terminal window, run <code class="codeblock">adb logcat</code>. The logcat utility supports a couple of flags. Here's how you might use them</p>
<p><code class="codeblock">adb logcat</code> — Prints everything that happens to the device, on the screen. You probably don’t want this</p>
<p><code class="codeblock">adb logcat* -S</code> — Direct opposite of adb logcat, this is very silent, you won’t see anything (meaningful)</p>
<p><code class="codeblock">adb logcat -s <filter></filter></code> — filters the output messages that matches the TAG name</p>
<p>Okay. Now lets it on the <em>callbacks</em> of the Activity class.</p>
<pre id="java"><code>package com.thelogbox;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.LinearLayout;


class LCycleView extends LinearLayout implements View.OnClickListener {

  LCycleView(Context ctx) {
    super(ctx);
    setOnClickListener(this);
  }

  public void onClick(View view) {
    System.out.println("Clicked");
  }
}

public class LCycle extends Activity {
    /** Called when the activity is first created. */

  String TAG = getClass().getName();

  @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new LCycleView(this));
    Log.v(TAG, "onCreate");
    }

  @Override
  public void onResume() {
    super.onResume();
    Log.v(TAG, "onResume");
  }    

  @Override
  public void onRestart() {
    super.onRestart();
    Log.v(TAG, "Restart");
  }

  @Override
  public void onPause() {
    super.onPause();
    Log.v(TAG, "Paused");
  }

  @Override
  public void onStop() {
    super.onStop();
    Log.v(TAG, "Stoppped");
  }

  @Override 
  public void onDestroy(){
    super.onDestroy();
    Log.v(TAG, "Destroy");
  }
}
</code></pre>
<div id="lst">
Fig 29: The callbacks of Activity Class
</div>

<p>The above code is one of the few examples an Android developer might spike while beginning to explore Android programming. After reading all about lifecycle of the Activity class, of course you want to know when the events will actually be fired.</p>
<p>If you simply type <code class="codeblock">adb logcat</code>, everything that an application does (and the operating system) will be displayed on the screen, it will also scroll very fast because there are lots of things that the Android operating system is doing.</p>
<p>If you want to see only the logs associated with your app, type <code class="codeblock">adb logcat -s com.thelogbox.LCycle</code>.</p>
	  </div>
		<p/>



    <!-- Start of StatCounter Code for Default Guide -->
	
  <script type="text/javascript">
  var sc_project=7827488; 
  var sc_invisible=1; 
  var sc_security="069357c9"; 
  </script>
  <script type="text/javascript"
      src="http://www.statcounter.com/counter/counter.js"></script>
  <noscript><div class="statcounter"><a title="customizable
      counter" href="http://statcounter.com/free-hit-counter/"
      target="_blank"><img class="statcounter"
      src="http://c.statcounter.com/7827488/0/069357c9/1/"
      alt="customizable counter"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
   
    
<!--
<p/></p><p/></p>
<strong>For discussions,</strong> please use <a href="https://groups.google.com/group/thelogbox">theLogBox Google Group</a>. Follow me on <a href="https://twitter.com/thelogbox">Twitter</a> or <a href="https://facebook.com/thelogbox.dev">Facebook.com/thelogbox.dev</a>

-->

<div id="mc_embed_signup">
<form action="http://thelogbox.us5.list-manage.com/subscribe/post?u=ccf5609c10396fa44241f5400&amp;id=0117706770" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
	
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="To get our updates, enter your email here" required>
<div class="clear">  
  <input type="submit" value="Subscribe"
  name="subscribe" id="mc-embedded-subscribe"
  class="button">
</div>
</form>
</div>

    <footer>
      &copy 2009-2013 theLogBox.com 

    </foter>

    </div>
  </body>

</html>
