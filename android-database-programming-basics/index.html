<!DOCTYPE HTML>
<html lang="en">
  <head>
		<style>

* {
  font-size: 16px;
  background: #FFFFFF;
  color: #545454;
}

ul, ol, li, p {
  font-family: Arial ;
  line-height: 160%;
}

em {
  font-family: Georgia;
  color: #41505d;
}

strong {
  color: #000000;
}

img {
  display:block;
  margin-left: auto;
  margin-right: auto;
  width: 100%;
}
  img.shadow {
    display:block;
    margin-left: auto;
    margin-right: auto;
    width: 85%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;
    margin-top: 40px;
    margin-bottom: 40px;
  } 
  img.small {
    width: 40%;
    -moz-box-shadow: -5px 0 35px 10px #888;
    -webkit-box-shadow: -5px 0 35px 10px #888;
    box-shadow: -5px 0 35px 10px #888;
    margin-top: 40px;
    margin-bottom: 40px;
  }
  img.default {
    width: inherit;
  }
  

#shock-left {
  font-family: 'Rokkitt';
  font-weight:normal;
  letter-spacing: -1.5px;
  color: #61768a;
  text-align: center;
  width: 100%;
  float:left;
  height: 5em;
  padding-top:10px;
  margin-top:50px;
}

  #shock-left a:link, #shock-left a:visited {
    font-size: 45px;
    color: #61768a;
    border-bottom: 2px dotted #61768a;
  }
  #shock-left a:hover {
    color: #61768a;
    border-bottom: 2px solid #61768a;;
  }

  #shock-right {
    padding-top:70px;
    font-size: 85px;
    font-family: 'Rokkitt';
    font-weight:normal;
    letter-spacing: -1.5px;
    line-height: -.7em;
    color: #61768a;
    text-align:center;
  }

/*
#shock-right {
  font-size: 350%;
  font-weight:bold;
  letter-spacing: -1.5px;
  color: #004646;
  float: right;
  height: 250px;
  width:40%;
  padding-top:30px;
  text-align: right;
  margin-right:50px;
}
*/
  
body {
  font-family: Arial;
  width: 85%;
  margin-left: auto;
  margin-right: auto;
}

header {
  height:4.5em;
  margin-top:10px;
  border-bottom:0px dotted #009494;
}

#navleft, #navright {font-family: 'Rokkitt';}
#navleft a:link, #navleft a:visited {
  font-size: 22px;
  color: #CACACA;
  float:left;
  font-weight:normal;
  margin-left:0px;
}
  #navleft a:hover {
    color: #61768a;
    border-bottom: 0px solid #61768a;
  }

#navright a:link, #navright a:visited {
  font-size: 22px;
  padding-left:5px;
  padding-right:5px;
  float:right;
  color: #CACACA;
  text-decoration:none;
}

  #navright a:hover {
    color: #61768a;
    border-bottom:0px solid #DEDEDE;
  }

  .currentdir {
    font-family: 'Rokkitt';
    font-size: 22px;
    color: #000000;
    padding: 3px;
  }  

#spacer {clear:both;margin-bottom:50px;}

#inner {

}
footer {
  font-size: 120%;
  text-align: center;
  clear:both;
  display:block;
  font-size: 90%;
  margin-top: 100px;
  margin-bottom: 30px;
}

/* Headings and Titles */

#trainingtitle {
  font-family: 'Rokkitt';
  color: #61768a;
  font-size: 350%;
  font-weight: normal;
  text-align: left;
  padding-top: 20px;
}

#articletitle {
  font-family: 'Rokkitt';
  font-size:50px; 
  font-weight: normal;
  color: #61768a;
  margin-top:20px;
  text-align: center;
  letter-spacing: -1px;
}

h2, h3, h4, h5 {
  font-family: Arial;
  /*color: #61768a;*/
  color: #373737; 
  font-weight:normal;
}
h1 {
  font-family:'Tauri'; 
  font-size: 200%;
  letter-spacing: -1px;
}
h2 {font-size: 140%;}
  h2.section { border-bottom: 1px solid #CACACA;}
h3 {font-size: 120%;}
h4 {font-size: 110%;}

/* LINKS */

a:link, a:visited {
  /*color: #004a94;
  color: #0778e4;*/
  color: #b30000;
  text-decoration: none;
}

a:hover {
  color: #0072e3;
  border-bottom: 1px solid #0072e3;
}

hr {
  background: #61781a;
  color: #61781a;
  border: 3px solid #DEDEDE;
}

/* OTHER BLOCKS */

#minitoc {

  color: #4E4E4E;
  width: 35%;
  float: right;
  margin-left:30px;
  
  margin-bottom:30px;
  padding-top: 10px;
  padding-bottom:20px;
  border: 3px solid #E8E8E8;  
  padding-left:10px;
  padding-right:20px;
    
  line-height:20px;   
}

#contentmeta {
  font-family: 'Rokkitt';
  font-style: normal;
  color: gray;
  text-align: left;
  margin-bottom:40px;
  text-align: center;
}

#sidebarright {
  float: right;
  width:300px;
  /* background: #FFFFC8; */
  border: 1px solid #FFA500;
  padding: 20px;
  margin-left: 20px;
}

/* MAIL CHIMP CSS*/

#mce-EMAIL {
  font-size: 20px;
  letter-spacing: -1px;
  color: #000000;
  width: 60%;
  background: #FFFFF6;
  border:3px solid #000000;
  margin-bottom: 10px;
  padding-top: 10px;
  padding-bottom: 10px;
  padding-left: 20px;
  height: 15px;
  text-align:center;
}

#mc-embedded-subscribe {
  font-family: Arial;
  background: #000000;
  color: #FFFFFF;
  padding: 10px 15px;
  -webkit-border-radius: 4px;
  -moz-border-radius: 4px;
  border-radius: 4px;
  cursor: pointer;
  text-align: center;
  width: 200px;
  border: 0px;
  font-size: 25px;
}

#mc-embedded-subscribe:hover {
  background: #0072e3;
}  

#mc_embed_signup {
  border: 0px solid #618a8a ;
  margin-top: 50px;
  padding-top: 0px;
  padding-bottom: 20px;
  padding-left: 0px;
  text-align: center;
}

/* MAIL CHIMP CSS*/

/* PRE AND CODE AREA */

#lst {  
  font-family: Georgia;
  font-size: 16px;
  text-align: center;
  margin: 15px;
  color: #000000;
}

pre {

  margin-top: 15px;
  margin-bottom:0px;

  padding: 10px 5px 10px 15px;
  
  /*font-size: .87em;*/
  font-size: 14px;
  font-family: 'Muli';
  background: #e8ebef;
  line-height: 130%;
  white-space: pre-wrap;
  
  /*
  border: 1px solid #DEDEDE;
  background: #FBFCF9; 
  */
  /*
  border: 1px solid #DEDEDE;
  background: #F5F5F5;
  color: #000;

  -moz-border-radius: 10px;
  -webkit-border-radius: 10px;  
  border-radius: 10px;
  */

}

pre.codeblock, .codeblock {
  
  font-family: 'Muli';
  font-size: 15px;
  color: #0000b3;
  background: #FFFFFF;
  padding:0px;
  margin: 0px;
}


pre code, .keyword, .directive, .type, 
          .string, .function, .class, 
          .reserved, .content, .comment, 
          .predefined-type, .preprocessor, .tag,
          .attribute-name, .include, .predefined-constant, 
          .local-variable, .key, .class, .instance-variable,
          .symbol, .constant, .inline, .line-numbers,
          .integer, .char, .float, .annotation, .namespace, 
          .content, .delimiter, .st, .sourceCode, .exception,
          .class-variable, .doctype{

      font-family: 'Muli';
      /*font-size: 1em;*/
      font-size: 14px;
      background: #e8ebef; 
      color: #000000;
      line-height: 130%;

}

/* definition of styles for code highlighting */

/*
.keyword, .key, .directive, .type, .reserved, .predefined-type, .tag, .class {
  color: #6e6eFF;
}

.predefined-constant {
  color: gray;
}

.line-numbers {

  font-size: 70%;
  padding-right: 10px;
  color: #8E8E8E;
  font-family: 'Source Code Pro', Courier, "Courier New", monospace;
}

.include, .preprocessor, .attribute-name {
  color: #CD7300;
}

.string {
  color: #6C0000;
}

.comment {
  color: : gray;
}

.function, .class  {
  color: #2828A8;
}

.local-variable {
  color: blue;
}

*/
</style>
		<!--

<link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>

-->

<meta charset="utf-8">
<title>Android Database Programming basics: theLogBox.com</title>

<link href='http://fonts.googleapis.com/css?family=Rokkitt' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Muli' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Tauri' rel='stylesheet' type='text/css'>

<!--
<link rel="stylesheet" type="text/css" href="/style.css" media="screen">
-->



		<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-38198657-1']);
  _gaq.push(['_setDomainName', 'thelogbox.com']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>	
  </head>
  <body>

    <div id="main" itemscope itemtype="http://schema.org/Article">

	  <header>
      
<div id='navleft'>
<a href='/'><span class="currentdir">theLogBox</a>
</div>

<div id='navright'>
  <a href='/courses/'>courses</a> &nbsp;&nbsp;
  <a href='/blog/'>blog</a> &nbsp;&nbsp;
  <a href='/tutorials/'>tutorials</a>
</div>
    </header>

	  <div id="articletitle" itemprop="headline">Android Database Programming basics</div>  
    <div id='contentmeta'>
by: 

<a href="https://plus.google.com/u/0/100317694679641558339?rel=author">
  Ted Hagos
</a> on 

<span itemprop="dateCreated"> 22.Jul.2012 </span>
</div>  

	  <div itemprop="articleBody">
      <p>Database programming is probably the one of the most common programming task. Even entertainment oriented applications has a need for a database backend. The Android platform has a database library and runtime. That's <strong>SQLite3</strong>. This database is baked right into Android. There is no need for a separate installation activity.</p>
<p>If your background in Java database programming is JDBC or Hibernate or something else, there is a slight adjustment you need to make. You won't be able to use JDBC in Android. There is no JDBC in here. Don't worry too much. The SQLite3 API is not terribly difficult. It won't take you an afternoon to learn the basics.</p>
<hr><h1 id="our-simple-use-case">OUR SIMPLE USE CASE</h1>
<p>Display a simple form to the user. Let him type anything he wants on a free-form editable UI widget <em>(an EditText)</em>.</p>
<p>Get the runtime value of the <em>EditText</em> and insert it as a record in the database. Afterwhich, read the whole table and display the contents in scrollable, non-editable widget <em>(TextView)</em></p>
<hr><h1 id="concepts">CONCEPTS</h1>
<p>The class <em>SQLiteOpenHelper</em> is the middle-man that stands between your application logic and the database. You will use this to <em>create and upgrade a database</em>. You will also use it to get a handle on a readable database and writable database — think of it as a replacement of the Connection object in JDBC.</p>
<p>Another class used in this example is the <em>SQLiteDatabase</em>. Think of it as the equivalent of the Statement object in JDBC. When you need to perform raw SQL statements, this is the class to use.</p>
<p>Once we have created the database using <em>SQLiteOpenHelper</em> and captured some info from the UI, we need to deal with data retrieval. We need to find a way to get a handle on a readable database, pass a query to it, get the result of the query and save it somewhere else. The <em>Cursor</em> object is what we will use to store the results of the query. In JDBC you might remember this as the <em>ResultSet</em> object.</p>
<p>Once we have a <em>Cursor</em>, we can simply iterate through it to process the contents of the database.</p>
<hr><h1 id="how-to-do-it">HOW TO DO IT</h1>
<p><strong>CREATE AN ANDROID PROJECT</strong>. and add the appropriate UI elements such as TextView, EditText and Button — <code class="codeblock">$ android create project --target 15 --activity DbSample --path dbsample --package com.thelogbox</code></p>
<p><strong>COMPOSE THE UI</strong>. Edit the file <em>res/layout/main.xml</em></p>
<pre><code class="language-xml"><span class="preprocessor">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="tag">&lt;LinearLayout</span> <span class="attribute-name">xmlns:android</span>=<span class="string"><span class="delimiter">"</span><span class="content">http://schemas.android.com/apk/res/android</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:orientation</span>=<span class="string"><span class="delimiter">"</span><span class="content">vertical</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>

    <span class="tag">&lt;EditText</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/todoedit</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_weight</span>=<span class="string"><span class="delimiter">"</span><span class="content">0</span><span class="delimiter">"</span></span>
    <span class="tag">/&gt;</span>

    <span class="tag">&lt;ScrollView</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_weight</span>=<span class="string"><span class="delimiter">"</span><span class="content">10</span><span class="delimiter">"</span></span>
    <span class="tag">&gt;</span>

        <span class="tag">&lt;TextView</span>  
            <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span> 
            <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span> 
            <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">I have nothing</span><span class="delimiter">"</span></span>
            <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/tododisplay</span><span class="delimiter">"</span></span>
        <span class="tag">/&gt;</span>
    <span class="tag">&lt;/ScrollView&gt;</span>
    <span class="tag">&lt;Button</span>
        <span class="attribute-name">android:layout_width</span>=<span class="string"><span class="delimiter">"</span><span class="content">fill_parent</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_height</span>=<span class="string"><span class="delimiter">"</span><span class="content">wrap_content</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:text</span>=<span class="string"><span class="delimiter">"</span><span class="content">Add item</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:id</span>=<span class="string"><span class="delimiter">"</span><span class="content">@+id/btnadd</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:onClick</span>=<span class="string"><span class="delimiter">"</span><span class="content">recAdd</span><span class="delimiter">"</span></span>
        <span class="attribute-name">android:layout_weight</span>=<span class="string"><span class="delimiter">"</span><span class="content">0</span><span class="delimiter">"</span></span>
<span class="tag">/&gt;</span>
<span class="tag">&lt;/LinearLayout&gt;</span></code></pre>
<div id="lst">
Fig 1: main.xml generated by the project
</div>

<p>The <em>TextView</em> component is embedded in a <em>ScrollView</em> component so that we can scroll through the contents of the TextView. The ScrollView acts like a viewport. We also used <em>weight</em> property of the layout so that our viewport is given the most screen real-estate. See the note on <a href="/android-layout-weights">how to use weights to maximize screen space</a></p>
<p>The <em>Button's</em> onClick property is a method called <code class="codeblock">recAdd</code> which we need to define inside the Activity class.</p>
<p><strong>CREATE THE DATABASE CLASS</strong> Create a class that extends the <code class="codeblock">SQLiteOpenHelper</code> class. The code is shown below.</p>
<pre><code class="language-java"><span class="comment">/*

BSD License: Copyright (c) 2009-2012 Ted Hagos
All rights reserved.

License text: http://thelogbox.com/source-docs/software-license.txt

*/</span>


<span class="comment">// SQLiteOpenHelper .java</span>

<span class="keyword">package</span> <span class="namespace">com.thelogbox</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">android.provider.BaseColumns._ID</span>;
<span class="keyword">import</span> <span class="include">android.content.Context</span>;
<span class="keyword">import</span> <span class="include">android.database.sqlite.SQLiteDatabase</span>;
<span class="keyword">import</span> <span class="include">android.database.sqlite.SQLiteOpenHelper</span>;


<span class="directive">public</span> <span class="type">class</span> <span class="class">DbHelper</span> <span class="directive">extends</span> SQLiteOpenHelper {

    <span class="predefined-type">String</span> sqlcreate = <span class="string"><span class="delimiter">"</span><span class="content">CREATE TABLE todo( </span><span class="delimiter">"</span></span> + _ID  + <span class="string"><span class="delimiter">"</span><span class="content"> INTEGER PRIMARY KEY AUTOINCREMENT, item TEXT);</span><span class="delimiter">"</span></span>;


    <span class="directive">public</span> DbHelper(<span class="predefined-type">Context</span> ctx) {
        <span class="local-variable">super</span>(ctx,<span class="string"><span class="delimiter">"</span><span class="content">tododb.db</span><span class="delimiter">"</span></span>,<span class="predefined-constant">null</span>, <span class="integer">1</span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onCreate(SQLiteDatabase db) {
        db.execSQL(sqlcreate);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> onUpgrade(SQLiteDatabase db, <span class="type">int</span> oldversion, <span class="type">int</span> newversion) {
        db.execSQL(<span class="string"><span class="delimiter">"</span><span class="content">DROP TABLE IF EXISTS tododb.db</span><span class="delimiter">"</span></span>);
        onCreate(db);
    }

}</code></pre>
<div id="lst">
Fig 2: SQLiteOpenHelper source
</div>

<p>You need to do <strong>3 things</strong> at a minimum when defining a SQLiteOpenHelper.</p>
<p><em>First. Define a public constructor that accepts a Context object.</em> This context is the context of the <em>Activity</em> class where you will instantiate the Helper class. Call the super constructor so that you don't break the chain. The first parameter to super constructor is the <em>context object</em> — you know this already, next parameter is the name of database you want to create; third parameter is a cursor factory, you can ignore this for now, that is why I passed <em>null</em> to it.</p>
<p>The last parameter is an integer value which stands for the database version. I placed one (1) because it is my first version of this database. When you revise the schema of the database, increase this value by one so that the <em>onUpgrade()</em> method kicks in---it will perform some sort of an ALTER database command in your behalf.</p>
<p><em>Second, override the onCreate() method</em>. This is where you can execute DDL (SQL Data Definition) commands against the database.</p>
<p><em>Third, Override the onUpgrade() method,</em> even if you won't need it yet. You won't be able to compile unless you override this method</p>
<p><em>Lastly, implement the methods</em> for reading and writing to the database.</p>
<pre><code class="language-java"><span class="comment">/*

BSD License: Copyright (c) 2009-2012 Ted Hagos
All rights reserved.

License text: http://thelogbox.com/source-docs/software-license.txt

*/</span>


<span class="comment">// Activity .java}</span>

<span class="keyword">package</span> <span class="namespace">com.thelogbox</span>;

<span class="keyword">import</span> <span class="include">android.app.Activity</span>;
<span class="keyword">import</span> <span class="include">android.os.Bundle</span>;
<span class="keyword">import</span> <span class="include">android.view.View</span>;
<span class="keyword">import</span> <span class="include">android.content.Context</span>; 
<span class="keyword">import</span> <span class="include">com.thelogbox.DbHelper</span>;
<span class="keyword">import</span> <span class="include">android.content.ContentValues</span>;
<span class="keyword">import</span> <span class="include">android.database.sqlite.SQLiteDatabase</span>;
<span class="keyword">import</span> <span class="include">android.database.Cursor</span>;
<span class="keyword">import</span> <span class="include">android.widget.TextView</span>;
<span class="keyword">import</span> <span class="include">android.widget.EditText</span>;


<span class="directive">public</span> <span class="type">class</span> <span class="class">DbSample</span> <span class="directive">extends</span> Activity {


    DbHelper dh;
    SQLiteDatabase dbwrite;
    SQLiteDatabase dbread;

    EditText input;
    TextView output;


   <span class="comment">/** Called when the activity is first created. */</span>
   <span class="annotation">@Override</span>
   <span class="directive">public</span> <span class="type">void</span> onCreate(Bundle savedInstanceState) {

        dh = <span class="keyword">new</span> DbHelper(getApplicationContext());
        dbwrite = dh.getWritableDatabase();
        dbread = dh.getReadableDatabase();

        <span class="comment">// you cannot put the findViewById here, it causes errors</span>

        <span class="local-variable">super</span>.onCreate(savedInstanceState);
      setContentView(R.layout.main);
    }


    <span class="directive">public</span> <span class="type">void</span> recAdd(<span class="predefined-type">View</span> v) {

        input = (EditText) findViewById(R.id.todoedit);
        output = (TextView) findViewById(R.id.tododisplay);

        <span class="predefined-type">String</span> itemtoadd = input.getText().toString();      

        ContentValues cv = <span class="keyword">new</span> ContentValues();
        cv.put(<span class="string"><span class="delimiter">"</span><span class="content">item</span><span class="delimiter">"</span></span>, itemtoadd);
        dbwrite.insertOrThrow(<span class="string"><span class="delimiter">"</span><span class="content">todo</span><span class="delimiter">"</span></span>,<span class="predefined-constant">null</span>,cv);

        <span class="predefined-type">String</span> temptext = (<span class="predefined-type">String</span>) output.getText();

        <span class="comment">//Write the dbExtraction routine here</span>

        <span class="comment">//temptext = temptext + "\n";</span>
        output.setText(getTodos());

    }

    <span class="directive">private</span> <span class="predefined-type">String</span> getTodos() {

        <span class="predefined-type">String</span> cols<span class="type">[]</span> = {<span class="string"><span class="delimiter">"</span><span class="content">item</span><span class="delimiter">"</span></span>};
        <span class="predefined-type">StringBuilder</span> sb = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>(<span class="string"><span class="delimiter">"</span><span class="delimiter">"</span></span>);
        <span class="predefined-type">Cursor</span> cursor = dbread.query(<span class="string"><span class="delimiter">"</span><span class="content">todo</span><span class="delimiter">"</span></span>,cols,<span class="predefined-constant">null</span>,<span class="predefined-constant">null</span>,<span class="predefined-constant">null</span>,<span class="predefined-constant">null</span>,<span class="string"><span class="delimiter">"</span><span class="content">item</span><span class="delimiter">"</span></span>);
        startManagingCursor(cursor);

        <span class="keyword">while</span>(cursor.moveToNext()) {
            sb.append(cursor.getString(<span class="integer">0</span>));
            sb.append(<span class="string"><span class="delimiter">"</span><span class="char">\n</span><span class="delimiter">"</span></span>);
        }
        <span class="keyword">return</span> sb.toString();
    }
}</code></pre>
<div id="lst">
Fig 3: main Activity class
</div> 

<p>The <em>DBSample</em> class is a regular <em>Activity</em> class. It's bad coding practice to embed the database logic in the UI, but were just starting out to learn about database programming in Android, we will let it pass for now---if we partition this app properly and use the nice design patterns, we will have more code to deal with (and to understand).</p>
<p>We instantiated the DbHelper class so that we can create the database during our first run of this app. We also used the DbHelper to create 2 SQLiteDatabase objects, one for reading (dbread) and another for writing (dbwrite).</p>
<p>The <code class="codeblock">recAdd</code> method starts out by getting the object references to the EditText and TextView components, todoedit and tododisplay respectively.</p>
<p>Once we extracted whatever the user typed inside the EditText via <code class="codeblock">getText()</code> method, we stored it inside <em>itemtoadd</em> String variable.</p>
<p>The <code class="codeblock">ContentValues</code> object is some sort of a Dictionary data structure (key value pair), this data structure is required by the <em>insert</em> method of the SQLiteDatabase object, that is why we used it to wrap the string data we got from the EditText. You don't have to use the <code class="codeblock">insertOrThrow</code> method if you don't want to, you can insert a record to the database using raw SQL. If you pass an <em>INSERT INTO todo …</em> inside an <code class="codeblock">execSQL</code> method, that will do the job just as well.</p>
<h2 class="section">
RUNNING THE CODE
</h2>

<p>Compile and Test the project — <code class="codeblock">ant debug install</code>. The <em>codeonCreate()</em> method of DbHelper should kick in the first time your app issues a db related command.</p>
<p>
</p><p><a href="/android-programming-tutorial/">← Android Programming Tutorial</a></p>
	  </div>
		<p/>



    <!-- Start of StatCounter Code for Default Guide -->
	
  <script type="text/javascript">
  var sc_project=7827488; 
  var sc_invisible=1; 
  var sc_security="069357c9"; 
  </script>
  <script type="text/javascript"
      src="http://www.statcounter.com/counter/counter.js"></script>
  <noscript><div class="statcounter"><a title="customizable
      counter" href="http://statcounter.com/free-hit-counter/"
      target="_blank"><img class="statcounter"
      src="http://c.statcounter.com/7827488/0/069357c9/1/"
      alt="customizable counter"></a></div></noscript>
  <!-- End of StatCounter Code for Default Guide -->
   
    
<!--
<p/></p><p/></p>
<strong>For discussions,</strong> please use <a href="https://groups.google.com/group/thelogbox">theLogBox Google Group</a>. Follow me on <a href="https://twitter.com/thelogbox">Twitter</a> or <a href="https://facebook.com/thelogbox.dev">Facebook.com/thelogbox.dev</a>

-->

<div id="mc_embed_signup">
<form action="http://thelogbox.us5.list-manage.com/subscribe/post?u=ccf5609c10396fa44241f5400&amp;id=0117706770" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
	
<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="To get our updates, enter your email here" required>
<div class="clear">  
  <input type="submit" value="Subscribe"
  name="subscribe" id="mc-embedded-subscribe"
  class="button">
</div>
</form>
</div>

    <footer>
      &copy 2009-2013 theLogBox.com 

    </foter>

    </div>
  </body>

</html>
